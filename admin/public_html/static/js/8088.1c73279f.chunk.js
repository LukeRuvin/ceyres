"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8088],{8297:(e,t,l)=>{l.d(t,{A:()=>o});var s=l(9950),n=l(55902),a=l(41397),i=l(60767),r=l(44414);function o(e){let{handleChange:t,defaultValue:l,resetSearch:o,...c}=e;const[d,u]=(0,s.useState)(l),v=(0,s.useMemo)((()=>(0,a.debounce)((e=>{t(e)}),800)),[]);return(0,s.useEffect)((()=>{u(l)}),[o]),(0,r.jsx)(n.A,{value:d,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,r.jsx)(i.A,{}),...c})}},47992:(e,t,l)=>{l.d(t,{G:()=>c});var s=l(9950),n=l(95491),a=l.n(n),i=l(99674),r=l(90650),o=l(44414);const c=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:n,refetchOptions:c=!1,...d}=e;const[u,v]=(0,s.useState)(!1),[h,p]=(0,s.useState)([]),x=(0,s.useMemo)((()=>a()((e=>{p([]),v(!0),t(e).then((e=>{p(e),v(!1)}))}),l)),[t,l]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:x,onClear:()=>{x(""),n&&n()},notFoundContent:u?(0,o.jsx)(r.A,{size:"small"}):"no results",...d,options:h,onFocus:()=>{h.length&&!c||x("")}})}},53387:(e,t,l)=>{l.d(t,{A:()=>o});var s=l(89379),n=l(9950);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var i=l(25085),r=function(e,t){return n.createElement(i.A,(0,s.A)((0,s.A)({},e),{},{ref:t,icon:a}))};const o=n.forwardRef(r)},53774:(e,t,l)=>{function s(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const l=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?`${l} ${e}`:`${e} ${l}`}l.r(t),l.d(t,{default:()=>s})},58088:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});var s=l(80737),n=l(48538),a=l(23263),i=l(52913),r=l(70030),o=l(8297),c=l(47992),d=l(55660),u=l(44414);const v=e=>{let{filters:t,setFilters:l}=e;const{t:n}=(0,r.B)();return(0,u.jsxs)(s.A,{wrap:!0,children:[(0,u.jsx)(o.A,{placeholder:n("search"),className:"w-200px",onChange:e=>{var s;return l({...t,search:null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value})}}),(0,u.jsx)(c.G,{fetchOptions:e=>{const t={perPage:10,page:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return d.A.getAll(t).then((e=>{var t;return null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>{var t;return{label:(null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title)||n("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},className:"w-200px",placeholder:n("select.category"),onChange:e=>l({...t,shop:e})})]})};var h=l(24513),p=l(44070),x=l(53387),g=l(28429),f=l(74623),m=l(91854),A=l(9950),j=l(43394),w=l(53774),y=l(55386),C=l(5478),k=l(85923),S=l(76083),b=l(62110);const _=function(){var e,t;const{t:l}=(0,r.B)(),o=(0,g.Zp)(),c=(0,m.wA)(),{setIsModalVisible:d}=(0,A.useContext)(y.o),{activeMenu:_}=(0,m.d4)((e=>e.menu),m.bN),{serviceExtra:$,loading:z,params:N,meta:I}=(0,m.d4)((e=>e.serviceExtra),m.bN),{defaultCurrency:E}=(0,m.d4)((e=>e.currency),m.bN),[F,M]=(0,A.useState)(null),[O,V]=(0,A.useState)(null),[R,T]=(0,A.useState)(!1),[B,Y]=(0,A.useState)({search:"",category:{}}),G={...N,search:null!==B&&void 0!==B&&null!==(e=B.search)&&void 0!==e&&e.length?B.search:void 0,shop_id:null===(t=B.shop)||void 0===t?void 0:t.value},H=[{title:l("id"),dataIndex:"id",is_show:!0,key:"id"},{title:l("title"),dataIndex:"title",is_show:!0,key:"translation"},{title:l("service"),dataIndex:"service",key:"service",is_show:!0},{title:l("shop"),dataIndex:"shop",key:"shop",is_show:!0},{title:l("price"),dataIndex:"price",key:"price",is_show:!0,render:e=>(0,w.default)(e||0,null===E||void 0===E?void 0:E.symbol,null===E||void 0===E?void 0:E.position)},{title:l("options"),is_show:!0,key:"options",render:(e,t)=>(0,u.jsxs)(s.A,{wrap:!0,children:[(0,u.jsx)(n.A,{type:"primary",icon:(0,u.jsx)(h.A,{}),onClick:()=>K(null===t||void 0===t?void 0:t.id)}),(0,u.jsx)(n.A,{icon:(0,u.jsx)(p.A,{}),onClick:()=>{M([null===t||void 0===t?void 0:t.id]),d(!0),V(!0)}})]})}],K=e=>{const t=`service-extra/${e}`;c((0,f.X4)({id:"edit.service.extra",url:t,name:l("edit.service.extra")})),o(`/${t}`,{state:{params:G}})},P={selectedRowKeys:F,onChange:e=>{M(e)}};return(0,A.useEffect)((()=>{_.refetch&&(c((0,f.km)(_)),c((0,j.Y)(G)))}),[_.refetch]),(0,A.useEffect)((()=>{const e=setTimeout((()=>{c((0,j.Y)(G))}),400);return()=>clearTimeout(e)}),[B]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.A,{children:(0,u.jsxs)(s.A,{className:"justify-content-end align-items-end",children:[(0,u.jsx)(v,{filters:B,setFilters:Y}),(0,u.jsx)(n.A,{icon:(0,u.jsx)(p.A,{}),onClick:()=>{null===F||0===F.length?k.oR.warning(l("select.the.service.extra")):(d(!0),V(!1))},children:l("delete.selected")}),(0,u.jsx)(n.A,{icon:(0,u.jsx)(x.A,{}),type:"primary",onClick:()=>{const e="service-extra/add";c((0,f.X4)({id:"create.service.extra",url:e,name:l("add.service.extra")})),o(`/${e}`,{state:{params:G}})},children:l("add.service.extra")})]})}),(0,u.jsx)(a.A,{title:l("service.extra"),children:(0,u.jsx)(i.A,{scroll:{x:!0},rowSelection:P,columns:null===H||void 0===H?void 0:H.filter((e=>e.is_show)),rowKey:e=>null===e||void 0===e?void 0:e.id,dataSource:$,loading:z,pagination:{pageSize:(null===I||void 0===I?void 0:I.per_page)||10,page:null===I||void 0===I?void 0:I.current_page,total:I.total||0,current:(null===I||void 0===I?void 0:I.current_page)||1},onChange:e=>{const{pageSize:t,current:l}=e,s={...G,perPage:t,page:l};c((0,C.jg)(s))}})}),(0,u.jsx)(S.A,{click:()=>{T(!0);const e={...Object.assign({},...F.map(((e,t)=>({[`ids[${t}]`]:e}))))};b.A.delete(e).then((()=>{k.oR.success(l("successfully.deleted")),M(null),d(!1),V(!1),c((0,j.Y)(G))})).finally((()=>T(!1)))},text:l(O?"delete":"all.delete"),setText:M,loading:R})]})}}}]);