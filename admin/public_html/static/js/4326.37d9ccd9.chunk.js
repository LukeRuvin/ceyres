"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4326],{8168:(e,l,t)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{A:()=>n})},8297:(e,l,t)=>{t.d(l,{A:()=>s});var n=t(9950),i=t(55902),d=t(41397),o=t(60767),a=t(44414);function s(e){let{handleChange:l,defaultValue:t,resetSearch:s,...r}=e;const[u,v]=(0,n.useState)(t),c=(0,n.useMemo)((()=>(0,d.debounce)((e=>{l(e)}),800)),[]);return(0,n.useEffect)((()=>{v(t)}),[s]),(0,a.jsx)(i.A,{value:u,onChange:e=>{v(e.target.value),c(e.target.value)},prefix:(0,a.jsx)(o.A,{}),...r})}},10156:(e,l,t)=>{t.d(l,{A:()=>y});var n=t(9950),i=t(59233),d=t(82706),o=t(48538),a=t(87094),s=t(41988),r=t(91854),u=t(57056),v=t(74623),c=t(70030),h=t(29514),m=t(47992),p=t(66209),x=t(44414);function y(e){var l;let{orderDetails:t,handleCancel:y}=e;const{t:g}=(0,c.B)(),{activeMenu:f}=(0,r.d4)((e=>e.menu),r.bN),{deliverymans:A}=(0,r.d4)((e=>e.deliveryman),r.bN),[j]=i.A.useForm(),b=(0,r.wA)(),[_,k]=(0,n.useState)(!1);(0,n.useEffect)((()=>{b((0,h.d8)())}),[]);return(0,x.jsx)(d.A,{visible:!!t,title:t.title,onCancel:y,footer:[(0,x.jsx)(o.A,{type:"primary",onClick:()=>j.submit(),loading:_,children:g("save")}),(0,x.jsx)(o.A,{type:"default",onClick:y,children:g("cancel")})],children:(0,x.jsx)(i.A,{form:j,layout:"vertical",onFinish:e=>{const l={deliveryman:e.deliveryman.value};k(!0),u.A.updateDelivery(t.id,l).then((()=>{y(),b((0,v.Ms)(f))})).finally((()=>k(!1)))},initialValues:{deliveryman:null===(l=t.deliveryman)||void 0===l?void 0:l.id},children:(0,x.jsx)(a.A,{gutter:12,children:(0,x.jsx)(s.A,{span:24,children:(0,x.jsx)(i.A.Item,{label:g("deliveryman"),name:"deliveryman",rules:[{required:!0,message:g("required")}],children:(0,x.jsx)(m.G,{fetchOptions:e=>{const l={perPage:10,page:1,search:e};return p.A.getDeliverymans(l).then((e=>e.data.map((e=>({label:e.firstname,value:e.id})))))}})})})})})})}},28645:(e,l,t)=>{t.d(l,{A:()=>p});var n=t(9950),i=t(66362),d=t(69216),o=t(80737),a=t(25933),s=t(57811),r=t(81541),u=t(48538),v=t(89323),c=t(70030),h=t(44414);const{Text:m}=i.A,p=e=>{let{columns:l=[],setColumns:t,style:i,size:p="",iconOnly:x}=e;const{t:y}=(0,c.B)(),[g,f]=(0,n.useState)(!1),A=(0,h.jsx)(d.A,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,h.jsx)(d.A.Item,{children:(0,h.jsxs)(o.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(a.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,h.jsx)(s.A,{overlay:A,trigger:["click"],onVisibleChange:e=>{f(e)},visible:g,children:(0,h.jsx)(r.A,{title:y("change.columns"),children:(0,h.jsx)(u.A,{style:{...i},size:p,icon:(0,h.jsx)(v.A,{}),children:x?null:y("Columns")})})})}},35116:(e,l,t)=>{t.d(l,{A:()=>r});t(9950);var n=t(48538),i=t(44070),d=t(85923),o=t(70030),a=t(13311),s=t(44414);function r(e){let{size:l="",onClick:t,type:r="default",...u}=e;const{t:v}=(0,o.B)(),{isDemo:c}=(0,a.A)();return(0,s.jsx)(n.A,{size:l,icon:(0,s.jsx)(i.A,{}),onClick:e=>{c?d.oR.warning(v("cannot.work.demo")):t(e)},type:r,...u})}},47992:(e,l,t)=>{t.d(l,{G:()=>r});var n=t(9950),i=t(95491),d=t.n(i),o=t(99674),a=t(90650),s=t(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:i,refetchOptions:r=!1,...u}=e;const[v,c]=(0,n.useState)(!1),[h,m]=(0,n.useState)([]),p=(0,n.useMemo)((()=>d()((e=>{m([]),c(!0),l(e).then((e=>{m(e),c(!1)}))}),t)),[l,t]);return(0,s.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),i&&i()},notFoundContent:v?(0,s.jsx)(a.A,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!r||p("")}})}},51066:(e,l,t)=>{t.d(l,{Q:()=>d});var n=t(17706),i=t(80415);const d=()=>{var e,l,t,d;return null!==(e=null===(l=n.M.getState())||void 0===l||null===(t=l.globalSettings)||void 0===t||null===(d=t.settings)||void 0===d?void 0:d.hour_format)&&void 0!==e?e:i.G}},53774:(e,l,t)=>{function n(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const t=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===l?`${t} ${e}`:`${e} ${t}`}t.r(l),t.d(l,{default:()=>n})},58891:(e,l,t)=>{t.d(l,{A:()=>r});var n=t(24893),i=(t(9950),t(50384)),d=t(26678),o=t(28429),a=t(44414);const s=[{value:"seller/orders-board",title:"Board",icon:(0,a.jsx)(d.oeo,{size:20})},{value:"seller/orders",title:"List",icon:(0,a.jsx)(i.AyK,{size:20})}],r=e=>{let{listType:l}=e;const{type:t}=(0,o.g)(),i=(0,o.Zp)();return(0,a.jsx)(n.Ay.Group,{value:l,onChange:e=>{i(`/${e.target.value}${t?`/${t}`:""}`)},className:"float-right",buttonStyle:"solid",children:null===s||void 0===s?void 0:s.map((e=>(0,a.jsx)(n.Ay.Button,{value:e.value,children:(0,a.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},65820:(e,l,t)=>{t.d(l,{s:()=>o});var n=t(28429),i=t(21215),d=t.n(i);const o=()=>{const e=(0,n.Zp)(),l=(0,n.zy)(),t=d().parse(l.search,{ignoreQueryPrefix:!0});return{values:t,set:(l,n)=>e({search:d().stringify({...t,[l]:n})}),reset:l=>{const n={...t};n[l]&&delete n[l],e({search:d().stringify({...n})})},clear:()=>e({search:d().stringify({})}),merge:l=>e({search:d().stringify({...t,...l})})}}},69447:(e,l,t)=>{t.d(l,{A:()=>w});var n=t(9950),i=t(98412),d=t(59233),o=t(82706),a=t(48538),s=t(87094),r=t(41988),u=t(55902),v=t(40895),c=t(99674),h=t(91854),m=t(70030),p=t(57056),x=t(81446),y=t(71999),g=t(87210),f=t(24513),A=t(59051),j=t.n(A),b=t(51066),_=t(44414);const{Panel:k}=i.A;function w(e){var l;let{orderId:t,handleCancel:A,refetchPage:w}=e;const{statusList:C}=(0,h.d4)((e=>e.orderStatus),h.bN),{defaultLang:S,languages:I}=(0,h.d4)((e=>e.formLang),h.bN),[$]=d.A.useForm(),{t:M}=(0,m.B)(),N=(0,n.useRef)(null),[D,Y]=(0,n.useState)(!1),[O,z]=(0,n.useState)(!1),[P,B]=(0,n.useState)(null!==C&&void 0!==C&&C.length?C.map((e=>({value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))):[]),[F,G]=(0,n.useState)(null),[V,R]=(0,n.useState)(null),[T,L]=(0,n.useState)(null),[E,q]=(0,n.useState)(null),H=(0,b.Q)();(0,n.useEffect)((()=>{Y(!0),p.A.getById(t).then((e=>{var l,t,n,i;G(e.data),R(null===(l=e.data)||void 0===l||null===(t=l.notes)||void 0===t?void 0:t.filter((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)}))),q(null===(n=e.data)||void 0===n?void 0:n.status),$.setFieldsValue({status:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.status})})).finally((()=>Y(!1)))}),[t]),(0,n.useEffect)((()=>{var e,l;if("pause"===(null===F||void 0===F?void 0:F.status))return void B(null===C||void 0===C?void 0:C.map((e=>({value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))));const t=C.findIndex((e=>e.name===(null===F||void 0===F?void 0:F.status))),n=t>=0?[C[t],t<C.length-1?"pause"===(null===(e=C[t+1])||void 0===e?void 0:e.name)?C[t+2]:C[t+1]:null]:[t<C.length-1?C[t+1]:null];var i;("on_a_way"===(null===(l=C[t])||void 0===l?void 0:l.name)&&n.push(C[t+4]),null!==C&&void 0!==C&&C.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))&&(null===n||void 0===n||n.push(null===C||void 0===C||null===(i=C.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))||void 0===i?void 0:i[0]));n.push({name:"canceled",id:8,active:!0,sort:(null===C||void 0===C?void 0:C.length)+1}),B(n.filter(Boolean).map((e=>({value:null===e||void 0===e?void 0:e.name,label:M(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))))}),[F]);const K=e=>{const l=Object.entries(e).filter((e=>{let[l,t]=e;return!!t}));if(0!==(null===l||void 0===l?void 0:l.length))return Object.fromEntries(l)};return(0,n.useEffect)((()=>{var e;$.setFieldsValue({[`title[${S||"en"}]`]:null===T||void 0===T||null===(e=T.title)||void 0===e?void 0:e[S||"en"]})}),[S]),(0,_.jsx)(o.A,{visible:!!t,title:[M("order.status")],onCancel:A,footer:[(0,_.jsx)(a.A,{type:"primary",onClick:()=>$.submit(),loading:O,children:M("save")},"save-form"),(0,_.jsx)(a.A,{type:"default",onClick:A,children:M("cancel")},"cansel-modal")],children:D?(0,_.jsx)(x.A,{}):(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(d.A,{form:$,layout:"vertical",onFinish:e=>{var l;let t=null;z(!0),T&&(null===e||void 0===e?void 0:e.status)===(null===F||void 0===F?void 0:F.status)&&(t={...Object.assign({},...I.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},t=K(t));const n=K({...Object.assign({},...I.map((l=>({[l.locale]:e[`note[${l.locale}]`]}))))}),i=n?{title:n}:null,d=(null===F||void 0===F?void 0:F.status)===(null===e||void 0===e?void 0:e.status)?null===F||void 0===F||null===(l=F.notes)||void 0===l?void 0:l.filter((l=>(null===l||void 0===l?void 0:l.status)===(null===e||void 0===e?void 0:e.status))).flatMap((e=>{var l;return null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((e,l)=>l===(null===T||void 0===T?void 0:T.index)?{...e,title:{...null===e||void 0===e?void 0:e.title,...t}}:e))})).filter(Boolean):[],o={status:null===e||void 0===e?void 0:e.status,notes:[...d,i].filter(Boolean)};p.A.updateStatus(F.id,o).then((()=>{A(),w()})).finally((()=>z(!1)))},name:"order-status-change-form",children:[(0,_.jsx)(s.A,{gutter:12,style:{marginBottom:"20px"},children:(0,_.jsx)(r.A,{span:24,children:(0,_.jsx)(y.A,{})})}),!(null===F||void 0===F||null===(l=F.notes)||void 0===l||!l.some((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)})))&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.A,{children:null===V||void 0===V?void 0:V.map((e=>{var l;return(0,_.jsx)(k,{header:M(null===e||void 0===e?void 0:e.status),children:(null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((l,t)=>{var n,i,o;return(0,_.jsxs)(s.A,{style:{marginBottom:"15px",display:"flex",justifyContent:"space-between"},gutter:12,children:[(0,_.jsxs)(r.A,{span:(null===e||void 0===e?void 0:e.status)===(null===F||void 0===F?void 0:F.status)&&E===(null===F||void 0===F?void 0:F.status)?22:24,children:[(0,_.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,_.jsxs)("span",{style:{marginTop:"3px"},children:[t+1,"."," "]}),(0,_.jsxs)("div",{style:{width:"100%"},children:[(0,_.jsx)("p",{style:{margin:0,fontSize:"15px",wordBreak:"break-all"},hidden:(null===T||void 0===T?void 0:T.orderId)===(null===e||void 0===e?void 0:e.id)&&(null===T||void 0===T?void 0:T.index)===t&&(null===F||void 0===F?void 0:F.status)===E,children:(null===l||void 0===l||null===(n=l.title)||void 0===n?void 0:n[S||"en"])||"--"}),(0,_.jsx)(d.A.Item,{name:`title[${S||"en"}]`,hidden:(null===T||void 0===T?void 0:T.orderId)!==(null===e||void 0===e?void 0:e.id)||(null===T||void 0===T?void 0:T.index)!==t||(null===F||void 0===F?void 0:F.status)!==E,children:(0,_.jsx)(u.A.TextArea,{maxLength:200,style:{width:"100%"},rows:Math.floor((null===l||void 0===l||null===(i=l.title)||void 0===i||null===(o=i[S||"en"])||void 0===o?void 0:o.length)/41||0)+1,ref:N},t)})]})]}),(0,_.jsx)("p",{style:{fontSize:"12px",margin:0,float:"right"},children:j()(null===l||void 0===l?void 0:l.created_at).format(`DD-MM-YYYY ${H}`)})]}),(null===e||void 0===e?void 0:e.status)===(null===F||void 0===F?void 0:F.status)&&(null===F||void 0===F?void 0:F.status)===E&&(0,_.jsx)(r.A,{span:2,children:(null===T||void 0===T?void 0:T.orderId)===(null===e||void 0===e?void 0:e.id)&&t===(null===T||void 0===T?void 0:T.index)?(0,_.jsx)(a.A,{type:"primary",icon:(0,_.jsx)(g.A,{}),size:"small",onClick:()=>$.submit(),loading:O}):(null===e||void 0===e?void 0:e.status)===(null===F||void 0===F?void 0:F.status)&&(0,_.jsx)(a.A,{icon:(0,_.jsx)(f.A,{}),size:"small",onClick:()=>{var n;N.current.focus(),L({orderId:null===e||void 0===e?void 0:e.id,index:t,title:null===l||void 0===l?void 0:l.title}),$.setFieldsValue({[`title[${S||"en"}]`]:null===l||void 0===l||null===(n=l.title)||void 0===n?void 0:n[S||"en"]})}})})]},t)})))||"--"},null===e||void 0===e?void 0:e.id)}))}),(0,_.jsx)(v.A,{})]}),(0,_.jsxs)(s.A,{gutter:12,children:[(0,_.jsx)(r.A,{span:24,children:(0,_.jsx)(d.A.Item,{label:M("status"),name:"status",rules:[{required:!0,message:M("required")}],children:(0,_.jsx)(c.A,{options:P,onSelect:e=>q(e)})})}),(0,_.jsx)(r.A,{span:24,children:I.map((e=>(0,_.jsx)(d.A.Item,{name:`note[${null===e||void 0===e?void 0:e.locale}]`,label:M("note"),hidden:(null===e||void 0===e?void 0:e.locale)!==S,children:(0,_.jsx)(u.A.TextArea,{maxLength:200})},`note_${null===e||void 0===e?void 0:e.id}`)))})]})]})})})}},80415:(e,l,t)=>{t.d(l,{G:()=>o,HV:()=>i,LH:()=>n,PR:()=>d,wO:()=>s,xt:()=>a});const n={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},i=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),d=30,o="HH:mm",a="hh:mm a",s=!0},83645:(e,l,t)=>{t.d(l,{A:()=>o});var n=t(17706),i=t(80415);const d=2147483647;function o(e){let l=((e,l,t)=>{const d=Number(null===(e=n.M.getState())||void 0===e||null===(l=e.globalSettings)||void 0===l||null===(t=l.settings)||void 0===t?void 0:t.order_refresh_timeout);return!isNaN(d)?d:i.PR})();return l?(l>d&&(l=d),setInterval((()=>{e()}),1e3*Number(l))):null}},94326:(e,l,t)=>{t.r(l),t.d(l,{default:()=>K});var n=t(9950),i=t(86971),d=t(54909),o=t(12916),a=t(80737),s=t(48538),r=t(23263),u=t(99674),v=t(52913),c=t(28429),h=t(24513),m=t(12678),p=t(44070),x=t(53387),y=t(13700),g=t(91854),f=t(74623),A=t(70030),j=t(88986),b=t(20626),_=t(8168),k=t(8297),w=t(51242),C=t(53774),S=t(47992),I=t(66209),$=t(28645),M=t(90352),N=t(35116),D=t(55386),Y=t(85923),O=t(76083),z=t(57056),P=t(10156),B=t(69447),F=t(58891),G=t(65820),V=t(59051),R=t.n(V),T=t(83645),L=t(51066),E=t(44414);const{RangePicker:q}=i.A,{TabPane:H}=d.A;function K(){var e,l,t,i,V,K,Q,Z,X,J,U;const W=(0,g.wA)(),ee=(0,c.Zp)(),{t:le}=(0,A.B)(),te=(0,c.g)(),[ne,ie]=(0,n.useState)(null),[de,oe]=(0,n.useState)(null),{setIsModalVisible:ae}=(0,n.useContext)(D.o),[se,re]=(0,n.useState)(!1),{defaultCurrency:ue}=(0,g.d4)((e=>e.currency),g.bN),{statusList:ve}=(0,g.d4)((e=>e.orderStatus),g.bN),ce=null===te||void 0===te?void 0:te.type,he=[{name:"all",id:0,active:!0,sort:0},...ve],[me,pe]=(0,n.useState)(null),[xe,ye]=(0,n.useState)(null),ge=(0,L.Q)(),[fe,Ae]=(0,n.useState)([{title:le("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:le("client"),dataIndex:"user",key:"user",is_show:!0,render:e=>e?(0,E.jsxs)("div",{children:[(null===e||void 0===e?void 0:e.firstname)||""," ",(null===e||void 0===e?void 0:e.lastname)||""]}):(0,E.jsx)(o.A,{color:"red",children:le("deleted.user")})},{title:le("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,E.jsxs)("div",{className:"cursor-pointer",children:["new"===e?(0,E.jsx)(o.A,{color:"blue",children:le(e)}):"canceled"===e?(0,E.jsx)(o.A,{color:"error",children:le(e)}):(0,E.jsx)(o.A,{color:"cyan",children:le(e)}),"delivered"!==e&&"canceled"!==e&&1!==l.type?(0,E.jsx)(h.A,{onClick:e=>{e.stopPropagation(),ye(null===l||void 0===l?void 0:l.id)}}):""]})},{title:le("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:e=>(0,E.jsxs)("div",{children:[(null===e||void 0===e?void 0:e.firstname)||"-"," ",(null===e||void 0===e?void 0:e.lastname)||"-"]})},{title:le("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",is_show:!0,render:e=>(0,E.jsxs)("div",{className:"text-lowercase",children:[e||0," ",le("products")]})},{title:le("amount"),dataIndex:"total_price",key:"total_price",is_show:!0,render:e=>(0,C.default)(e,null===ue||void 0===ue?void 0:ue.symbol)},{title:le("payment.type"),dataIndex:"transaction",key:"transaction",is_show:!0,render:e=>{var l;return le(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:le("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>R()(e).format(`YYYY-MM-DD ${ge}`)},{title:le("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date",render:e=>R()(e).format(`YYYY-MM-DD ${ge}`)},{title:le("options"),key:"options",is_show:!0,render:(e,l)=>(0,E.jsxs)(a.A,{children:[(0,E.jsx)(s.A,{icon:(0,E.jsx)(m.A,{}),onClick:()=>(e=>{W((0,f.X4)({url:`seller/order/details/${e.id}`,id:"order_details",name:le("order.details")})),ee(`/seller/order/details/${e.id}`)})(l)}),(0,E.jsx)(N.A,{icon:(0,E.jsx)(p.A,{}),onClick:()=>{ie([l.id]),ae(!0),oe(!0)}})]})}]),{activeMenu:je}=(0,g.d4)((e=>e.menu),g.bN),be=(0,G.s)(),[_e,ke]=(0,n.useState)(be.values.status||"all"),we=(null===(e=je.data)||void 0===e?void 0:e.role)||_e,{orders:Ce,meta:Se,loading:Ie,params:$e}=(0,g.d4)((e=>e.sellerOrders),g.bN),[Me,Ne]=(0,n.useState)(null);console.log("dateRange",Me);const De=null===je||void 0===je?void 0:je.data,Ye={search:null===De||void 0===De?void 0:De.search,sort:null===De||void 0===De?void 0:De.sort,column:null===De||void 0===De?void 0:De.column,perPage:null===De||void 0===De?void 0:De.perPage,page:null===De||void 0===De?void 0:De.page,user_id:null===De||void 0===De?void 0:De.user_id,status:"all"===we?void 0:we,shop_id:null!==(null===(l=je.data)||void 0===l?void 0:l.shop_id)?null===(t=je.data)||void 0===t?void 0:t.shop_id:null,delivery_type:ce||(null!==(null===(i=je.data)||void 0===i?void 0:i.delivery_type)?null===(V=je.data)||void 0===V?void 0:V.delivery_type:null),date_from:(null===Me||void 0===Me||null===(K=Me[0])||void 0===K?void 0:K.format("YYYY-MM-DD"))||void 0,date_to:(null===Me||void 0===Me||null===(Q=Me[1])||void 0===Q?void 0:Q.format("YYYY-MM-DD"))||void 0};(0,j.A)((()=>{W((0,b.Gb)(Ye))}),[null===je||void 0===je?void 0:je.data,Me]),(0,n.useEffect)((()=>{null!==je&&void 0!==je&&je.refetch&&(0,g.vA)((()=>{W((0,b.Gb)(Ye)),W((0,M.nr)({})),W((0,f.km)(je))}));const e=(0,T.A)((()=>{W((0,b.Gb)(Ye))}));return()=>clearInterval(e)}),[null===je||void 0===je?void 0:je.refetch]);const Oe=(e,l)=>{W((0,f.Ok)({activeMenu:je,data:{...De,[l]:e}}))};const ze={selectedRowKeys:ne,onChange:e=>{ie(e)}},Pe=()=>{pe(null),ye(null)};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(a.A,{className:"justify-content-end w-100 mb-3",children:[(0,E.jsx)(F.A,{listType:"seller/orders"}),(0,E.jsx)(s.A,{type:"primary",icon:(0,E.jsx)(x.A,{}),onClick:()=>{W((0,w.Uy)()),W((0,f.X4)({id:"pos.system",url:"seller/pos-system",name:le("add.order")})),ee("/seller/pos-system",{state:{delivery_type:ce}})},style:{width:"100%"},children:le("add.order")})]}),(0,E.jsx)(r.A,{children:(0,E.jsxs)(a.A,{wrap:!0,className:"p-0 mb-0",children:[(0,E.jsx)(k.A,{placeholder:le("search"),handleChange:e=>Oe(e,"search"),defaultValue:null===(Z=je.data)||void 0===Z?void 0:Z.search}),(0,E.jsx)(S.G,{placeholder:le("select.client"),fetchOptions:async function(e){const l={search:e,perPage:10};return I.A.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>({label:`${e.firstname} ${e.lastname}`,value:e.id,key:e.id})))}))},onSelect:e=>Oe(e.value,"search"),onDeselect:()=>Oe(null,"search"),style:{minWidth:200}}),(0,E.jsx)(q,{value:Me,onChange:e=>{Oe(JSON.stringify(e),"data_time"),Ne(e)},disabledDate:e=>e&&e>R()().endOf("day"),style:{width:"100%"}}),!ce&&(0,E.jsx)(u.A,{value:null===De||void 0===De?void 0:De.delivery_type,placeholder:le("order.type"),onSelect:e=>Oe(e,"delivery_type"),options:[{label:le("pickup"),value:"pickup"},{label:le("delivery"),value:"delivery"}],allowClear:!0,style:{width:"100%"},onDeselect:()=>Oe(null,"delivery_type")}),(0,E.jsx)(s.A,{icon:(0,E.jsx)(y.A,{}),onClick:()=>{(0,g.vA)((()=>{W((0,b.gw)()),W((0,f.Ok)({activeMenu:je,data:null}))})),W((0,b.Gb)({status:"all",page:null===De||void 0===De?void 0:De.page,perPage:10}))},children:le("clear")}),(0,E.jsx)(N.A,{size:"",onClick:()=>{null===ne||0===ne.length?Y.oR.warning(le("select.the.product")):(ae(!0),oe(!1))},children:le("delete.selected")}),(0,E.jsx)($.A,{columns:fe,setColumns:Ae})]})}),(0,E.jsxs)(r.A,{children:[(0,E.jsx)(d.A,{onChange:e=>{const l=e;W((0,f.Ok)({activeMenu:je,data:{role:l,page:1}})),ke(e),ee(`?status=${l}`)},type:"card",activeKey:we,children:he.filter((e=>!0===e.active)).map((e=>(0,E.jsx)(H,{tab:le(e.name)},e.name)))}),(0,E.jsx)(v.A,{scroll:{x:!0},rowSelection:ze,columns:null===fe||void 0===fe?void 0:fe.filter((e=>e.is_show)),dataSource:Ce,loading:Ie,pagination:{pageSize:$e.perPage,page:(null===(X=je.data)||void 0===X?void 0:X.page)||1,total:null===Se||void 0===Se?void 0:Se.total,defaultCurrent:null===(J=je.data)||void 0===J?void 0:J.page,current:null===(U=je.data)||void 0===U?void 0:U.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:n,current:i}=e,{field:d,order:o}=t,a=(0,_.A)(o);W((0,f.Ok)({activeMenu:je,data:{...De,perPage:n,page:i,column:d,sort:a}}))}}),(0,E.jsx)(O.A,{click:()=>{re(!0);const e={...Object.assign({},...ne.map(((e,l)=>({[`ids[${l}]`]:e}))))};z.A.delete(e).then((()=>{Y.oR.success(le("successfully.deleted")),ae(!1),W((0,b.Gb)(Ye)),oe(null)})).finally((()=>re(!1)))},text:le(de?"delete":"all.delete"),loading:se,setText:ie})]}),xe&&(0,E.jsx)(B.A,{orderId:xe,handleCancel:Pe,refetchPage:()=>(0,g.vA)((()=>{W((0,b.Gb)(Ye)),W((0,f.km)(je))}))}),me&&(0,E.jsx)(P.A,{orderDetails:me,handleCancel:Pe})]})}}}]);