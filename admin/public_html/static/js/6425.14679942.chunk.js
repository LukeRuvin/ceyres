"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6425],{6425:(e,l,t)=>{t.r(l),t.d(l,{default:()=>F});var i=t(9950),a=t(25933),n=t(80737),s=t(48538),d=t(23263),r=t(52913),o=t(55386),c=t(91854),u=t(74623),v=t(85923),h=t(70030),A=t(61621),g=t(8297),p=t(88986),x=t(2905),f=t(28429),j=t(59233),y=t(82706),m=t(90650),b=t(87094),k=t(41988),C=t(55902),S=t(71999),I=t(44414);function w(e){let{visible:l,setVisible:t,id:n,setId:d}=e;const[r]=j.A.useForm(),o=(0,c.wA)(),{t:u}=(0,h.B)(),{defaultLang:g,languages:p}=(0,c.d4)((e=>e.formLang),c.bN),[f,w]=(0,i.useState)(!1),[V,z]=(0,i.useState)(!1),[F,$]=(0,i.useState)(null),O=()=>{$(null),t(!1),r.resetFields(),d(null)};function R(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,t=p.map((e=>{var t;return{[`title[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title}}));return Object.assign({},...t)}return(0,i.useEffect)((()=>{n&&(z(!0),x.A.show(n).then((e=>{let{data:l}=e;$(l),r.setFieldsValue({active:null===l||void 0===l?void 0:l.active,...R(l)})})).finally((()=>z(!1))))}),[n]),(0,I.jsx)(y.A,{visible:l,onCancel:O,onOk:O,footer:null,loading:V,title:u("add.region"),children:(0,I.jsxs)(j.A,{form:r,onFinish:e=>{w(!0),null!==F&&void 0!==F&&F.id?(e=>{x.A.update(F.id,{active:e.active,title:{...Object.assign({},...p.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))}}).then((()=>{v.oR.success(u("successfully.updated")),(0,c.vA)((()=>{o((0,A.l)({}))})),t(!1),r.resetFields(),$(null)})).finally((()=>w(!1)))})(e):(e=>{x.A.create({active:e.active,title:{...Object.assign({},...p.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))}}).then((()=>{v.oR.success(u("successfully.added")),(0,c.vA)((()=>{o((0,A.l)({}))})),t(!1),r.resetFields(),$(null)})).finally((()=>w(!1)))})(e)},layout:"vertical",initialValues:{active:!0},children:[(0,I.jsx)(m.A,{spinning:V,children:(0,I.jsxs)(b.A,{gutter:24,children:[(0,I.jsx)(k.A,{span:24,children:(0,I.jsx)(S.A,{})}),(0,I.jsx)(k.A,{span:24,children:p.map((e=>(0,I.jsx)(j.A.Item,{label:u("title"),name:`title[${e.locale}]`,hidden:e.locale!==g,rules:[{required:(null===e||void 0===e?void 0:e.locale)===g,message:u("required")}],children:(0,I.jsx)(C.A,{})},"title"+e.id)))}),(0,I.jsx)(k.A,{span:4,children:(0,I.jsx)(j.A.Item,{label:u("active"),name:"active",valuePropName:"checked",children:(0,I.jsx)(a.A,{defaultChecked:!0})})})]})}),(0,I.jsx)(s.A,{type:"primary",htmlType:"submit",loading:f,children:u("submit")})]})})}var V=t(24513),z=t(44070);const F=()=>{const{t:e}=(0,h.B)(),l=(0,c.wA)(),t=(0,f.Zp)(),{setIsModalVisible:j}=(0,i.useContext)(o.o),{activeMenu:y}=(0,c.d4)((e=>e.menu),c.bN),m=null===y||void 0===y?void 0:y.data,{list:b,meta:k,loading:C}=(0,c.d4)((e=>e.deliveryRegion),c.bN),[S,F]=(0,i.useState)(!1),[$,O]=(0,i.useState)(!1),[R,_]=(0,i.useState)(!1),[B,M]=(0,i.useState)(null),N=[{title:e("id"),dataIndex:"id",key:"id"},{title:e("name"),dataIndex:"translation",key:"translation",render:(i,a)=>(0,I.jsx)("div",{style:{cursor:"pointer",textDecoration:"underline"},onClick:()=>(i=>{l((0,u.X4)({url:`deliveryzone/country?region_id=${i.id}`,id:"country",name:e("country")})),t(`/deliveryzone/country?region_id=${i.id}`)})(a),children:(null===i||void 0===i?void 0:i.title)||"-"})},{title:e("active"),dataIndex:"active",key:"active",render:(t,i)=>(0,I.jsx)(a.A,{onChange:()=>(t=>{F(t),x.A.status(t).then((()=>{j(!1),l((0,A.l)()),v.oR.success(e("successfully.updated"))})).finally((()=>{F(null)}))})(i.id),checked:t,loading:Boolean(S===i.id)},i.id)},{title:e("options"),dataIndex:"options",is_show:!0,render:(t,i)=>(0,I.jsxs)(n.A,{children:[(0,I.jsx)(s.A,{type:"primary",icon:(0,I.jsx)(V.A,{}),onClick:()=>(e=>{O(!0),M(e)})(i.id)}),(0,I.jsx)(s.A,{loading:Boolean(R===i.id),icon:(0,I.jsx)(z.A,{onClick:()=>(t=>{_(t),x.A.delete(t).then((()=>{l((0,A.l)()),v.oR.success(e("successfully.deleted"))})).finally((()=>{_(!1)}))})(i.id)})})]})}];(0,i.useEffect)((()=>{y.refetch&&(l((0,A.l)()),l((0,u.km)(y)))}),[y.refetch]),(0,p.A)((()=>{const e={search:null===m||void 0===m?void 0:m.search};l((0,A.l)(e))}),[null===y||void 0===y?void 0:y.data]);return(0,I.jsxs)(d.A,{title:e("regions"),extra:(0,I.jsxs)(n.A,{children:[(0,I.jsx)(g.A,{placeholder:e("search"),handleChange:e=>{return t=e,i="search",void l((0,u.Ok)({activeMenu:y,data:{...m,[i]:t}}));var t,i},defaultValue:null===m||void 0===m?void 0:m.search,resetSearch:!(null!==m&&void 0!==m&&m.search)}),(0,I.jsx)(s.A,{type:"primary",onClick:()=>O(!0),children:e("add.region")})]}),children:[(0,I.jsx)(r.A,{columns:N,dataSource:b,pagination:{pageSize:k.per_page,page:k.current_page,total:k.total},rowKey:e=>e.id,loading:C,onChange:e=>{const{pageSize:t,current:i}=e;l((0,A.l)({perPage:t,page:i}))}}),(0,I.jsx)(w,{visible:$,setVisible:O,id:B,setId:M})]})}},8297:(e,l,t)=>{t.d(l,{A:()=>r});var i=t(9950),a=t(55902),n=t(41397),s=t(60767),d=t(44414);function r(e){let{handleChange:l,defaultValue:t,resetSearch:r,...o}=e;const[c,u]=(0,i.useState)(t),v=(0,i.useMemo)((()=>(0,n.debounce)((e=>{l(e)}),800)),[]);return(0,i.useEffect)((()=>{u(t)}),[r]),(0,d.jsx)(a.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(s.A,{}),...o})}}}]);