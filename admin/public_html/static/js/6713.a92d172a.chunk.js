"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6713],{10156:(e,l,i)=>{i.d(l,{A:()=>j});var d=i(9950),n=i(59233),s=i(82706),o=i(48538),t=i(87094),a=i(41988),r=i(91854),u=i(57056),v=i(74623),c=i(70030),x=i(29514),m=i(47992),h=i(66209),p=i(44414);function j(e){var l;let{orderDetails:i,handleCancel:j}=e;const{t:y}=(0,c.B)(),{activeMenu:A}=(0,r.d4)((e=>e.menu),r.bN),{deliverymans:f}=(0,r.d4)((e=>e.deliveryman),r.bN),[g]=n.A.useForm(),b=(0,r.wA)(),[_,k]=(0,d.useState)(!1);(0,d.useEffect)((()=>{b((0,x.d8)())}),[]);return(0,p.jsx)(s.A,{visible:!!i,title:i.title,onCancel:j,footer:[(0,p.jsx)(o.A,{type:"primary",onClick:()=>g.submit(),loading:_,children:y("save")}),(0,p.jsx)(o.A,{type:"default",onClick:j,children:y("cancel")})],children:(0,p.jsx)(n.A,{form:g,layout:"vertical",onFinish:e=>{const l={deliveryman:e.deliveryman.value};k(!0),u.A.updateDelivery(i.id,l).then((()=>{j(),b((0,v.Ms)(A))})).finally((()=>k(!1)))},initialValues:{deliveryman:null===(l=i.deliveryman)||void 0===l?void 0:l.id},children:(0,p.jsx)(t.A,{gutter:12,children:(0,p.jsx)(a.A,{span:24,children:(0,p.jsx)(n.A.Item,{label:y("deliveryman"),name:"deliveryman",rules:[{required:!0,message:y("required")}],children:(0,p.jsx)(m.G,{fetchOptions:e=>{const l={perPage:10,page:1,search:e};return h.A.getDeliverymans(l).then((e=>e.data.map((e=>({label:e.firstname,value:e.id})))))}})})})})})})}},12970:(e,l,i)=>{function d(e){var l,i;let d=null===e||void 0===e?void 0:e.slice(0,1),n=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,n-1);s=null===(l=s)||void 0===l?void 0:l.replace(/./g,"*");let o=null===e||void 0===e?void 0:e.slice(n-1,e.length);return null===d||void 0===d||null===(i=d.concat(s))||void 0===i?void 0:i.concat(o)}i.d(l,{A:()=>d})},29597:(e,l,i)=>{function d(e){var l;if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const i=null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.split(", ");return{lat:Number(null===i||void 0===i?void 0:i[0]),lng:Number(null===i||void 0===i?void 0:i[1])}}i.d(l,{A:()=>d})},41478:(e,l,i)=>{e.exports=i.p+"static/media/user.fbe7078c52acde79652d.jpg"},42220:(e,l,i)=>{i.d(l,{A:()=>Y});var d=i(69286),n=i(86366),s=i(82706),o=i(48538),t=i(23263),a=i(87094),r=i(41988),u=i(12916),v=i(9950),c=i(70030),x=i(57056),m=i(81446),h=i(50384),p=i(91854),j=i(63620),y=i(41478),A=i(29597),f=i(47965),g=i(31222),b=i(6604),_=i(68873),k=i(59051),N=i.n(k),w=i(51066),I=i(44414);const{Step:C}=n.A,S=()=>(0,I.jsx)("div",{style:{position:"absolute",transform:"translate(-50%, -100%)"},children:(0,I.jsx)("img",{src:y,width:"50",alt:"Pin"})}),Y=e=>{var l,i,y;let{id:k,handleCancel:Y}=e;const{t:$}=(0,c.B)(),[D,M]=(0,v.useState)(null),[z,B]=(0,v.useState)(null),[F,q]=(0,v.useState)(null),{settings:L}=(0,p.d4)((e=>e.globalSettings),p.bN),O=(0,A.A)(L),[R,T]=(0,v.useState)(0),[E,H]=(0,v.useState)({lat:null===O||void 0===O?void 0:O.lat,lng:null===O||void 0===O?void 0:O.lng}),[V,P]=(0,v.useState)([{id:0,name:"new",icon:(0,I.jsx)(f.A,{})},{id:1,name:"accepted",icon:(0,I.jsx)(h.LW,{})},{id:2,name:"ready",icon:(0,I.jsx)(g.NtI,{})},{id:3,name:"on_a_way",icon:(0,I.jsx)(b.o2P,{})},{id:4,name:"delivered",icon:(0,I.jsx)(b.eDZ,{})}]),G=(0,w.Q)();const{google_map_key:Z}=(0,p.d4)((e=>e.globalSettings.settings),p.bN);return(0,v.useEffect)((()=>{M(!0),x.A.getById(k).then((e=>{var l,i,d,n,s,o,t;let{data:a}=e;P("canceled"===a.status?[{id:1,name:"new",icon:(0,I.jsx)(f.A,{})},{id:5,name:"canceled",icon:(0,I.jsx)(_.XfH,{})}]:V),T("canceled"===a.status?1:null===(l=V.find((e=>e.name===a.status)))||void 0===l?void 0:l.id);const r=null!==(i=null!==(d=null!==(n=null===a||void 0===a||null===(s=a.address)||void 0===s?void 0:s.location)&&void 0!==n?n:null===a||void 0===a||null===(o=a.my_address)||void 0===o?void 0:o.location)&&void 0!==d?d:null===a||void 0===a||null===(t=a.delivery_point)||void 0===t?void 0:t.location)&&void 0!==i?i:{latitude:null===O||void 0===O?void 0:O.lat,longitude:null===O||void 0===O?void 0:O.lng};H({lat:Number(null===r||void 0===r?void 0:r.latitude),lng:Number(null===r||void 0===r?void 0:r.longitude)}),q("canceled"===a.status?"error":"success"),B(a)})).finally((()=>{M(!1)}))}),[]),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(s.A,{visible:!!k,title:$("show.locations"),closable:!0,onCancel:Y,style:{minWidth:"80vw"},footer:[(0,I.jsx)(o.A,{type:"default",onClick:Y,children:$("cancel")},"cancelBtn")],children:D?(0,I.jsx)(m.A,{}):(0,I.jsxs)(t.A,{children:[(0,I.jsx)(n.A,{current:R,status:F,className:"mb-5",children:null===V||void 0===V?void 0:V.map(((e,l)=>(0,I.jsx)(C,{title:$(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+l)))}),(0,I.jsxs)(a.A,{gutter:12,children:[(0,I.jsxs)(r.A,{span:12,children:[(0,I.jsxs)("h3",{children:[$("order.id")," #",null===z||void 0===z?void 0:z.id]}),(0,I.jsxs)("p",{children:[(0,I.jsx)(h.A5h,{})," ",N()(null===z||void 0===z?void 0:z.created_at).format(`YYYY-MM-DD ${G}`)]}),(0,I.jsxs)("p",{children:[$("scheduled.at")," ",N()(null===z||void 0===z?void 0:z.delivery_date).format(`YYYY-MM-DD ${G}`)]})]}),(0,I.jsxs)(r.A,{span:12,children:[(0,I.jsxs)("p",{children:[$("status")," ","new"===(null===z||void 0===z?void 0:z.status)?(0,I.jsx)(u.A,{color:"blue",children:$(null===z||void 0===z?void 0:z.status)}):"canceled"===(null===z||void 0===z?void 0:z.status)?(0,I.jsx)(u.A,{color:"error",children:$(null===z||void 0===z?void 0:z.status)}):(0,I.jsx)(u.A,{color:"cyan",children:$(null===z||void 0===z?void 0:z.status)})]}),(0,I.jsxs)("p",{children:[$("payment.method")," ",(0,I.jsx)("strong",{children:null===z||void 0===z||null===(l=z.transaction)||void 0===l||null===(i=l.payment_system)||void 0===i?void 0:i.tag})]}),(0,I.jsxs)("p",{children:[$("order.type")," ",(0,I.jsx)("strong",{children:null===z||void 0===z?void 0:z.delivery_type})]}),(0,I.jsxs)("p",{children:[$("payment.type")," ",(0,I.jsx)("strong",{children:null===z||void 0===z||null===(y=z.transaction)||void 0===y?void 0:y.status})]})]}),(0,I.jsxs)(r.A,{span:24,className:"mt-5",children:[(0,I.jsx)("h4",{children:$("map")}),(0,I.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,I.jsx)(d.Ay,{bootstrapURLKeys:{key:Z?j.CJ:Z},defaultZoom:10,center:null!==E&&void 0!==E?E:O,options:{fullscreenControl:!1},children:(0,I.jsx)(S,{lat:null===E||void 0===E?void 0:E.lat,lng:null===E||void 0===E?void 0:E.lng})})})]})]})]})})})}},47992:(e,l,i)=>{i.d(l,{G:()=>r});var d=i(9950),n=i(95491),s=i.n(n),o=i(99674),t=i(90650),a=i(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:n,refetchOptions:r=!1,...u}=e;const[v,c]=(0,d.useState)(!1),[x,m]=(0,d.useState)([]),h=(0,d.useMemo)((()=>s()((e=>{m([]),c(!0),l(e).then((e=>{m(e),c(!1)}))}),i)),[l,i]);return(0,a.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),n&&n()},notFoundContent:v?(0,a.jsx)(t.A,{size:"small"}):"no results",...u,options:x,onFocus:()=>{x.length&&!r||h("")}})}},51066:(e,l,i)=>{i.d(l,{Q:()=>s});var d=i(17706),n=i(80415);const s=()=>{var e,l,i,s;return null!==(e=null===(l=d.M.getState())||void 0===l||null===(i=l.globalSettings)||void 0===i||null===(s=i.settings)||void 0===s?void 0:s.hour_format)&&void 0!==e?e:n.G}},53774:(e,l,i)=>{function d(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const i=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===l?`${i} ${e}`:`${e} ${i}`}i.r(l),i.d(l,{default:()=>d})},66713:(e,l,i)=>{i.r(l),i.d(l,{default:()=>ie});var d=i(9950),n=i(80737),s=i(12916),o=i(72243),t=i(52913),a=i(48538),r=i(23263),u=i(87094),v=i(41988),c=i(66362),x=i(74522),m=i(86366),h=i(90650),p=i(91524),j=i(98252),y=i(74947),A=i(40895),f=i(99083),g=i(24513),b=i(81419),_=i(28429),k=i(42074),N=i(57056),w=i(69554),I=i(91854),C=i(74623),S=i(69447),Y=i(10156),$=i(29514),D=i(70030),M=i(53774),z=i(90352),B=i(42220),F=i(50384),q=i(31222),L=i(63620),O=i(39174),R=i(74930),T=i(59051),E=i.n(T),H=i(13311),V=i(12970),P=i(94117),G=i(79930),Z=i(85923),Q=i(59233),X=i(82706),K=i(99674),W=i(22180),J=i(44414);const U=["paid","canceled"];function ee(e){let{transactionDetails:l,handleCancel:i,fetchOrder:n,orderId:s}=e;const[o]=Q.A.useForm(),{t:t}=(0,D.B)(),[r,c]=(0,d.useState)(!1);return(0,J.jsx)(X.A,{visible:!!l,title:t("transaction.status"),closable:!1,footer:[(0,J.jsx)(a.A,{type:"primary",onClick:()=>o.submit(),loading:r,children:t("save")},"save-form"),(0,J.jsx)(a.A,{type:"default",onClick:i,children:t("cancel")},"cansel-modal")],children:(0,J.jsx)(Q.A,{form:o,layout:"vertical",onFinish:e=>{c(!0),W.A.updateStatus(s,e).then((()=>{i(),n()})).catch((e=>Z.oR.error(e.message))).finally((()=>c(!1)))},initialValues:{status:l.status},children:(0,J.jsx)(u.A,{gutter:12,children:(0,J.jsx)(v.A,{span:24,children:(0,J.jsx)(Q.A.Item,{label:t("status"),name:"status",rules:[{validator:(e,l)=>"paid"===l||"canceled"===l?Promise.resolve():Promise.reject(new Error(t("required")))}],children:(0,J.jsx)(K.A,{children:U.map(((e,l)=>(0,J.jsx)(K.A.Option,{value:e,children:t(e)},l)))})})})})})})}var le=i(51066);function ie(){var e,l,i,T,Q,X,K,W,U,ie,de,ne,se,oe,te,ae,re,ue,ve,ce,xe,me,he,pe,je,ye,Ae,fe,ge,be,_e,ke,Ne,we,Ie,Ce,Se,Ye,$e,De,Me,ze,Be,Fe,qe,Le,Oe,Re,Te,Ee,He,Ve,Pe;const{activeMenu:Ge}=(0,I.d4)((e=>e.menu),I.bN),{defaultCurrency:Ze}=(0,I.d4)((e=>e.currency),I.bN),{statusList:Qe}=(0,I.d4)((e=>e.orderStatus),I.bN),Xe=(0,_.Zp)(),Ke=null===Ge||void 0===Ge||null===(e=Ge.data)||void 0===e?void 0:e.data,{t:We}=(0,D.B)(),{id:Je}=(0,_.g)(),Ue=(0,I.wA)(),el=(0,d.useRef)(),ll=(0,d.useRef)(),{isDemo:il}=(0,H.A)(),[dl,nl]=(0,d.useState)(!1),[sl,ol]=(0,d.useState)(null),[tl,al]=(0,d.useState)(null),[rl,ul]=(0,d.useState)(null),{myShop:vl}=(0,I.d4)((e=>e.myShop),I.bN),{defaultLang:cl}=(0,I.d4)((e=>e.formLang),I.bN),[xl,ml]=(0,d.useState)(!1),[hl,pl]=(0,d.useState)(!1),jl=(0,le.Q)(),yl=[{title:We("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===(i=l.stock)||void 0===i?void 0:i.id}},{title:We("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,d,o,t,a;return(0,J.jsxs)(n.A,{direction:"vertical",className:"relative",children:[null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,null===(t=l.stock)||void 0===t||null===(a=t.extras)||void 0===a?void 0:a.map((e=>{var l,i,d;return(0,J.jsxs)(s.A,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:We("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,d;return(0,J.jsx)(o.A,{src:(0,w.A)(null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:We("price"),dataIndex:"origin_price",key:"origin_price",render:(e,l)=>{var i;return null!==l&&void 0!==l&&l.bonus?(0,J.jsx)(s.A,{color:"green",children:We("bonus")}):(0,M.default)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.price,null===Ze||void 0===Ze?void 0:Ze.symbol)}},{title:We("quantity"),dataIndex:"quantity",key:"quantity",render:(e,l)=>{var i,d;return(0,J.jsx)("span",{children:e*((null===l||void 0===l||null===(i=l.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.interval)||1)})}},{title:We("discount"),dataIndex:"rate_discount",key:"rate_discount",render:(e,l)=>{var i;return(0,M.default)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.discount,null===Ze||void 0===Ze?void 0:Ze.symbol)}},{title:We("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>(0,M.default)(null===l||void 0===l?void 0:l.tax,null===Ze||void 0===Ze?void 0:Ze.symbol)},{title:We("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>(0,M.default)(null===l||void 0===l?void 0:l.total_price,null===Ze||void 0===Ze?void 0:Ze.symbol)},{title:We("actions"),dataIndex:"actions",key:"actions",render:(e,l)=>(0,J.jsx)(n.A,{children:(0,J.jsx)(a.A,{type:"primary",icon:(0,J.jsx)(f.A,{}),onClick:()=>_l(l),disabled:"new"!==(null===Ke||void 0===Ke?void 0:Ke.status)&&"accepted"!==(null===Ke||void 0===Ke?void 0:Ke.status)||(null===l||void 0===l?void 0:l.bonus)})})}],Al=[{title:We("date"),dataIndex:"date",key:"date",render:e=>E()(e).format(`YYYY-MM-DD ${jl}`)},{title:We("document"),dataIndex:"document",key:"document"},{title:We("number"),dataIndex:"number",key:"number"},{title:We("total.price"),dataIndex:"price",key:"price"}],fl=[{price:(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.total_price,Ze.symbol),number:(0,J.jsxs)(k.N_,{to:`/orders/generate-invoice/${null===Ke||void 0===Ke?void 0:Ke.id}`,children:["#",null===Ke||void 0===Ke?void 0:Ke.id]}),document:We("invoice"),date:E()(null===Ke||void 0===Ke?void 0:Ke.created_at).format(`YYYY-MM-DD ${jl}`)},{price:"-",number:(0,J.jsxs)(k.N_,{to:`/orders/generate-invoice/${null===Ke||void 0===Ke?void 0:Ke.id}`,children:["#",null===Ke||void 0===Ke?void 0:Ke.id]}),document:We("delivery.receipt"),date:E()(null===Ke||void 0===Ke?void 0:Ke.created_at).format(`YYYY-MM-DD ${jl}`)}],gl=()=>{ol(null),al(null),ul(null)};function bl(){nl(!0),N.A.getById(Je).then((e=>{let{data:l}=e;const i=l.currency,d=l.user,n=l.id,s=l.price,o=l.created_at,t=l.details.map((e=>{var l,i;return{...e,title:null===(l=e.shop)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title}}));Ue((0,C.Ok)({activeMenu:Ge,data:{details:t,currency:i,user:d,id:n,createdAt:o,price:s,data:l}}))})).finally((()=>{nl(!1),Ue((0,C.km)(Ge))}))}const _l=e=>{var l,i;Ue((0,C.X4)({url:`seller/order/details/${null===Ke||void 0===Ke?void 0:Ke.id}/replace/${null===e||void 0===e||null===(l=e.stock)||void 0===l?void 0:l.id}`,id:"seller_replace_product",name:We("replace.product")})),Xe(`replace/${null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.id}`,{state:{data:Ke}})},kl=(0,d.useCallback)((e=>{ml(!0),N.A.updateTracking(null===Ke||void 0===Ke?void 0:Ke.id,e).then((()=>{Z.oR.success(We("successfully.updated")),bl()})).finally((()=>{ml(!1)}))}),[null===Ke||void 0===Ke?void 0:Ke.id]);(0,d.useEffect)((()=>{const e={shop_id:vl.id};Ge.refetch&&(bl(),(0,I.vA)((()=>{Ue((0,z.nr)({})),Ue((0,$.d8)(e))})))}),[Ge.refetch]);return(0,J.jsxs)("div",{className:"order_details",children:[(0,J.jsx)(r.A,{className:"order-details-info",title:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(R.iHs,{className:"mr-2 icon"}),`${We("order")} ${null!==Ke&&void 0!==Ke&&Ke.id?`#${null===Ke||void 0===Ke?void 0:Ke.id} `:""}`," ",We("from.order")," ",null===Ke||void 0===Ke||null===(l=Ke.user)||void 0===l?void 0:l.firstname," ",(null===Ke||void 0===Ke||null===(i=Ke.user)||void 0===i?void 0:i.lastname)||""]}),extra:"delivered"!==(null===Ke||void 0===Ke?void 0:Ke.status)&&"canceled"!==(null===Ke||void 0===Ke?void 0:Ke.status)&&2===(null===Ke||void 0===Ke?void 0:Ke.type)?(0,J.jsxs)(n.A,{children:["delivered"!==(null===Ke||void 0===Ke?void 0:Ke.status)&&"canceled"!==(null===Ke||void 0===Ke?void 0:Ke.status)&&1!==(null===Ke||void 0===Ke?void 0:Ke.type)?(0,J.jsx)(a.A,{type:"primary",onClick:()=>ol(null===Ke||void 0===Ke?void 0:Ke.id),children:We("change.status")}):null,(0,J.jsx)(a.A,{type:"primary",icon:(0,J.jsx)(g.A,{}),onClick:()=>{Ue((0,C.X4)({url:`seller/order/${Je}`,id:"order_edit",name:We("edit.order")})),Xe(`/seller/order/${Je}`)},children:We("edit")})]}):""}),(0,J.jsxs)(u.A,{gutter:24,children:[(0,J.jsx)(v.A,{span:24,children:(0,J.jsx)(r.A,{children:(0,J.jsxs)(n.A,{className:"justify-content-between w-100",children:[(0,J.jsxs)(n.A,{className:"align-items-start",children:[(0,J.jsx)(b.A,{className:"order-card-icon"}),(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsx)(c.A.Text,{children:We("delivery.date")}),dl?(0,J.jsx)(x.A.Button,{size:16}):(0,J.jsx)(c.A.Text,{className:"order-card-title",children:E()(null===Ke||void 0===Ke?void 0:Ke.delivery_date).format(`YYYY-MM-DD ${jl}`)})]})]}),(0,J.jsxs)(n.A,{className:"align-items-start",onClick:()=>el.current.scrollIntoView({behavior:"smooth"}),children:[(0,J.jsx)(O.aOb,{className:"order-card-icon"}),(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsx)(c.A.Text,{children:We("total.price")}),dl?(0,J.jsx)(x.A.Button,{size:16,loading:dl}):(0,J.jsx)(c.A.Text,{className:"order-card-title",children:(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.total_price,null===Ze||void 0===Ze?void 0:Ze.symbol)})]})]}),(0,J.jsxs)(n.A,{className:"align-items-start",children:[(0,J.jsx)(O.j6C,{className:"order-card-icon"}),(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsx)(c.A.Text,{children:We("messages")}),dl?(0,J.jsx)(x.A.Button,{size:16}):(0,J.jsx)(c.A.Text,{className:"order-card-title",children:null!==Ke&&void 0!==Ke&&Ke.review?1:0})]})]}),(0,J.jsxs)(n.A,{className:"align-items-start",onClick:()=>ll.current.scrollIntoView({behavior:"smooth"}),children:[(0,J.jsx)(R.iHs,{className:"order-card-icon"}),(0,J.jsxs)("div",{className:"d-flex flex-column",children:[(0,J.jsx)(c.A.Text,{children:We("products")}),dl?(0,J.jsx)(x.A.Button,{size:16}):(0,J.jsx)(c.A.Text,{className:"order-card-title",children:null===Ke||void 0===Ke||null===(T=Ke.details)||void 0===T?void 0:T.reduce(((e,l)=>e+l.quantity),0)})]})]})]})})}),"canceled"!==(null===Ke||void 0===Ke?void 0:Ke.status)&&(0,J.jsx)(v.A,{span:24,children:(0,J.jsx)(r.A,{children:(0,J.jsx)(m.A,{current:null===Qe||void 0===Qe?void 0:Qe.findIndex((e=>e.name===(null===Ke||void 0===Ke?void 0:Ke.status))),children:null===Qe||void 0===Qe||null===(Q=Qe.slice(0,-1))||void 0===Q||null===(X=Q.filter((e=>null===e||void 0===e?void 0:e.active)))||void 0===X?void 0:X.map((e=>(0,J.jsx)(m.A.Step,{title:We(e.name)},e.id)))})})}),(0,J.jsxs)(v.A,{span:null!==Ke&&void 0!==Ke&&Ke.user||2===(null===Ke||void 0===Ke?void 0:Ke.type)&&"delivery"===(null===Ke||void 0===Ke?void 0:Ke.delivery_type)?16:24,children:[(0,J.jsx)(h.A,{spinning:dl,children:(0,J.jsxs)(r.A,{style:{minHeight:"200px"},children:[(0,J.jsxs)("h3",{children:[We("details"),":"]}),(0,J.jsxs)(u.A,{hidden:dl,className:"mb-3 order_detail",gutter:10,children:[(0,J.jsxs)(v.A,{span:12,children:[(0,J.jsxs)("div",{children:[We("created.date.&.time"),":",(0,J.jsxs)("span",{className:"ml-2",children:[(0,J.jsx)(F.cCc,{className:"mr-1"})," ",E()(null===Ke||void 0===Ke?void 0:Ke.created_at).format(`YYYY-MM-DD ${jl}`)," "]})]}),(0,J.jsx)("br",{}),"dine_in"===(null===Ke||void 0===Ke?void 0:Ke.delivery_type)&&(0,J.jsxs)("div",{children:[We("table"),":",(0,J.jsx)("span",{className:"ml-2",children:null===Ke||void 0===Ke||null===(K=Ke.table)||void 0===K?void 0:K.name})]}),"dine_in"!==(null===Ke||void 0===Ke?void 0:Ke.delivery_type)&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)("div",{children:[We("delivery.date.&.time"),":",(0,J.jsxs)("span",{className:"ml-2",children:[(0,J.jsx)(F.cCc,{className:"mr-1"})," ",E()(null===Ke||void 0===Ke?void 0:Ke.delivery_date).format(`YYYY-MM-DD ${jl}`)]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[We("payment.status"),":",(0,J.jsxs)("span",{style:{cursor:"pointer"},className:"ml-2",onClick:()=>pl(!0),children:[We(null===Ke||void 0===Ke||null===(W=Ke.transaction)||void 0===W?void 0:W.status)," ",(0,J.jsx)(g.A,{})]})]})]})]}),(0,J.jsxs)(v.A,{span:12,children:[(0,J.jsxs)("div",{children:[We("status"),":",(0,J.jsx)("span",{className:"ml-2",children:"new"===(null===Ke||void 0===Ke?void 0:Ke.status)?(0,J.jsx)(s.A,{color:"blue",children:We(null===Ke||void 0===Ke?void 0:Ke.status)}):"canceled"===(null===Ke||void 0===Ke?void 0:Ke.status)?(0,J.jsx)(s.A,{color:"error",children:We(null===Ke||void 0===Ke?void 0:Ke.status)}):(0,J.jsx)(s.A,{color:"cyan",children:We(null===Ke||void 0===Ke?void 0:Ke.status)})})]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[We("delivery.type"),":",(0,J.jsx)("span",{className:"ml-2",children:null===Ke||void 0===Ke?void 0:Ke.delivery_type})]}),"dine_in"!==(null===Ke||void 0===Ke?void 0:Ke.delivery_type)&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[We("payment.type"),":",(0,J.jsx)("span",{className:"ml-2",children:We(null===Ke||void 0===Ke||null===(U=Ke.transaction)||void 0===U||null===(ie=U.payment_system)||void 0===ie?void 0:ie.tag)})]})]}),(0,J.jsx)("br",{}),(0,J.jsxs)("div",{children:[We("otp"),":",(0,J.jsx)("span",{className:"ml-2",children:null!==(de=null===Ke||void 0===Ke?void 0:Ke.otp)&&void 0!==de?de:We("N/A")})]})]})]}),(0,J.jsxs)(u.A,{hidden:dl,className:"mb-3 order_detail",children:[(0,J.jsxs)(v.A,{span:12,children:[(0,J.jsx)(p.A,{bordered:!0,title:We("delivery.address"),children:null!==Ke&&void 0!==Ke&&Ke.address?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(p.A.Item,{label:We("street.house.number"),span:3,children:null!==(ne=null===Ke||void 0===Ke||null===(se=Ke.address)||void 0===se?void 0:se.street_house_number)&&void 0!==ne?ne:We("not.given")}),(0,J.jsx)(p.A.Item,{label:We("zipcode"),span:3,children:null!==(oe=null!==(te=null===Ke||void 0===Ke||null===(ae=Ke.address)||void 0===ae?void 0:ae.zipcode)&&void 0!==te?te:null===Ke||void 0===Ke||null===(re=Ke.address)||void 0===re?void 0:re.zip_code)&&void 0!==oe?oe:We("not.given")})]}):null!==Ke&&void 0!==Ke&&Ke.my_address?(0,J.jsxs)(J.Fragment,{children:[(null===Ke||void 0===Ke||null===(ue=Ke.my_address)||void 0===ue?void 0:ue.firstname)&&(0,J.jsx)(p.A.Item,{label:We("firstname"),span:3,children:null===Ke||void 0===Ke||null===(ve=Ke.my_address)||void 0===ve?void 0:ve.firstname}),(null===Ke||void 0===Ke||null===(ce=Ke.my_address)||void 0===ce?void 0:ce.lastname)&&(0,J.jsx)(p.A.Item,{label:We("lastname"),span:3,children:null===Ke||void 0===Ke||null===(xe=Ke.my_address)||void 0===xe?void 0:xe.lastname}),(null===Ke||void 0===Ke||null===(me=Ke.my_address)||void 0===me?void 0:me.phone)&&(0,J.jsx)(p.A.Item,{label:We("phone"),span:3,children:null!==Ke&&void 0!==Ke&&Ke.my_address.phone.startsWith("+")?(0,J.jsx)("a",{href:`tel:${null===Ke||void 0===Ke?void 0:Ke.my_address.phone}`,children:null===Ke||void 0===Ke?void 0:Ke.my_address.phone}):(0,J.jsxs)("a",{href:`tel:+${null===Ke||void 0===Ke?void 0:Ke.my_address.phone}`,children:["+",null===Ke||void 0===Ke?void 0:Ke.my_address.phone]})}),(0,J.jsx)(p.A.Item,{label:We("street.house.number"),span:3,children:null!==(he=null===Ke||void 0===Ke||null===(pe=Ke.my_address)||void 0===pe?void 0:pe.street_house_number)&&void 0!==he?he:We("not.given")}),(0,J.jsx)(p.A.Item,{label:We("street.house.number"),span:3,children:null!==(je=null===Ke||void 0===Ke||null===(ye=Ke.my_address)||void 0===ye?void 0:ye.street_house_number)&&void 0!==je?je:We("not.given")}),(0,J.jsx)(p.A.Item,{label:We("zipcode"),span:3,children:null!==(Ae=null===Ke||void 0===Ke||null===(fe=Ke.my_address)||void 0===fe?void 0:fe.zipcode)&&void 0!==Ae?Ae:We("not.given")}),(null===Ke||void 0===Ke||null===(ge=Ke.my_address)||void 0===ge?void 0:ge.additional_details)&&(0,J.jsx)(p.A.Item,{label:We("additional.details"),span:3,children:null===Ke||void 0===Ke||null===(be=Ke.my_address)||void 0===be?void 0:be.additional_details})]}):null!==Ke&&void 0!==Ke&&Ke.delivery_point?(0,J.jsx)(J.Fragment,{children:(0,J.jsxs)("div",{children:[We("address"),":"," ",null!==(_e=null===Ke||void 0===Ke||null===(ke=Ke.delivery_point)||void 0===ke||null===(Ne=ke.address)||void 0===Ne?void 0:Ne[cl])&&void 0!==_e?_e:We("no.address")]})}):"digital"===(null===Ke||void 0===Ke?void 0:Ke.delivery_type)?(0,J.jsx)("div",{children:We("digital.delivery")}):(0,J.jsx)("div",{children:We("no.address")})}),(0,J.jsxs)(a.A,{className:"map_show mt-3",onClick:()=>ul(Je),children:[(0,J.jsx)(q.gwi,{style:{marginRight:"8px"}})," ",We("show.locations")]})]}),(0,J.jsx)(v.A,{span:12,children:(0,J.jsx)(P.A,{orderId:Je})})]})]})}),"dine_in"!==(null===Ke||void 0===Ke?void 0:Ke.delivery_type)&&(0,J.jsx)(r.A,{title:We("documents"),children:(0,J.jsx)(t.A,{columns:Al,dataSource:fl,pagination:!1,loading:dl})})]}),(0,J.jsx)(v.A,{span:8,className:"order_info",children:"dine_in"!==(null===Ke||void 0===Ke?void 0:Ke.delivery_type)&&(0,J.jsxs)(J.Fragment,{children:["dine_in"!==(null===Ke||void 0===Ke?void 0:Ke.delivery_type)&&1===(null===Ke||void 0===Ke?void 0:Ke.type)&&(0,J.jsxs)(r.A,{title:We("deliveryman"),extra:"ready"===(null===Ke||void 0===Ke?void 0:Ke.status)&&"delivery"===(null===Ke||void 0===Ke?void 0:Ke.delivery_type)&&(0,J.jsxs)(a.A,{onClick:()=>al(Ke),children:[We("change"),(0,J.jsx)(g.A,{})]}),children:["new"===(null===Ke||void 0===Ke?void 0:Ke.status)||"accepted"===(null===Ke||void 0===Ke?void 0:Ke.status)?(0,J.jsx)("p",{children:We("order_status_ready")}):"","new"===(null===Ke||void 0===Ke?void 0:Ke.status)||"accepted"===(null===Ke||void 0===Ke?void 0:Ke.status)||null!==Ke&&void 0!==Ke&&Ke.deliveryman?"":(0,J.jsx)("p",{children:We("The supplier is not assigned or delivery type pickup")}),(null===Ke||void 0===Ke?void 0:Ke.deliveryman)&&(0,J.jsxs)(n.A,{children:[(0,J.jsx)(j.A,{shape:"square",size:64,src:L.sE+(null===Ke||void 0===Ke||null===(we=Ke.deliveryman)||void 0===we?void 0:we.img)}),(0,J.jsxs)("div",{children:[(0,J.jsx)("h5",{children:(null===Ke||void 0===Ke||null===(Ie=Ke.deliveryman)||void 0===Ie?void 0:Ie.firstname)+" "+(null===Ke||void 0===Ke||null===(Ce=Ke.deliveryman)||void 0===Ce?void 0:Ce.lastname)}),(0,J.jsxs)("span",{className:"delivery-info",children:[(0,J.jsx)(F.s91,{}),null===Ke||void 0===Ke||null===(Se=Ke.deliveryman)||void 0===Se?void 0:Se.phone]}),(0,J.jsxs)("div",{className:"delivery-info",children:[(0,J.jsx)("b",{children:(0,J.jsx)(q.mm2,{size:16})}),(0,J.jsx)("span",{children:il?(0,V.A)(null===Ke||void 0===Ke||null===(Ye=Ke.deliveryman)||void 0===Ye?void 0:Ye.email):null===Ke||void 0===Ke||null===($e=Ke.deliveryman)||void 0===$e?void 0:$e.email})]})]})]})]}),2===(null===Ke||void 0===Ke?void 0:Ke.type)&&"delivery"===(null===Ke||void 0===Ke?void 0:Ke.delivery_type)&&(0,J.jsx)(r.A,{title:We("tracking.info"),children:(0,J.jsx)(G.Y,{onSubmit:kl,isSubmitting:xl,initialData:{track_name:null===Ke||void 0===Ke?void 0:Ke.track_name,track_id:null===Ke||void 0===Ke?void 0:Ke.track_id,track_url:null===Ke||void 0===Ke?void 0:Ke.track_url}})}),!(null===Ke||void 0===Ke||!Ke.username)&&(0,J.jsxs)(r.A,{title:We("order.receiver"),children:[(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:We("name")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(F.tVJ,{}),null===Ke||void 0===Ke?void 0:Ke.username]})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:We("phone")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(F.s91,{}),null===Ke||void 0===Ke?void 0:Ke.phone]})]})]}),!(null===Ke||void 0===Ke||!Ke.user)&&(0,J.jsx)(r.A,{children:(0,J.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[dl?(0,J.jsx)(x.A.Avatar,{size:64,shape:"square"}):(0,J.jsx)(j.A,{shape:"square",size:64,src:null===Ke||void 0===Ke||null===(De=Ke.user)||void 0===De?void 0:De.img}),(0,J.jsx)("h5",{className:"customer-name",children:dl?(0,J.jsx)(x.A.Button,{size:20,style:{width:70}}):(null===Ke||void 0===Ke||null===(Me=Ke.user)||void 0===Me?void 0:Me.firstname)+" "+((null===Ke||void 0===Ke||null===(ze=Ke.user)||void 0===ze?void 0:ze.lastname)||"")}),(0,J.jsxs)("div",{className:"customer-info-detail",children:[(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:We("phone")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(F.s91,{}),dl?(0,J.jsx)(x.A.Button,{size:16}):null!==(Be=null===Ke||void 0===Ke||null===(Fe=Ke.user)||void 0===Fe?void 0:Fe.phone)&&void 0!==Be?Be:"none"]})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:We("email")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(q.mm2,{}),dl?(0,J.jsx)(x.A.Button,{size:16}):il?(0,V.A)(null===Ke||void 0===Ke||null===(qe=Ke.user)||void 0===qe?void 0:qe.email):null===Ke||void 0===Ke||null===(Le=Ke.user)||void 0===Le?void 0:Le.email]})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:We("registration.date")}),(0,J.jsxs)("span",{className:"description",children:[(0,J.jsx)(F.cCc,{}),dl?(0,J.jsx)(x.A.Button,{size:16}):E()(null===Ke||void 0===Ke||null===(Oe=Ke.user)||void 0===Oe?void 0:Oe.created_at).format(`YYYY-MM-DD ${jl}`)]})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:We("orders.count")}),(0,J.jsx)("span",{className:"description",children:dl?(0,J.jsx)(x.A.Button,{size:16}):(0,J.jsx)(y.A,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===Ke||void 0===Ke||null===(Re=Ke.user)||void 0===Re?void 0:Re.orders_count)||0})})]}),(0,J.jsxs)("div",{className:"customer-info",children:[(0,J.jsx)("span",{className:"title",children:We("spent.since.registration")}),(0,J.jsx)("span",{className:"description",children:dl?(0,J.jsx)(x.A.Button,{size:16}):(0,J.jsx)(y.A,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,M.default)(null===Ke||void 0===Ke||null===(Te=Ke.user)||void 0===Te?void 0:Te.orders_sum_price,null===Ze||void 0===Ze?void 0:Ze.symbol)})})]})]})]})}),(null===Ke||void 0===Ke?void 0:Ke.review)&&!dl&&(0,J.jsx)(r.A,{title:We("messages"),children:(0,J.jsxs)("div",{className:"order-message",children:[(0,J.jsx)("span",{className:"message",children:null===Ke||void 0===Ke||null===(Ee=Ke.review)||void 0===Ee?void 0:Ee.comment}),(0,J.jsx)(n.A,{className:"w-100 justify-content-end",children:(0,J.jsx)("span",{className:"date",children:E()(null===Ke||void 0===Ke||null===(He=Ke.review)||void 0===He?void 0:He.created_at).format("YYYY-MM-DD HH:mm")})})]})})]})}),(0,J.jsx)(v.A,{span:24,children:(0,J.jsxs)(r.A,{className:"w-100 order-table",title:We("order.products"),children:[(0,J.jsx)(A.A,{}),(0,J.jsx)(t.A,{ref:ll,scroll:{x:!0},columns:yl,dataSource:(null===(Ve=Ge.data)||void 0===Ve?void 0:Ve.details)||[],loading:dl,rowKey:e=>e.id,pagination:!1,expandable:{expandedRowRender:e=>{if(null===e||void 0===e||!e.replace_stock)return;const l=[{title:We("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.id}},{title:We("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,d,o,t,a;return(0,J.jsxs)(n.A,{direction:"vertical",className:"relative",children:[null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,null===l||void 0===l||null===(t=l.replace_stock)||void 0===t||null===(a=t.extras)||void 0===a?void 0:a.map((e=>{var l,i,d;return(0,J.jsxs)(s.A,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:We("image"),dataIndex:"img",key:"img",render:(e,l)=>{var i,d;return(0,J.jsx)(o.A,{src:(0,w.A)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:We("price"),dataIndex:"price",key:"price",render:(e,l)=>{var i;return(0,M.default)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.price,null===Ze||void 0===Ze?void 0:Ze.symbol)}},{title:We("quantity"),dataIndex:"replace_quantity",key:"replace_quantity",render:(e,l)=>{var i,d;return(0,J.jsx)("span",{children:e*((null===l||void 0===l||null===(i=l.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.interval)||1)})}},{title:We("discount"),dataIndex:"discount",key:"discount",render:(e,l)=>{var i,d;return(0,M.default)(null!==(i=null===l||void 0===l||null===(d=l.replace_stock)||void 0===d?void 0:d.discount)&&void 0!==i?i:0,null===Ze||void 0===Ze?void 0:Ze.symbol)}},{title:We("tax"),dataIndex:"tax",key:"tax",render:(e,l)=>{var i;return(0,M.default)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.tax,null===Ze||void 0===Ze?void 0:Ze.symbol)}},{title:We("total.price"),dataIndex:"total_price",key:"total_price",render:(e,l)=>{var i;return(0,M.default)(null===l||void 0===l||null===(i=l.replace_stock)||void 0===i?void 0:i.total_price,null===Ze||void 0===Ze?void 0:Ze.symbol)}},{title:We("note"),dataIndex:"note",key:"note",render:e=>e||"--"}];return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,J.jsx)(f.A,{style:{padding:"10px",margin:"10px 0 50px 0",border:"2px solid #cad2de",borderRadius:"30%"},rotate:90})}),(0,J.jsx)(t.A,{columns:l,dataSource:[e],pagination:!1})]})},expandIcon:e=>{let{expanded:l,onExpand:i,record:d}=e;return(0,J.jsx)(f.A,{onClick:e=>i(d,e),rotate:90})},defaultExpandedRowKeys:["0"]}}),(0,J.jsxs)(n.A,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,J.jsxs)("div",{children:[(0,J.jsxs)("span",{children:[We("delivery.fee"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[We("order.tax"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[We("product"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[We("service.fee"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[We("tips"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[We("discount"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[We("coupon.price"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:[We("tax"),":"]}),(0,J.jsx)("br",{}),(0,J.jsxs)("h3",{children:[We("total.price"),":"]})]}),(0,J.jsxs)("div",{children:[(0,J.jsx)("span",{children:(0,M.default)(null!==(Pe=null===Ke||void 0===Ke?void 0:Ke.delivery_fee)&&void 0!==Pe?Pe:0,null===Ze||void 0===Ze?void 0:Ze.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.total_tax,null===Ze||void 0===Ze?void 0:Ze.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.origin_price,null===Ze||void 0===Ze?void 0:Ze.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.service_fee,null===Ze||void 0===Ze?void 0:Ze.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.tips,null===Ze||void 0===Ze?void 0:Ze.symbol)}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:["-"," ",(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.total_discount,null===Ze||void 0===Ze?void 0:Ze.symbol)]}),(0,J.jsx)("br",{}),(0,J.jsxs)("span",{children:["- ",(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.coupon_price,null===Ze||void 0===Ze?void 0:Ze.symbol)]}),(0,J.jsx)("br",{}),(0,J.jsx)("span",{children:(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.tax,null===Ze||void 0===Ze?void 0:Ze.symbol)}),(0,J.jsx)("br",{}),(0,J.jsx)("h3",{ref:el,children:(0,M.default)(null===Ke||void 0===Ke?void 0:Ke.total_price,null===Ze||void 0===Ze?void 0:Ze.symbol)})]})]})]})})]}),sl&&(0,J.jsx)(S.A,{orderId:sl,handleCancel:gl}),tl&&(0,J.jsx)(Y.A,{orderDetails:tl,handleCancel:gl}),rl&&(0,J.jsx)(B.A,{id:rl,handleCancel:gl}),hl&&(0,J.jsx)(ee,{orderId:Je,handleCancel:()=>pl(!1),transactionDetails:null===Ke||void 0===Ke?void 0:Ke.transaction,fetchOrder:bl})]})}},69447:(e,l,i)=>{i.d(l,{A:()=>N});var d=i(9950),n=i(98412),s=i(59233),o=i(82706),t=i(48538),a=i(87094),r=i(41988),u=i(55902),v=i(40895),c=i(99674),x=i(91854),m=i(70030),h=i(57056),p=i(81446),j=i(71999),y=i(87210),A=i(24513),f=i(59051),g=i.n(f),b=i(51066),_=i(44414);const{Panel:k}=n.A;function N(e){var l;let{orderId:i,handleCancel:f,refetchPage:N}=e;const{statusList:w}=(0,x.d4)((e=>e.orderStatus),x.bN),{defaultLang:I,languages:C}=(0,x.d4)((e=>e.formLang),x.bN),[S]=s.A.useForm(),{t:Y}=(0,m.B)(),$=(0,d.useRef)(null),[D,M]=(0,d.useState)(!1),[z,B]=(0,d.useState)(!1),[F,q]=(0,d.useState)(null!==w&&void 0!==w&&w.length?w.map((e=>({value:null===e||void 0===e?void 0:e.name,label:Y(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))):[]),[L,O]=(0,d.useState)(null),[R,T]=(0,d.useState)(null),[E,H]=(0,d.useState)(null),[V,P]=(0,d.useState)(null),G=(0,b.Q)();(0,d.useEffect)((()=>{M(!0),h.A.getById(i).then((e=>{var l,i,d,n;O(e.data),T(null===(l=e.data)||void 0===l||null===(i=l.notes)||void 0===i?void 0:i.filter((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)}))),P(null===(d=e.data)||void 0===d?void 0:d.status),S.setFieldsValue({status:null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status})})).finally((()=>M(!1)))}),[i]),(0,d.useEffect)((()=>{var e,l;if("pause"===(null===L||void 0===L?void 0:L.status))return void q(null===w||void 0===w?void 0:w.map((e=>({value:null===e||void 0===e?void 0:e.name,label:Y(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))));const i=w.findIndex((e=>e.name===(null===L||void 0===L?void 0:L.status))),d=i>=0?[w[i],i<w.length-1?"pause"===(null===(e=w[i+1])||void 0===e?void 0:e.name)?w[i+2]:w[i+1]:null]:[i<w.length-1?w[i+1]:null];var n;("on_a_way"===(null===(l=w[i])||void 0===l?void 0:l.name)&&d.push(w[i+4]),null!==w&&void 0!==w&&w.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))&&(null===d||void 0===d||d.push(null===w||void 0===w||null===(n=w.filter((e=>"pause"===(null===e||void 0===e?void 0:e.name)&&(null===e||void 0===e?void 0:e.active))))||void 0===n?void 0:n[0]));d.push({name:"canceled",id:8,active:!0,sort:(null===w||void 0===w?void 0:w.length)+1}),q(d.filter(Boolean).map((e=>({value:null===e||void 0===e?void 0:e.name,label:Y(null===e||void 0===e?void 0:e.name),key:null===e||void 0===e?void 0:e.id}))))}),[L]);const Z=e=>{const l=Object.entries(e).filter((e=>{let[l,i]=e;return!!i}));if(0!==(null===l||void 0===l?void 0:l.length))return Object.fromEntries(l)};return(0,d.useEffect)((()=>{var e;S.setFieldsValue({[`title[${I||"en"}]`]:null===E||void 0===E||null===(e=E.title)||void 0===e?void 0:e[I||"en"]})}),[I]),(0,_.jsx)(o.A,{visible:!!i,title:[Y("order.status")],onCancel:f,footer:[(0,_.jsx)(t.A,{type:"primary",onClick:()=>S.submit(),loading:z,children:Y("save")},"save-form"),(0,_.jsx)(t.A,{type:"default",onClick:f,children:Y("cancel")},"cansel-modal")],children:D?(0,_.jsx)(p.A,{}):(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(s.A,{form:S,layout:"vertical",onFinish:e=>{var l;let i=null;B(!0),E&&(null===e||void 0===e?void 0:e.status)===(null===L||void 0===L?void 0:L.status)&&(i={...Object.assign({},...C.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},i=Z(i));const d=Z({...Object.assign({},...C.map((l=>({[l.locale]:e[`note[${l.locale}]`]}))))}),n=d?{title:d}:null,s=(null===L||void 0===L?void 0:L.status)===(null===e||void 0===e?void 0:e.status)?null===L||void 0===L||null===(l=L.notes)||void 0===l?void 0:l.filter((l=>(null===l||void 0===l?void 0:l.status)===(null===e||void 0===e?void 0:e.status))).flatMap((e=>{var l;return null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((e,l)=>l===(null===E||void 0===E?void 0:E.index)?{...e,title:{...null===e||void 0===e?void 0:e.title,...i}}:e))})).filter(Boolean):[],o={status:null===e||void 0===e?void 0:e.status,notes:[...s,n].filter(Boolean)};h.A.updateStatus(L.id,o).then((()=>{f(),N()})).finally((()=>B(!1)))},name:"order-status-change-form",children:[(0,_.jsx)(a.A,{gutter:12,style:{marginBottom:"20px"},children:(0,_.jsx)(r.A,{span:24,children:(0,_.jsx)(j.A,{})})}),!(null===L||void 0===L||null===(l=L.notes)||void 0===l||!l.some((e=>{var l;return!(null===e||void 0===e||null===(l=e.notes)||void 0===l||!l.length)})))&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(n.A,{children:null===R||void 0===R?void 0:R.map((e=>{var l;return(0,_.jsx)(k,{header:Y(null===e||void 0===e?void 0:e.status),children:(null===e||void 0===e||null===(l=e.notes)||void 0===l?void 0:l.map(((l,i)=>{var d,n,o;return(0,_.jsxs)(a.A,{style:{marginBottom:"15px",display:"flex",justifyContent:"space-between"},gutter:12,children:[(0,_.jsxs)(r.A,{span:(null===e||void 0===e?void 0:e.status)===(null===L||void 0===L?void 0:L.status)&&V===(null===L||void 0===L?void 0:L.status)?22:24,children:[(0,_.jsxs)("div",{style:{display:"flex",columnGap:"10px"},children:[(0,_.jsxs)("span",{style:{marginTop:"3px"},children:[i+1,"."," "]}),(0,_.jsxs)("div",{style:{width:"100%"},children:[(0,_.jsx)("p",{style:{margin:0,fontSize:"15px",wordBreak:"break-all"},hidden:(null===E||void 0===E?void 0:E.orderId)===(null===e||void 0===e?void 0:e.id)&&(null===E||void 0===E?void 0:E.index)===i&&(null===L||void 0===L?void 0:L.status)===V,children:(null===l||void 0===l||null===(d=l.title)||void 0===d?void 0:d[I||"en"])||"--"}),(0,_.jsx)(s.A.Item,{name:`title[${I||"en"}]`,hidden:(null===E||void 0===E?void 0:E.orderId)!==(null===e||void 0===e?void 0:e.id)||(null===E||void 0===E?void 0:E.index)!==i||(null===L||void 0===L?void 0:L.status)!==V,children:(0,_.jsx)(u.A.TextArea,{maxLength:200,style:{width:"100%"},rows:Math.floor((null===l||void 0===l||null===(n=l.title)||void 0===n||null===(o=n[I||"en"])||void 0===o?void 0:o.length)/41||0)+1,ref:$},i)})]})]}),(0,_.jsx)("p",{style:{fontSize:"12px",margin:0,float:"right"},children:g()(null===l||void 0===l?void 0:l.created_at).format(`DD-MM-YYYY ${G}`)})]}),(null===e||void 0===e?void 0:e.status)===(null===L||void 0===L?void 0:L.status)&&(null===L||void 0===L?void 0:L.status)===V&&(0,_.jsx)(r.A,{span:2,children:(null===E||void 0===E?void 0:E.orderId)===(null===e||void 0===e?void 0:e.id)&&i===(null===E||void 0===E?void 0:E.index)?(0,_.jsx)(t.A,{type:"primary",icon:(0,_.jsx)(y.A,{}),size:"small",onClick:()=>S.submit(),loading:z}):(null===e||void 0===e?void 0:e.status)===(null===L||void 0===L?void 0:L.status)&&(0,_.jsx)(t.A,{icon:(0,_.jsx)(A.A,{}),size:"small",onClick:()=>{var d;$.current.focus(),H({orderId:null===e||void 0===e?void 0:e.id,index:i,title:null===l||void 0===l?void 0:l.title}),S.setFieldsValue({[`title[${I||"en"}]`]:null===l||void 0===l||null===(d=l.title)||void 0===d?void 0:d[I||"en"]})}})})]},i)})))||"--"},null===e||void 0===e?void 0:e.id)}))}),(0,_.jsx)(v.A,{})]}),(0,_.jsxs)(a.A,{gutter:12,children:[(0,_.jsx)(r.A,{span:24,children:(0,_.jsx)(s.A.Item,{label:Y("status"),name:"status",rules:[{required:!0,message:Y("required")}],children:(0,_.jsx)(c.A,{options:F,onSelect:e=>P(e)})})}),(0,_.jsx)(r.A,{span:24,children:C.map((e=>(0,_.jsx)(s.A.Item,{name:`note[${null===e||void 0===e?void 0:e.locale}]`,label:Y("note"),hidden:(null===e||void 0===e?void 0:e.locale)!==I,children:(0,_.jsx)(u.A.TextArea,{maxLength:200})},`note_${null===e||void 0===e?void 0:e.id}`)))})]})]})})})}},79930:(e,l,i)=>{i.d(l,{Y:()=>u});var d=i(59233),n=i(87094),s=i(41988),o=i(55902),t=i(48538),a=i(70030),r=i(44414);const u=e=>{let{onSubmit:l,initialData:i,isSubmitting:u}=e;const{t:v}=(0,a.B)();return(0,r.jsx)(d.A,{layout:"vertical",initialValues:i,onFinish:l,children:(0,r.jsxs)(n.A,{children:[(0,r.jsx)(s.A,{span:24,children:(0,r.jsx)(d.A.Item,{label:v("tracking.name"),name:"track_name",rules:[{required:!0,message:v("required")}],children:(0,r.jsx)(o.A,{})})}),(0,r.jsx)(s.A,{span:24,children:(0,r.jsx)(d.A.Item,{label:v("tracking.id"),name:"track_id",rules:[{required:!0,message:v("required")}],children:(0,r.jsx)(o.A,{})})}),(0,r.jsx)(s.A,{span:24,children:(0,r.jsx)(d.A.Item,{label:v("tracking.url"),name:"track_url",rules:[{type:"url",message:v("should.be.url")}],children:(0,r.jsx)(o.A,{})})}),(0,r.jsx)(s.A,{span:7,children:(0,r.jsx)(t.A,{type:"primary",loading:u,htmlType:"submit",children:v("submit")})})]})})}},80415:(e,l,i)=>{i.d(l,{G:()=>o,HV:()=>n,LH:()=>d,PR:()=>s,wO:()=>a,xt:()=>t});const d={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},n=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),s=30,o="HH:mm",t="hh:mm a",a=!0},94117:(e,l,i)=>{i.d(l,{A:()=>h});var d=i(9950),n=i(70030),s=i(99163),o=i(85923),t=i(48538),a=i(12916),r=i(96011),u=i.n(r),v=i(63620),c=i(81446),x=i(44414);const m=`https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=${v.Lq}`;function h(e){let{orderId:l,showLink:i=!0,size:r=2}=e;const{t:h}=(0,n.B)(),[p,j]=(0,d.useState)(""),[y,A]=(0,d.useState)(!1),[f,g]=(0,d.useState)(null);return(0,d.useEffect)((()=>{(async()=>{A(!0);const e={dynamicLinkInfo:{domainUriPrefix:v.ac,link:`${v.CY}/orders/${l}`,androidInfo:{androidPackageName:v.xp},iosInfo:{iosBundleId:v.lu}}};try{const{data:l}=await u().post(m,e);g(null),j(null===l||void 0===l?void 0:l.shortLink)}catch(f){g(f),o.oR.error(f.message)}finally{A(!1)}})()}),[l]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h3",{children:[h("qr_code"),":"]}),(0,x.jsx)("div",{children:y||f?f?(0,x.jsx)(a.A,{color:"red",children:h("smth.went.wrong")}):(0,x.jsx)(c.A,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{width:100*r+"px",height:100*r+"px",borderRadius:"10px",overflow:f?"none":"hidden"},children:(0,x.jsx)(s.Xe,{size:500,id:"qrCode",includeMargin:!0,value:p,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,x.jsx)("br",{}),i&&(0,x.jsx)(t.A,{type:"primary",href:p,target:"_blank",rel:"noreferrer",style:{width:100*r+"px"},children:h("link.to.order")})]})})]})}}}]);