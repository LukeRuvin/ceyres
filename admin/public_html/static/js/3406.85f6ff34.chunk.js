"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3406],{8168:(e,l,t)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{A:()=>n})},8297:(e,l,t)=>{t.d(l,{A:()=>o});var n=t(9950),s=t(55902),a=t(41397),d=t(60767),i=t(44414);function o(e){let{handleChange:l,defaultValue:t,resetSearch:o,...r}=e;const[c,u]=(0,n.useState)(t),v=(0,n.useMemo)((()=>(0,a.debounce)((e=>{l(e)}),800)),[]);return(0,n.useEffect)((()=>{u(t)}),[o]),(0,i.jsx)(s.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(d.A,{}),...r})}},26714:(e,l,t)=>{t.d(l,{A:()=>y});var n=t(9950),s=t(48946),a=t(39362),d=t.n(a),i=t(81446),o=t(23263),r=t(82706),c=t(48538),u=t(87094),v=t(41988),x=t(70030),h=t(50384),m=t(68873),j=t(28429),A=t(44414);const p=o.A.Meta,y=e=>{let{id:l,handleCancel:t}=e;const[a,y]=(0,n.useState)(null),{t:f}=(0,x.B)(),g=(0,j.Zp)();return(0,A.jsx)(A.Fragment,{children:a?(0,A.jsx)(i.A,{}):(0,A.jsx)(r.A,{visible:!!l,title:f("selected.download"),closable:!1,handleCancel:t,footer:[(0,A.jsx)(c.A,{type:"default",onClick:t,children:f("cancel")},"cancelBtn")],children:(0,A.jsxs)(u.A,{children:[(0,A.jsx)(v.A,{span:12,children:(0,A.jsx)(o.A,{title:f("download.pdf"),onClick:()=>function(e){y(!0),s.A.orderExport(e).then((l=>{d()(l,`invoice_${e}.pdf`,"application/pdf"),t()})).finally((()=>y(!1)))}(l),className:"text-center cursor-pointer",children:(0,A.jsx)(p,{className:"d-flex align-items-center justify-content-center",title:(0,A.jsx)(h.yos,{size:80})})})}),(0,A.jsx)(v.A,{span:12,children:(0,A.jsx)(o.A,{title:f("download.check"),onClick:()=>(e=>{g(`/orders/generate-invoice/${e}`)})(l),className:"text-center cursor-pointer",children:(0,A.jsx)(p,{className:"d-flex align-items-center justify-content-center",title:(0,A.jsx)(m.TBA,{size:85})})})})]})})})}},28645:(e,l,t)=>{t.d(l,{A:()=>m});var n=t(9950),s=t(66362),a=t(69216),d=t(80737),i=t(25933),o=t(57811),r=t(81541),c=t(48538),u=t(89323),v=t(70030),x=t(44414);const{Text:h}=s.A,m=e=>{let{columns:l=[],setColumns:t,style:s,size:m="",iconOnly:j}=e;const{t:A}=(0,v.B)(),[p,y]=(0,n.useState)(!1),f=(0,x.jsx)(a.A,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,x.jsx)(a.A.Item,{children:(0,x.jsxs)(d.A,{className:"d-flex justify-content-between",children:[(0,x.jsx)(h,{children:e.title}),(0,x.jsx)(i.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,x.jsx)(o.A,{overlay:f,trigger:["click"],onVisibleChange:e=>{y(e)},visible:p,children:(0,x.jsx)(r.A,{title:A("change.columns"),children:(0,x.jsx)(c.A,{style:{...s},size:m,icon:(0,x.jsx)(u.A,{}),children:j?null:A("Columns")})})})}},35116:(e,l,t)=>{t.d(l,{A:()=>r});t(9950);var n=t(48538),s=t(44070),a=t(85923),d=t(70030),i=t(13311),o=t(44414);function r(e){let{size:l="",onClick:t,type:r="default",...c}=e;const{t:u}=(0,d.B)(),{isDemo:v}=(0,i.A)();return(0,o.jsx)(n.A,{size:l,icon:(0,o.jsx)(s.A,{}),onClick:e=>{v?a.oR.warning(u("cannot.work.demo")):t(e)},type:r,...c})}},48946:(e,l,t)=>{t.d(l,{A:()=>s});var n=t(82371);const s={orderExport:(e,l)=>n.A.get(`dashboard/user/export/order/${e}/pdf`,{params:l,responseType:"blob"})}},53406:(e,l,t)=>{t.r(l),t.d(l,{default:()=>K});var n=t(9950),s=t(86971),a=t(54909),d=t(12916),i=t(48538),o=t(80737),r=t(90650),c=t(23263),u=t(52913),v=t(28429),x=t(24513),h=t(12678),m=t(44070),j=t(98114),A=t(91854),p=t(74623),y=t(70030),f=t(88986),g=t(53177),_=t(8168),k=t(8297),b=t(53774),C=t(56592),w=t(23283),S=t(28645),N=t(39174),M=t(38635),Y=t(26714),$=t(85923),I=t(35116),D=t(23758),z=t(55386),P=t(76083),B=t(63620),O=t(69091),T=t(59051),E=t.n(T),R=t(44414);const{RangePicker:G}=s.A,{TabPane:V}=a.A;function K(){var e,l;const t=(0,A.wA)(),s=(0,v.Zp)(),{t:T}=(0,y.B)(),{defaultCurrency:K}=(0,A.d4)((e=>e.currency),A.bN),F=(0,A.d4)((e=>e.globalSettings.settings.hour_format)),[Z,X]=(0,n.useState)(null),[q,H]=(0,n.useState)(null),[J,L]=(0,n.useState)(null),[Q,U]=(0,n.useState)(null),{id:W}=(0,v.g)(),ee=[{id:7,name:"all"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[le,te]=(0,n.useState)([{title:T("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:T("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,R.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:T("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,R.jsxs)("div",{className:"text-lowercase",children:[e||0," ",T("products")]})},{title:T("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,R.jsxs)("div",{children:["new"===e?(0,R.jsx)(d.A,{color:"blue",children:T(e)}):"canceled"===e?(0,R.jsx)(d.A,{color:"error",children:T(e)}):(0,R.jsx)(d.A,{color:"cyan",children:T(e)}),"delivered"!==e&&"canceled"!==e?(0,R.jsx)(x.A,{onClick:()=>X(l)}):""]})},{title:T("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,l)=>(0,R.jsx)("div",{children:"ready"===l.status&&"pickup"!==l.delivery_type?(0,R.jsx)(i.A,{type:"link",onClick:()=>U(l),children:(0,R.jsxs)(o.A,{children:[e?`${e.firstname} ${e.lastname}`:T("add.deliveryman"),(0,R.jsx)(x.A,{})]})}):(0,R.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:T("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,b.default)(e,K.symbol)},{title:T("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return T(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:T("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>E()(e).format(`YYYY-MM-DD ${F}`)},{title:T("options"),is_show:!0,key:"options",render:(e,l)=>(0,R.jsxs)(o.A,{children:[(0,R.jsx)(i.A,{icon:(0,R.jsx)(N.kMs,{}),onClick:()=>H(l.id)}),(0,R.jsx)(i.A,{icon:(0,R.jsx)(h.A,{}),onClick:()=>(e=>{t((0,p.X4)({url:`order/details/${e.id}`,id:"order_details",name:T("order.details")})),s(`/order/details/${e.id}`)})(l)}),(0,R.jsx)(I.A,{icon:(0,R.jsx)(m.A,{}),onClick:()=>{oe([l.id]),ne(!0),ce(!0)}}),(0,R.jsx)(i.A,{icon:(0,R.jsx)(j.A,{}),onClick:()=>L(l.id)})]})}]),{setIsModalVisible:ne}=(0,n.useContext)(z.o),[se,ae]=(0,n.useState)(!1),{activeMenu:de}=(0,A.d4)((e=>e.menu),A.bN),[ie,oe]=(0,n.useState)(null),[re,ce]=(0,n.useState)(null),[ue,ve]=(0,n.useState)(!1),{orders:xe,meta:he,loading:me,params:je,statistic:Ae}=(0,A.d4)((e=>e.orders),A.bN),pe=null===de||void 0===de?void 0:de.data;(0,f.A)((()=>{const e={search:null===pe||void 0===pe?void 0:pe.search,sort:null===pe||void 0===pe?void 0:pe.sort,column:null===pe||void 0===pe?void 0:pe.column,perPage:null===pe||void 0===pe?void 0:pe.perPage,page:null===pe||void 0===pe?void 0:pe.page,deliveryman:W,date_from:null===pe||void 0===pe?void 0:pe.date_from,date_to:null===pe||void 0===pe?void 0:pe.date_to,status:"all"===(null===pe||void 0===pe?void 0:pe.status)||null===pe||void 0===pe?void 0:pe.status};t((0,g.Gb)(e))}),[null===de||void 0===de?void 0:de.data]);const ye=()=>{X(null),U(null),H(null),L(null)};(0,n.useEffect)((()=>{if(null!==de&&void 0!==de&&de.refetch){const e={status:null===pe||void 0===pe?void 0:pe.status,page:null===pe||void 0===pe?void 0:pe.page,perPage:10,type:"delivery",deliveryman:W};t((0,g.Gb)(e)),t((0,p.km)(de))}}),[null===de||void 0===de?void 0:de.refetch]);const fe={selectedRowKeys:ie,onChange:e=>{oe(e)}};return(0,R.jsxs)("div",{children:[(0,R.jsx)(r.A,{spinning:me,children:(0,R.jsx)(O.A,{data:Ae})}),(0,R.jsxs)(c.A,{title:T("orders"),extra:(0,R.jsxs)(o.A,{wrap:!0,children:[(0,R.jsx)(G,{format:"YYYY-MM-DD",onChange:e=>{return l=e,void t((0,p.Ok)({activeMenu:de,data:{...pe,date_from:l?E()(null===l||void 0===l?void 0:l[0]).format("YYYY-MM-DD").toString():void 0,date_to:l?E()(null===l||void 0===l?void 0:l[1]).format("YYYY-MM-DD").toString():void 0}}));var l}}),(0,R.jsx)(I.A,{type:"danger",onClick:()=>{null===ie||0===ie.length?$.oR.warning(T("select.the.product")):(ne(!0),ce(!1))},children:T("delete.all")}),(0,R.jsx)(i.A,{onClick:()=>{ae(!0),D.A.export({type:"delivery",deliveryman:W,date_from:null===pe||void 0===pe?void 0:pe.date_from,date_to:null===pe||void 0===pe?void 0:pe.date_to,status:"all"===(null===pe||void 0===pe?void 0:pe.status)||null===pe||void 0===pe?void 0:pe.status}).then((e=>{const l=B.bb+e.data.file_name;window.location.href=l})).finally((()=>ae(!1)))},loading:se,children:T("export")}),(0,R.jsx)(S.A,{setColumns:te,columns:le})]}),children:[(0,R.jsx)("div",{className:"mt-2 mb-4",children:(0,R.jsx)(k.A,{placeholder:T("search"),width:480,handleChange:e=>{return l=e,n="search",void t((0,p.Ok)({activeMenu:de,data:{...pe,[n]:l}}));var l,n},defaultValue:null===(e=de.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(l=de.data)&&void 0!==l&&l.search)})}),(0,R.jsx)(a.A,{onChange:e=>{const l=e;t((0,p.Ok)({activeMenu:de,data:{...pe,status:l}}))},type:"card",activeKey:null===pe||void 0===pe?void 0:pe.status,children:ee.map((e=>(0,R.jsx)(V,{tab:T(e.name)},e.name)))}),(0,R.jsx)(u.A,{scroll:{x:!0},rowSelection:fe,columns:null===le||void 0===le?void 0:le.filter((e=>e.is_show)),dataSource:xe,loading:me,pagination:{pageSize:je.perPage,page:je.page,total:he.total,defaultCurrent:je.page},rowKey:e=>e.id,onChange:function(e,l,n){const{pageSize:s,current:a}=e,{field:d,order:i}=n,o=(0,_.A)(i);t((0,p.Ok)({activeMenu:de,data:{...de.data,perPage:s,page:a,column:d,sort:o}}))}}),Z&&(0,R.jsx)(C.A,{orderDetails:Z,handleCancel:ye,status:ee}),Q&&(0,R.jsx)(w.A,{orderDetails:Q,handleCancel:ye}),q&&(0,R.jsx)(M.A,{id:q,handleCancel:ye}),J&&(0,R.jsx)(Y.A,{id:J,handleCancel:ye}),(0,R.jsx)(P.A,{click:()=>{ve(!0);const e={...Object.assign({},...ie.map(((e,l)=>({[`ids[${l}]`]:e}))))};D.A.delete(e).then((()=>{$.oR.success(T("successfully.deleted")),ne(!1),t((0,g.Gb)()),ce(null),oe(null)})).finally((()=>ve(!1)))},text:T(re?"delete":"all.delete"),loading:ue,setText:oe})]})]})}},69091:(e,l,t)=>{t.d(l,{A:()=>c});t(9950);var n=t(87094),s=t(41988),a=t(91854),d=t(70030),i=t(74704),o=t(89627),r=t(44414);const c=e=>{let{data:l}=e;const{t:t}=(0,d.B)(),{defaultCurrency:c}=(0,a.d4)((e=>e.currency),a.bN);return(0,r.jsxs)(n.A,{gutter:16,className:"mt-3",children:[(0,r.jsx)(s.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("all.orders"),value:null===l||void 0===l?void 0:l.orders_count})}),(0,r.jsx)(s.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("ready.orders"),value:null===l||void 0===l?void 0:l.ready_orders_count})}),(0,r.jsx)(s.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("on.a.way.orders"),value:null===l||void 0===l?void 0:l.on_a_way_orders_count})}),(0,r.jsx)(s.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("cancelled.orders"),value:null===l||void 0===l?void 0:l.cancel_orders_count})}),(0,r.jsx)(s.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("delivered.orders"),value:null===l||void 0===l?void 0:l.delivered_orders_count})}),(0,r.jsx)(s.A,{flex:"0 0 16.6%",children:(0,r.jsx)(i.A,{title:t("total.price"),value:(0,o.r)(null===l||void 0===l?void 0:l.total_price,null===c||void 0===c?void 0:c.symbol)})})]})}},74704:(e,l,t)=>{t.d(l,{A:()=>a});t(9950);var n=t(23263),s=t(44414);function a(e){let{title:l="Orders",value:t=0,color:a="grey",onClick:d}=e;return(0,s.jsx)(n.A,{className:"statistics-card",hoverable:!!d,onClick:d,children:(0,s.jsxs)("div",{className:"card-wrapper",children:[(0,s.jsx)("div",{className:"space"}),(0,s.jsx)("div",{className:"content",children:(0,s.jsx)("h1",{className:"number",children:t})}),(0,s.jsx)("span",{className:`highlighter ${a}`}),l&&(0,s.jsx)("h4",{className:"title",children:l})]})})}},89627:(e,l,t)=>{function n(e,l){var t=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(l){return e>=l.value}));return t?"$"+(e/t.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+t.symbol:"0"}t.d(l,{r:()=>n})}}]);