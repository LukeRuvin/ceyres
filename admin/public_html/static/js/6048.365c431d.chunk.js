"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6048],{16048:(e,l,a)=>{a.r(l),a.d(l,{default:()=>w});var i=a(9950),t=a(28429),s=a(85923),n=a(55902),d=a(59233),r=a(23263),o=a(87094),c=a(41988),u=a(48538),m=a(90650),g=a(91854),p=a(74623),v=a(11933),f=a(70030),h=a(71999),x=a(31281),A=a(35242),j=a(32599),$=a(62466),y=a(44414);const b=n.A.TextArea,w=()=>{var e;const{t:l}=(0,f.B)(),{activeMenu:a}=(0,g.d4)((e=>e.menu),g.bN),w=(0,g.wA)(),[I]=d.A.useForm(),k=(0,t.Zp)(),[q,N]=(0,i.useState)(!1),[E,B]=(0,i.useState)(!1),{languages:F,defaultLang:O}=(0,g.d4)((e=>e.formLang),g.bN),{id:S}=(0,t.g)(),[V,z]=(0,i.useState)(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.img),[L,C]=(0,i.useState)(null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data["features[0].img"],null===a||void 0===a?void 0:a.data["features[1].img"],null===a||void 0===a?void 0:a.data["features[2].img"]]:["","",""]);function M(e){if(!e)return{};const l={},a={};return F.forEach((i=>{l[`title[${i.locale}]`]=e.title.hasOwnProperty(i.locale)?e.title[i.locale]:void 0,a[`description[${i.locale}]`]=e.description.hasOwnProperty(i.locale)?e.description[i.locale]:void 0})),{...l,...a}}(0,i.useEffect)((()=>()=>{const e=I.getFieldsValue(!0);w((0,p.Ok)({activeMenu:a,data:e}))}),[]);return(0,i.useEffect)((()=>{var e;a.refetch&&(e=S,N(!0),A.A.getById(e).then((e=>{var l,a,i,t,s;let{data:n}=e;const d={...M(null===n||void 0===n?void 0:n.data),features:null===n||void 0===n||null===(l=n.data)||void 0===l||null===(a=l.features)||void 0===a?void 0:a.map((e=>({...M(e)})))};I.setFieldsValue(d),z((0,$.A)(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.img)),C(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(s=t.features)||void 0===s?void 0:s.map((e=>(0,$.A)(e.img))))})).finally((()=>{w((0,p.km)(a)),N(!1)})))}),[a.refetch]),(0,y.jsx)(r.A,{title:l("edit.landing.page"),className:"h-100",extra:(0,y.jsx)(h.A,{}),children:q?(0,y.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,y.jsx)(m.A,{size:"large",className:"py-5"})}):(0,y.jsxs)(d.A,{name:"landing-page-edit",layout:"vertical",onFinish:e=>{B(!0);const i={title:(0,x.A)(F,e,"title"),description:(0,x.A)(F,e,"description"),img:null===V||void 0===V?void 0:V.name,features:e.features.map(((e,l)=>{var a;return{img:null===(a=L[l])||void 0===a?void 0:a.name,title:(0,x.A)(F,e,"title"),description:(0,x.A)(F,e,"description")}}))};A.A.update(S,{data:i,type:"welcome"}).then((()=>{const e="settings/landing-page";s.oR.success(l("successfully.created")),w((0,p.EK)({...a,nextUrl:e})),k(`/${e}`),w((0,v.E)())})).finally((()=>B(!1)))},form:I,initialValues:{features:["","",""],...a.data},className:"d-flex flex-column h-100",children:[(0,y.jsxs)(o.A,{gutter:12,children:[(0,y.jsxs)(c.A,{span:12,children:[F.map((e=>(0,y.jsx)(d.A.Item,{label:`${l("title")} (${e.locale})`,name:`title[${e.locale}]`,rules:[{required:e.locale===O,message:l("required")}],hidden:e.locale!==O,children:(0,y.jsx)(n.A,{})},"title"+e.locale))),F.map((e=>(0,y.jsx)(d.A.Item,{label:`${l("description")} (${e.locale})`,name:`description[${e.locale}]`,rules:[{required:e.locale===O,message:l("required")}],hidden:e.locale!==O,children:(0,y.jsx)(b,{rows:3})},"description"+e.locale)))]}),(0,y.jsx)(c.A,{span:12,children:(0,y.jsx)(d.A.Item,{label:l("background.image"),children:(0,y.jsx)(j.A,{type:"languages",image:V,setImage:z,form:I,name:"img"})})})]}),(0,y.jsx)(r.A,{title:l("features"),children:(0,y.jsx)(d.A.List,{name:"features",children:e=>(0,y.jsx)("div",{children:e.map(((e,a)=>(0,y.jsxs)(o.A,{gutter:12,align:"middle",style:{borderBottom:"1px solid var(--grey)",marginBottom:24,borderWidth:2===a?0:1},children:[(0,y.jsxs)(c.A,{span:20,children:[F.map((e=>(0,y.jsx)(d.A.Item,{label:`${l("title")} (${e.locale})`,name:[a,`title[${e.locale}]`],rules:[{required:e.locale===O,message:l("required")}],hidden:e.locale!==O,children:(0,y.jsx)(n.A,{})},"title"+e.locale))),F.map((e=>(0,y.jsx)(d.A.Item,{label:`${l("description")} (${e.locale})`,name:[a,`description[${e.locale}]`],rules:[{required:e.locale===O,message:l("required")}],hidden:e.locale!==O,children:(0,y.jsx)(b,{rows:3})},"description"+e.locale)))]}),(0,y.jsx)(c.A,{span:4,children:(0,y.jsx)(d.A.Item,{label:l("media"),children:(0,y.jsx)(j.A,{type:"languages",isVideo:!0,image:L[a],setImage:e=>((e,l)=>{const a=[...L];a[l]=e,C(a)})(e,a),form:I,name:`features[${a}].img`})})})]},e.key)))})})}),(0,y.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,y.jsx)("div",{className:"pb-5",children:(0,y.jsx)(u.A,{type:"primary",htmlType:"submit",loading:E,children:l("submit")})})})]})})}},31281:(e,l,a)=>{function i(e,l){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const i=e.map((e=>({[e.locale]:""===l[`${a}[${e.locale}]`]?void 0:l[`${a}[${e.locale}]`]})));return Object.assign({},...i)}a.d(l,{A:()=>i})}}]);