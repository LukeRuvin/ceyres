"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9492],{19492:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(9950),l=t(28429),n=t(85923),i=t(59233),r=t(23263),u=t(87094),o=t(41988),c=t(48538),d=t(91854),m=t(74623),h=t(67231),p=t(47992),f=t(70030),x=t(40337),A=t(74115),b=t(48970),g=t(44414);const j=()=>{var e,s;const{t:t}=(0,f.B)(),{activeMenu:j}=(0,d.d4)((e=>e.menu),d.bN),v=(0,d.wA)(),[y]=i.A.useForm(),S=(0,l.Zp)(),{myShop:w}=(0,d.d4)((e=>e.myShop),d.bN),[C,N]=(0,a.useState)(null!==(e=j.data)&&void 0!==e&&e.images?[null===(s=j.data)||void 0===s?void 0:s.images[0]]:[]),[O,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>()=>{const e=y.getFieldsValue(!0);v((0,m.Ok)({activeMenu:j,data:e}))}),[]);return(0,g.jsx)(r.A,{title:t("add.story"),className:"h-100",children:(0,g.jsxs)(i.A,{name:"story-add",layout:"vertical",onFinish:e=>{const s={...Object.assign({},...C.map(((e,s)=>({[`file_urls[${s}]`]:e.name})))),product_id:e.products.value};k(!0);const a="seller/stories";x.A.create(s).then((()=>{const e={shop_id:w.id};n.oR.success(t("successfully.created")),(0,d.vA)((()=>{v((0,m.EK)({...j,nextUrl:a})),v((0,A.I$)(e))})),S(`/${a}`)})).finally((()=>k(!1)))},form:y,initialValues:{active:!0,...j.data},className:"d-flex flex-column h-100",children:[(0,g.jsxs)(u.A,{gutter:12,children:[(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(i.A.Item,{label:t("products"),name:"products",rules:[{required:!1,message:t("required")}],children:(0,g.jsx)(p.G,{fetchOptions:function(e){const s={search:e,shop_id:w.id,status:"published",active:1,rest:1};return h.A.getAll(s).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id})))))},debounceTimeout:200})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(i.A.Item,{label:t("image"),name:"image",rules:[{required:0===C.length,message:t("required")}],children:(0,g.jsx)(b.A,{type:"banners",imageList:C,setImageList:N,form:y,multiple:!1})})})]}),(0,g.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,g.jsx)("div",{className:"pb-5",children:(0,g.jsx)(c.A,{type:"primary",htmlType:"submit",loading:O,children:t("submit")})})})]})})}},47992:(e,s,t)=>{t.d(s,{G:()=>o});var a=t(9950),l=t(95491),n=t.n(l),i=t(99674),r=t(90650),u=t(44414);const o=e=>{let{fetchOptions:s,debounceTimeout:t=400,onClear:l,refetchOptions:o=!1,...c}=e;const[d,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)([]),f=(0,a.useMemo)((()=>n()((e=>{p([]),m(!0),s(e).then((e=>{p(e),m(!1)}))}),t)),[s,t]);return(0,u.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:f,onClear:()=>{f(""),l&&l()},notFoundContent:d?(0,u.jsx)(r.A,{size:"small"}):"no results",...c,options:h,onFocus:()=>{h.length&&!o||f("")}})}}}]);