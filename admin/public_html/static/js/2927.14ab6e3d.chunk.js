"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2927],{2654:(e,l,t)=>{t.d(l,{T:()=>n,b:()=>i});const i=["new","accepted","canceled"],n=[{value:1,label:"male"},{value:2,label:"female"},{value:3,label:"all"}]},8297:(e,l,t)=>{t.d(l,{A:()=>r});var i=t(9950),n=t(55902),s=t(41397),a=t(60767),o=t(44414);function r(e){let{handleChange:l,defaultValue:t,resetSearch:r,...d}=e;const[u,c]=(0,i.useState)(t),v=(0,i.useMemo)((()=>(0,s.debounce)((e=>{l(e)}),800)),[]);return(0,i.useEffect)((()=>{c(t)}),[r]),(0,o.jsx)(n.A,{value:u,onChange:e=>{c(e.target.value),v(e.target.value)},prefix:(0,o.jsx)(a.A,{}),...d})}},22927:(e,l,t)=>{t.r(l),t.d(l,{default:()=>R});var i=t(9950),n=t(72243),s=t(80737),a=t(12916),o=t(48538),r=t(23263),d=t(52913),u=t(70030),c=t(98178),v=t(91854),h=t(88986),p=t(28429),g=t(5478),x=t(74623),m=t(24513),A=t(44070),j=t(12598),y=t(47992),f=t(8297),b=t(44414);const w=e=>{let{filters:l,setFilters:t}=e;const{t:i}=(0,u.B)();return(0,b.jsxs)(s.A,{wrap:!0,children:[(0,b.jsx)(f.A,{placeholder:i("search"),className:"w-200px",onChange:e=>{var i;return t({...l,search:null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value})}}),(0,b.jsx)(y.G,{fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const l={type:"service",perPage:10,page:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return j.A.getAll(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},className:"w-200px",placeholder:i("select.category"),onChange:e=>t({...l,category:e})})]})};var C=t(59233),k=t(82706),S=t(41988),_=t(99674),I=t(98591);const F=e=>{let{statuses:l,visible:t,data:n,handleSubmit:s,handleCancel:a}=e;const{t:r}=(0,u.B)(),[d]=C.A.useForm(),[c,v]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null===n||void 0===n?void 0:n.status);return(0,b.jsx)(k.A,{title:r("change.status"),visible:t,onCancel:a,footer:[(0,b.jsx)(o.A,{type:"primary",onClick:()=>d.submit(),loading:c,children:r("save")}),(0,b.jsx)(o.A,{type:"default",onClick:a,children:r("cancel")})],children:(0,b.jsxs)(C.A,{form:d,onFinish:e=>{v(!0);const l={status:null===e||void 0===e?void 0:e.status,id:null===n||void 0===n?void 0:n.id,status_note:null===e||void 0===e?void 0:e.status_note};s(l).finally((()=>{v(!1),a()}))},layout:"vertical",initialValues:{status:null===n||void 0===n?void 0:n.status},children:[(0,b.jsx)(S.A,{span:24,children:(0,b.jsx)(C.A.Item,{label:r("status"),name:"status",rules:[{required:!0,message:r("please.select.status")}],children:(0,b.jsx)(_.A,{onChange:e=>p(e),children:l.map(((e,l)=>(0,b.jsx)(_.A.Option,{value:e,children:r(e)},e+l)))})})}),h===l[2]&&(0,b.jsx)(S.A,{span:24,children:(0,b.jsx)(C.A.Item,{label:r("status.note"),name:"status_note",rules:[{required:h===l[2],message:r("required")}],children:(0,b.jsx)(I.A,{rows:2})})})]})})};var O=t(55386),K=t(76083),N=t(85923),$=t(2654),z=t(63620),T=t(87094),B=t(62466);const E=e=>{let{visible:l,handleClose:t,handleSubmit:n}=e;const{t:s}=(0,u.B)(),[a]=C.A.useForm(),[r,d]=(0,i.useState)([]),{languages:h}=(0,v.d4)((e=>e.formLang),v.bN);function p(e){if(!e)return{};const{translations:l}=e,t=h.map((e=>{var t,i;return{[`title[${e.locale}]`]:null===l||void 0===l||null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,[`description[${e.locale}]`]:null===l||void 0===l||null===(i=l.find((l=>l.locale===e.locale)))||void 0===i?void 0:i.description}}));return Object.assign({},...t)}return(0,b.jsx)(k.A,{visible:l,title:s("all.services"),onCancel:t,footer:[(0,b.jsx)(o.A,{type:"primary",onClick:()=>a.submit(),children:s("next")}),(0,b.jsx)(o.A,{type:"default",onClick:t,children:s("cancel")})],children:(0,b.jsx)(C.A,{form:a,onFinish:e=>{var l,t,i,s,a,o;if(null===e||void 0===e||!e.service)return n();const d=null===e||void 0===e||null===(l=e.service)||void 0===l?void 0:l.value,u=null===r||void 0===r||null===(t=r.filter((e=>(null===e||void 0===e?void 0:e.id)===d)))||void 0===t?void 0:t[0],c={...u,...p(u),commission_fee:(null===u||void 0===u?void 0:u.commission_fee)||0,image:[(0,B.A)(u.img)],category:{label:null===u||void 0===u||null===(i=u.category)||void 0===i||null===(s=i.translation)||void 0===s?void 0:s.title,value:null===u||void 0===u||null===(a=u.category)||void 0===a?void 0:a.id,key:null===u||void 0===u||null===(o=u.category)||void 0===o?void 0:o.id}};n(c)},layout:"vertical",children:(0,b.jsx)(T.A,{gutter:12,children:(0,b.jsx)(S.A,{span:24,children:(0,b.jsx)(C.A.Item,{name:"service",label:s("services"),children:(0,b.jsx)(y.G,{fetchOptions:async e=>{const l={search:e,perPage:10,page:1,empty_shop:1};return null!==e&&void 0!==e&&e.trim().length||delete l.search,await c.A.getAll(l).then((e=>{let{data:l}=e;return d(l),null===l||void 0===l?void 0:l.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})})})})})},M=["blue","red","gold","volcano","cyan","lime"],R=()=>{var e,l;const{t:t}=(0,u.B)(),j=(0,p.Zp)(),y=(0,v.wA)(),{services:f,loading:C,meta:k,params:S}=(0,v.d4)((e=>e.servicesSlice),v.bN),{activeMenu:_}=(0,v.d4)((e=>e.menu),v.bN),{setIsModalVisible:I}=(0,i.useContext)(O.o),[T,B]=(0,i.useState)(null),[R,V]=(0,i.useState)(null),[q,G]=(0,i.useState)(null),[P,X]=(0,i.useState)({search:"",category:{}}),[L,Z]=(0,i.useState)(P),[D,H]=(0,i.useState)(!1),[J,Q]=(0,i.useState)(!1),U={...S,search:null===P||void 0===P?void 0:P.search,category_id:null===P||void 0===P||null===(e=P.category)||void 0===e?void 0:e.value};null!==P&&void 0!==P&&null!==(l=P.search)&&void 0!==l&&l.length||null===U||void 0===U||delete U.search;const W={selectedRowKeys:T,onChange:e=>{B(e)}},Y=[{title:t("id"),dataIndex:"id",is_show:!0,key:"id"},{title:t("image"),dataIndex:"img",is_show:!1,render:e=>(0,b.jsx)(n.A,{width:100,src:e?z.sE+e:"https://via.placeholder.com/150",placeholder:!0,style:{borderRadius:4}})},{title:t("title"),dataIndex:"slug",is_show:!0,key:"translation",render:(e,l)=>{var t;return null===l||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title}},{title:t("translations"),dataIndex:"translations",is_show:!1,key:"translations",render:(e,l)=>{var t;return(0,b.jsx)(s.A,{children:null===(t=l.locales)||void 0===t?void 0:t.map(((e,l)=>(0,b.jsx)(a.A,{className:"text-uppercase",color:[M[l]],children:e})))})}},{title:t("status"),dataIndex:"status",key:"status",is_show:!0,render:(e,l)=>(0,b.jsxs)(s.A,{wrap:!0,children:["new"===e?(0,b.jsx)(a.A,{color:"blue",children:t(e)}):"canceled"===e?(0,b.jsx)(a.A,{color:"error",children:t(e)}):(0,b.jsx)(a.A,{color:"cyan",children:t(e)}),(0,b.jsx)(m.A,{onClick:()=>G(l)})]})},{title:t("interval"),dataIndex:"interval",key:"interval",is_show:!0},{title:t("type"),dataIndex:"type",key:"type",is_show:!0},{title:t("category"),dataIndex:"category",key:"category",is_show:!0,render:(e,l)=>{var t,i;return null===l||void 0===l||null===(t=l.category)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title}},{title:t("options"),is_show:!0,key:"options",render:(e,l)=>(0,b.jsxs)(s.A,{wrap:!0,children:[(0,b.jsx)(o.A,{type:"primary",icon:(0,b.jsx)(m.A,{}),onClick:()=>ee(null===l||void 0===l?void 0:l.id)}),(0,b.jsx)(o.A,{icon:(0,b.jsx)(A.A,{}),onClick:()=>{B([null===l||void 0===l?void 0:l.id]),I(!0),V(!0)}})]})}];(0,i.useEffect)((()=>{_.refetch&&(0,v.vA)((()=>{y((0,g.K4)(U)),y((0,x.km)(_))}))}),[_.refetch]),(0,i.useEffect)((()=>{const e=setTimeout((()=>{Z(P)}),400);return()=>{clearTimeout(e)}}),[P,400]),(0,h.A)((()=>{y((0,g.K4)(U))}),[L]);const ee=e=>{const l=`seller/services/${e}`;y((0,x.X4)({id:"edit.service",url:l,name:t("edit.service")})),j(`/${l}`,{state:{params:U}})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.A,{children:(0,b.jsxs)(s.A,{wrap:!0,children:[(0,b.jsx)(w,{filters:P,setFilters:X}),(0,b.jsx)(o.A,{onClick:()=>{null===T||0===T.length?N.oR.warning(t("select.the.product")):(I(!0),V(!1))},children:t("delete.selected")}),(0,b.jsx)(o.A,{type:"primary",onClick:()=>Q(!0),children:t("add.service")})]})}),(0,b.jsx)(r.A,{children:(0,b.jsx)(d.A,{scroll:{x:!0},rowSelection:W,columns:null===Y||void 0===Y?void 0:Y.filter((e=>e.is_show)),rowKey:e=>null===e||void 0===e?void 0:e.id,dataSource:f,loading:C,pagination:{pageSize:(null===k||void 0===k?void 0:k.per_page)||10,page:k.current_page||1,total:k.total||0,current:(null===k||void 0===k?void 0:k.current_page)||1},onChange:e=>{const{pageSize:l,current:t}=e,i={...U,perPage:l,page:t};y((0,g.K4)(i))}})}),q&&(0,b.jsx)(F,{statuses:$.b,data:q,visible:q,handleSubmit:e=>{var l;const t={category_id:null===e||void 0===e||null===(l=e.category)||void 0===l?void 0:l.id,status:null===e||void 0===e?void 0:e.status,status_note:null===e||void 0===e?void 0:e.status_note};return c.A.statusChange(null===e||void 0===e?void 0:e.id,t).then((()=>y((0,g.K4)(U))))},handleCancel:()=>G(null)}),J&&(0,b.jsx)(E,{visible:J,handleClose:()=>Q(!1),handleSubmit:e=>(e=>{const l="seller/services/add";y((0,x.X4)({id:"create.service",url:l,name:t("add.service"),data:e})),j(`/${l}`,{state:{params:U,selectedService:e}})})(e)}),(0,b.jsx)(K.A,{click:()=>{H(!0);const e={...Object.assign({},...T.map(((e,l)=>({[`ids[${l}]`]:e}))))};c.A.delete(e).then((()=>{N.oR.success(t("successfully.deleted")),B(null),I(!1),V(!1),y((0,g.K4)(U))})).finally((()=>H(!1)))},text:t(R?"delete":"all.delete"),setText:B,loading:D})]})}},47992:(e,l,t)=>{t.d(l,{G:()=>d});var i=t(9950),n=t(95491),s=t.n(n),a=t(99674),o=t(90650),r=t(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:n,refetchOptions:d=!1,...u}=e;const[c,v]=(0,i.useState)(!1),[h,p]=(0,i.useState)([]),g=(0,i.useMemo)((()=>s()((e=>{p([]),v(!0),l(e).then((e=>{p(e),v(!1)}))}),t)),[l,t]);return(0,r.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:g,onClear:()=>{g(""),n&&n()},notFoundContent:c?(0,r.jsx)(o.A,{size:"small"}):"no results",...u,options:h,onFocus:()=>{h.length&&!d||g("")}})}}}]);