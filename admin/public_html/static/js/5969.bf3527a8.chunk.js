"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5969],{55969:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var l=s(9950),a=s(28429),i=s(85923),n=s(59233),c=s(23263),r=s(87094),d=s(41988),u=s(55902),o=s(99674),m=s(25933),h=s(48538),f=s(90650),x=s(91854),j=s(74623),A=s(63010),p=s(60150),v=s(71999),g=s(70030),b=s(44414);function y(){const{t:e}=(0,g.B)(),{activeMenu:t}=(0,x.d4)((e=>e.menu),x.bN),{id:s}=(0,a.g)(),y=(0,x.wA)(),[k]=n.A.useForm(),N=(0,a.Zp)(),[q,F]=(0,l.useState)(!1),[I,O]=(0,l.useState)(!1),{defaultLang:w,languages:z}=(0,x.d4)((e=>e.formLang),x.bN);(0,l.useEffect)((()=>()=>{const e=k.getFieldsValue(!0);y((0,j.Ok)({activeMenu:t,data:e}))}),[]);const E=e=>{F(!0),A.A.getById(e).then((e=>{let{data:t}=e;const s=function(e){if(!e)return{};const{translations:t}=e,s=z.map((e=>{var s;return{[`title[${e.locale}]`]:null===(s=t.find((t=>t.locale===e.locale)))||void 0===s?void 0:s.title}}));return Object.assign({},...s)}(t);k.setFieldsValue({...t,...s})})).finally((()=>{F(!1),y((0,j.km)(t))}))};return(0,l.useEffect)((()=>{t.refetch&&E(s)}),[t.refetch]),(0,b.jsx)(c.A,{title:e("edit.unit"),extra:(0,b.jsx)(v.A,{}),children:q?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(f.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(n.A,{name:"basic",layout:"vertical",onFinish:l=>{const a={...l,active:l.active?1:0};O(!0);const n="catalog/units";A.A.update(s,a).then((()=>{i.oR.success(e("successfully.updated")),y((0,j.EK)({...t,nextUrl:n})),N(`/${n}`),y((0,p.Q)())})).finally((()=>O(!1)))},form:k,initialValues:{...t.data},children:[(0,b.jsxs)(r.A,{gutter:12,children:[(0,b.jsx)(d.A,{span:12,children:z.map(((t,s)=>(0,b.jsx)(n.A.Item,{label:e("title"),name:`title[${t.locale}]`,rules:[{required:t.locale===w,message:e("required")}],hidden:t.locale!==w,children:(0,b.jsx)(u.A,{})},"title"+s)))}),(0,b.jsx)(d.A,{span:12,children:(0,b.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,b.jsx)(n.A.Item,{label:e("position"),name:"position",rules:[{required:!0,message:e("required")}],children:(0,b.jsxs)(o.A,{children:[(0,b.jsx)(o.A.Option,{value:"after",children:e("after")}),(0,b.jsx)(o.A.Option,{value:"before",children:e("before")})]})})})}),(0,b.jsx)(d.A,{span:6,children:(0,b.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,b.jsx)(n.A.Item,{label:e("active"),name:"active",valuePropName:"checked",children:(0,b.jsx)(m.A,{})})})})]}),(0,b.jsx)(h.A,{type:"primary",htmlType:"submit",loading:I,children:e("submit")})]})})}}}]);