"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7998],{12158:(e,l,i)=>{i.d(l,{A:()=>d});var s=i(59051),n=i.n(s),a=i(70030);function d(e){const{t:l}=(0,a.B)();let i=n()(),s=n()(e),d=i.diff(s,"hours"),t=i.diff(s,"minutes");return d>23?n()(e).format("Do MMM, H:mm"):d>0?d+" "+l("hours.ago"):t+" "+l("minutes.ago")}},29597:(e,l,i)=>{function s(e){var l;if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const i=null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.split(", ");return{lat:Number(null===i||void 0===i?void 0:i[0]),lng:Number(null===i||void 0===i?void 0:i[1])}}i.d(l,{A:()=>s})},73737:(e,l,i)=>{i.d(l,{A:()=>t});i(9950);var s=i(69286),n=i(91854),a=i(63620),d=i(44414);function t(e){let{center:l,handleLoadMap:i,children:t}=e;const{google_map_key:o}=(0,n.d4)((e=>e.globalSettings.settings),n.bN);return(0,d.jsx)(s.Ay,{bootstrapURLKeys:{key:o||a.CJ},defaultZoom:12,defaultCenter:l,options:{fullscreenControl:!1},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{let{map:l,maps:s}=e;return i(l,s)},children:t})}},77998:(e,l,i)=>{i.r(l),i.d(l,{default:()=>E});var s=i(9950),n=i(98252),a=i(23263),d=i(99674),t=i(87094),o=i(41988),r=i(70030),v=i(91854),u=i(29597),c=i(63620),m=i(76372),h=i(74623),x=i(81446),j=i(88986),g=i(94118),p=i(29633),y=i(89627),_=i(12158),A=i(44414);const b=e=>{var l;let{data:i,handleClose:s}=e;const{t:a}=(0,r.B)(),d=(0,_.A)(null===i||void 0===i||null===(l=i.delivery_man_setting)||void 0===l?void 0:l.updated_at),v=null===i||void 0===i?void 0:i.assign_reviews_avg_rating,u=null===i||void 0===i?void 0:i.phone,m=null===i||void 0===i?void 0:i.delivery_man_orders_count,h=null===i||void 0===i?void 0:i.delivery_man_orders_sum_total_price;return(0,A.jsxs)(t.A,{gutter:12,align:"middle",children:[(0,A.jsx)(o.A,{span:7,children:(0,A.jsxs)("div",{className:"d-flex align-items-center",children:[(0,A.jsx)(n.A,{src:c.sE+(null===i||void 0===i?void 0:i.img)}),(0,A.jsxs)("div",{className:"ml-2",children:[(0,A.jsx)("div",{className:"title",children:(null===i||void 0===i?void 0:i.firstname)+" "+(null===i||void 0===i?void 0:i.lastname)}),(0,A.jsx)(p.A,{disabled:!0,allowHalf:!0,value:v||0})]})]})}),(0,A.jsxs)(o.A,{span:4,children:[(0,A.jsx)("div",{className:"title",children:u}),(0,A.jsx)("div",{className:"label",children:a("phone")})]}),(0,A.jsxs)(o.A,{span:4,children:[(0,A.jsx)("div",{className:"title",children:d}),(0,A.jsx)("div",{className:"label",children:a("last.activity")})]}),(0,A.jsxs)(o.A,{span:4,children:[(0,A.jsx)("div",{className:"title",children:m}),(0,A.jsx)("div",{className:"label",children:a("total.orders")})]}),(0,A.jsxs)(o.A,{span:4,children:[(0,A.jsx)("div",{className:"title",children:(0,y.r)(h)}),(0,A.jsxs)("div",{className:"label",children:[" ",a("total.earning")]})]}),(0,A.jsx)(o.A,{span:1,children:(0,A.jsx)("button",{type:"button",className:"close-btn",onClick:s,children:(0,A.jsx)(g.A,{})})})]})};var f=i(80737),N=i(28429),k=i(79378);function w(e){var l,i,s,d;let{data:t}=e;const{t:o}=(0,r.B)(),u=(0,N.Zp)(),m=(0,v.wA)(),{menuItems:x}=(0,v.d4)((e=>e.menu),v.bN),j=(null===t||void 0===t?void 0:t.deliveryman_orders)||[],g=(0,_.A)(null===t||void 0===t||null===(l=t.delivery_man_setting)||void 0===l?void 0:l.updated_at);return(0,A.jsxs)(a.A,{className:"user-card",onClick:()=>(e=>{!!x.find((e=>"delivery_map_orders"===e.id))&&m((0,h.EK)({id:"delivery_map_orders",nextUrl:"deliveries/map"})),m((0,h.X4)({url:`deliveries/map/${e.id}`,id:"delivery_map_orders",name:o("delivery.orders"),data:{list:j,item:j[0],deliveryman:t}})),u(`/deliveries/map/${e.id}`)})(t),children:[(0,A.jsxs)(f.A,{children:[(0,A.jsx)(n.A,{src:c.sE+(null===t||void 0===t?void 0:t.img),icon:(0,A.jsx)(k.A,{}),style:{color:"#1a3353"}}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("h4",{className:"title",children:[null===t||void 0===t?void 0:t.firstname," ",null===t||void 0===t||null===(i=t.lastname)||void 0===i?void 0:i.charAt(0),"."]}),(0,A.jsx)("div",{className:"last-seen "+(null!==t&&void 0!==t&&null!==(s=t.delivery_man_setting)&&void 0!==s&&s.online?"online":"text-muted"),children:null!==t&&void 0!==t&&null!==(d=t.delivery_man_setting)&&void 0!==d&&d.online?o("online"):g})]})]}),(0,A.jsx)("div",{className:"mt-2"}),(0,A.jsxs)(f.A,{children:[(0,A.jsxs)("div",{children:[o("active_orders"),":"]}),(0,A.jsx)("div",{children:j.length})]})]})}var C=i(73737);const M=[{label:"All",value:"all",key:1},{label:"Online",value:"1",key:2},{label:"Offline",value:"0",key:3}],B=e=>(0,A.jsx)(n.A,{src:e.url,icon:(0,A.jsx)(k.A,{}),style:{color:"#1a3353"},onClick:e.onClick});function E(){const{t:e}=(0,r.B)(),{activeMenu:l}=(0,v.d4)((e=>e.menu),v.bN),i=(0,v.wA)(),[n,g]=(0,s.useState)(void 0),[p,y]=(0,s.useState)(null),{settings:_}=(0,v.d4)((e=>e.globalSettings),v.bN),f=(0,u.A)(_),{delivery:N,loading:k}=(0,v.d4)((e=>e.deliveries),v.bN);(0,j.A)((()=>{const e={page:1,perPage:100,online:"all"===n?void 0:n,"statuses[0]":"new","statuses[1]":"accepted","statuses[2]":"ready","statuses[3]":"on_a_way"};i((0,m.N)(e))}),[n]);return(0,s.useEffect)((()=>{null!==l&&void 0!==l&&l.refetch&&(i((0,m.N)({perPage:100,"statuses[0]":"new","statuses[1]":"accepted","statuses[2]":"ready","statuses[3]":"on_a_way"})),i((0,h.km)(l)))}),[null===l||void 0===l?void 0:l.refetch]),(0,A.jsx)(a.A,{title:e("deliveries"),className:"delivery",extra:(0,A.jsx)(d.A,{options:M,defaultValue:"all",loading:k,onChange:e=>g(e),style:{width:"200px"}}),children:k?(0,A.jsx)(x.A,{}):(0,A.jsxs)(t.A,{gutter:8,children:[(0,A.jsx)(o.A,{span:18,children:(0,A.jsxs)("div",{className:"map-container",style:{height:"73vh",width:"100%"},children:[!!p&&(0,A.jsx)(a.A,{className:"map-user-card",children:(0,A.jsx)(b,{data:p,handleClose:()=>{y(null)}})}),(0,A.jsx)(C.A,{center:f,handleLoadMap:(e,l)=>{const i=N.map((e=>{var l,i;return{lat:Number((null===e||void 0===e||null===(l=e.delivery_man_setting)||void 0===l?void 0:l.location.latitude)||"0"),lng:Number((null===e||void 0===e||null===(i=e.delivery_man_setting)||void 0===i?void 0:i.location.longitude)||"0")}}));let s=new l.LatLngBounds;for(var n=0;n<i.length;n++)s.extend(i[n]);e.fitBounds(s)},children:N.map((e=>{var l,i,s,n;return(0,A.jsx)(B,{lat:Number((null===e||void 0===e||null===(l=e.delivery_man_setting)||void 0===l||null===(i=l.location)||void 0===i?void 0:i.latitude)||"0"),lng:Number((null===e||void 0===e||null===(s=e.delivery_man_setting)||void 0===s||null===(n=s.location)||void 0===n?void 0:n.longitude)||"0"),url:c.sE+e.img,onClick:()=>{y(e)}},e.id)}))})]})}),(0,A.jsx)(o.A,{span:6,children:(0,A.jsx)("div",{className:"order-list",style:{height:"75vh"},children:N.map(((e,l)=>(0,A.jsx)(w,{data:e},e.id+l)))})})]})})}},89627:(e,l,i)=>{function s(e,l){var i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(l){return e>=l.value}));return i?"$"+(e/i.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+i.symbol:"0"}i.d(l,{r:()=>s})}}]);