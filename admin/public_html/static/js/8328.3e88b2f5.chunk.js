"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8328],{18328:(e,t,l)=>{l.r(t),l.d(t,{default:()=>j});var n=l(9950),o=l(91854),i=l(71999),a=l(70030),d=l(86366),v=l(23263),r=l(65820),u=l(74623),c=l(55660),s=l(28429),m=l(81446),p=l(80313),g=l(57980),x=l(12958),_=l(49164),f=l(76662),y=l(91647),k=l(47700),b=l(44414);const{Step:h}=d.A,j=()=>{var e;const{t:t}=(0,a.B)(),{activeMenu:l}=(0,o.d4)((e=>e.menu),o.bN),{products_enabled:j}=(0,o.d4)((e=>e.globalSettings.settings),o.bN),A=(0,r.s)(),S=Number((null===(e=A.values)||void 0===e?void 0:e.step)||0),[C,N]=(0,n.useState)(l.refetch),M=(0,o.wA)(),{uuid:w}=(0,s.g)(),F=(0,n.useMemo)((()=>"1"===j?p.C:p.C.filter((e=>"Product-location-content"!==e.content))),[j]),{languages:O}=(0,o.d4)((e=>e.formLang),o.bN),T=()=>{const e=S+1;A.set("step",e)},$=()=>{const e=S-1;A.set("step",e)},z=e=>({items:e,uid:e,url:e,name:e});function B(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,l=O.map((e=>{var l,n,o;return{[`title[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,[`description[${e.locale}]`]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.description,[`address[${e.locale}]`]:null===(o=t.find((t=>t.locale===e.locale)))||void 0===o?void 0:o.address}}));return Object.assign({},...l)}return(0,n.useEffect)((()=>{l.refetch&&w&&(e=>{N(!0),c.A.getById(e).then((e=>{var n,o,i,a,d,v,r,c,s,m,p,g,x,_,f,y,k,b,h,j;const A={...e.data,...B(null===e||void 0===e?void 0:e.data),logo_img:z(null===(n=e.data)||void 0===n?void 0:n.logo_img),background_img:z(null===(o=e.data)||void 0===o?void 0:o.background_img),delivery_time_from:(null===(i=e.data)||void 0===i||null===(a=i.delivery_time)||void 0===a?void 0:a.from)||0,delivery_time_to:(null===(d=e.data)||void 0===d||null===(v=d.delivery_time)||void 0===v?void 0:v.to)||0,delivery_time_type:null===(r=e.data)||void 0===r||null===(c=r.delivery_time)||void 0===c?void 0:c.type,recommended:"recommended"===(null===(s=e.data)||void 0===s?void 0:s.mark),categories:null===(m=e.data)||void 0===m||null===(p=m.categories)||void 0===p?void 0:p.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})),tags:null===(g=e.data)||void 0===g||null===(x=g.tags)||void 0===x?void 0:x.map((e=>{var t;return{label:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})),price:(null===(_=e.data)||void 0===_?void 0:_.price)||0,price_per_km:(null===(f=e.data)||void 0===f?void 0:f.price_per_km)||0,min_amount:(null===(y=e.data)||void 0===y?void 0:y.min_amount)||0,tax:(null===(k=e.data)||void 0===k?void 0:k.tax)||0,percentage:(null===(b=e.data)||void 0===b?void 0:b.percentage)||0,emailStatuses:null===e||void 0===e||null===(h=e.data)||void 0===h||null===(j=h.email_statuses)||void 0===j?void 0:j.map((e=>({label:t(e),value:e,key:e})))};M((0,u.Ok)({activeMenu:l,data:A}))})).finally((()=>{N(!1),M((0,u.km)(l))}))})(w)}),[l.refetch,S]),(0,b.jsxs)(v.A,{title:t("shop.clone"),extra:(0,b.jsx)(i.A,{}),children:[(0,b.jsx)(d.A,{current:S,onChange:e=>{M((0,u.Ok)({activeMenu:l,data:{...l.data,step:e}})),A.set("step",e)},children:F.map((e=>(0,b.jsx)(h,{title:t(e.title)},e.title)))}),C?(0,b.jsx)(m.A,{}):(0,b.jsxs)("div",{className:"steps-content",children:["First-content"===F[S].content&&(0,b.jsx)(g.A,{next:T,loading:C,action_type:"clone",user:!1}),"Product-location-content"===F[S].content&&(0,b.jsx)(f.A,{next:T,prev:$,locationType:{label:"product",value:1,key:1}}),"Service-location-content"===F[S].content&&(0,b.jsx)(f.A,{next:T,prev:$,locationType:{label:"service",value:2,key:2}}),"Third-content"===F[S].content&&(0,b.jsx)(y.A,{next:T,prev:$}),"Fourth-content"===F[S].content&&(0,b.jsx)(_.A,{next:T,prev:$}),"Shop-gallery-content"===F[S].content&&(0,b.jsx)(k.A,{next:T,prev:$}),"Fifth-content"===F[S].content&&(0,b.jsx)(x.A,{next:T,prev:$})]})]})}}}]);