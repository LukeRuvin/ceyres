"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3557],{3557:(e,l,a)=>{a.r(l),a.d(l,{default:()=>b});var i=a(9950),t=a(28429),s=a(85923),n=a(55902),d=a(59233),r=a(23263),c=a(87094),o=a(41988),u=a(48538),m=a(91854),g=a(74623),p=a(11933),x=a(70030),h=a(71999),A=a(31281),j=a(35242),f=a(32599),v=a(44414);const $=n.A.TextArea,b=()=>{var e;const{t:l}=(0,x.B)(),{activeMenu:a}=(0,m.d4)((e=>e.menu),m.bN),b=(0,m.wA)(),[y]=d.A.useForm(),q=(0,t.Zp)(),[I,k]=(0,i.useState)(!1),{languages:w,defaultLang:N}=(0,m.d4)((e=>e.formLang),m.bN),[B,E]=(0,i.useState)(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.img),[F,L]=(0,i.useState)(null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data["features[0].img"],null===a||void 0===a?void 0:a.data["features[1].img"],null===a||void 0===a?void 0:a.data["features[2].img"]]:["","",""]);(0,i.useEffect)((()=>()=>{const e=y.getFieldsValue(!0);b((0,g.Ok)({activeMenu:a,data:e}))}),[]);return(0,v.jsx)(r.A,{title:l("add.landing.page"),className:"h-100",extra:(0,v.jsx)(h.A,{}),children:(0,v.jsxs)(d.A,{name:"landing-page-add",layout:"vertical",onFinish:e=>{k(!0);const i={title:(0,A.A)(w,e,"title"),description:(0,A.A)(w,e,"description"),img:null===B||void 0===B?void 0:B.name,features:e.features.map(((e,l)=>{var a;return{img:null===(a=F[l])||void 0===a?void 0:a.name,title:(0,A.A)(w,e,"title"),description:(0,A.A)(w,e,"description")}}))};j.A.create({data:i,type:"welcome"}).then((()=>{const e="settings/landing-page";s.oR.success(l("successfully.created")),b((0,g.EK)({...a,nextUrl:e})),q(`/${e}`),b((0,p.E)())})).finally((()=>k(!1)))},form:y,initialValues:{features:["","",""],...a.data},className:"d-flex flex-column h-100",children:[(0,v.jsxs)(c.A,{gutter:12,children:[(0,v.jsxs)(o.A,{span:12,children:[w.map((e=>(0,v.jsx)(d.A.Item,{label:`${l("title")} (${e.locale})`,name:`title[${e.locale}]`,rules:[{required:e.locale===N,message:l("required")}],hidden:e.locale!==N,children:(0,v.jsx)(n.A,{})},"title"+e.locale))),w.map((e=>(0,v.jsx)(d.A.Item,{label:`${l("description")} (${e.locale})`,name:`description[${e.locale}]`,rules:[{required:e.locale===N,message:l("required")}],hidden:e.locale!==N,children:(0,v.jsx)($,{rows:3})},"description"+e.locale)))]}),(0,v.jsx)(o.A,{span:12,children:(0,v.jsx)(d.A.Item,{label:l("background.image"),children:(0,v.jsx)(f.A,{type:"languages",image:B,setImage:E,form:y,name:"img"})})})]}),(0,v.jsx)(r.A,{title:l("features"),children:(0,v.jsx)(d.A.List,{name:"features",children:e=>(0,v.jsx)("div",{children:e.map(((e,a)=>(0,v.jsxs)(c.A,{gutter:12,align:"middle",style:{borderBottom:"1px solid var(--grey)",marginBottom:24,borderWidth:2===a?0:1},children:[(0,v.jsxs)(o.A,{span:20,children:[w.map((e=>(0,v.jsx)(d.A.Item,{label:`${l("title")} (${e.locale})`,name:[a,`title[${e.locale}]`],rules:[{required:e.locale===N,message:l("required")}],hidden:e.locale!==N,children:(0,v.jsx)(n.A,{})},"title"+e.locale))),w.map((e=>(0,v.jsx)(d.A.Item,{label:`${l("description")} (${e.locale})`,name:[a,`description[${e.locale}]`],rules:[{required:e.locale===N,message:l("required")}],hidden:e.locale!==N,children:(0,v.jsx)($,{rows:3})},"description"+e.locale)))]}),(0,v.jsx)(o.A,{span:4,children:(0,v.jsx)(d.A.Item,{label:l("media"),children:(0,v.jsx)(f.A,{type:"languages",image:F[a],isVideo:!0,setImage:e=>((e,l)=>{const a=[...F];a[l]=e,L(a)})(e,a),form:y,name:`features[${a}].img`})})})]},e.key)))})})}),(0,v.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,v.jsx)("div",{className:"pb-5",children:(0,v.jsx)(u.A,{type:"primary",htmlType:"submit",loading:I,children:l("submit")})})})]})})}},31281:(e,l,a)=>{function i(e,l){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const i=e.map((e=>({[e.locale]:""===l[`${a}[${e.locale}]`]?void 0:l[`${a}[${e.locale}]`]})));return Object.assign({},...i)}a.d(l,{A:()=>i})}}]);