"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[4227],{31281:(e,l,t)=>{function i(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const i=e.map((e=>({[e.locale]:""===l[`${t}[${e.locale}]`]?void 0:l[`${t}[${e.locale}]`]})));return Object.assign({},...i)}t.d(l,{A:()=>i})},47992:(e,l,t)=>{t.d(l,{G:()=>d});var i=t(9950),n=t(95491),o=t.n(n),a=t(99674),r=t(90650),s=t(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:n,refetchOptions:d=!1,...c}=e;const[u,v]=(0,i.useState)(!1),[m,h]=(0,i.useState)([]),p=(0,i.useMemo)((()=>o()((e=>{h([]),v(!0),l(e).then((e=>{h(e),v(!1)}))}),t)),[l,t]);return(0,s.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),n&&n()},notFoundContent:u?(0,s.jsx)(r.A,{size:"small"}):"no results",...c,options:m,onFocus:()=>{m.length&&!d||p("")}})}},54227:(e,l,t)=>{t.r(l),t.d(l,{default:()=>h});var i=t(91854),n=t(70030),o=t(59233),a=t(23263),r=t(28429),s=t(9950),d=t(69239),c=t(22961),u=t(74623),v=t(71999),m=t(44414);const h=function(){const e=(0,i.wA)(),{t:l}=(0,n.B)(),[t]=o.A.useForm(),{activeMenu:h}=(0,i.d4)((e=>e.menu),i.bN),{languages:p}=(0,i.d4)((e=>e.formLang),i.bN),{id:A}=(0,r.g)(),[f,j]=(0,s.useState)(!1);function x(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,t=p.map((e=>{var t,i;return{[`title[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,[`description[${e.locale}]`]:null===(i=l.find((l=>l.locale===e.locale)))||void 0===i?void 0:i.description}}));return Object.assign({},...t)}return(0,s.useEffect)((()=>{h.refetch&&((l=>{j(!0),c.A.getById(l).then((l=>{var i,n,o,a,r,s;const d={...x(l.data),time:null===(i=l.data)||void 0===i?void 0:i.time,price:null===(n=l.data)||void 0===n?void 0:n.price,active:!(null===(o=l.data)||void 0===o||!o.active),shop:{value:l.data.shop_id,label:null===(a=l.data)||void 0===a||null===(r=a.shop)||void 0===r||null===(s=r.translation)||void 0===s?void 0:s.title}};t.setFieldsValue(d),e((0,u.Ok)({activeMenu:h,data:d}))})).finally((()=>j(!1)))})(A),e((0,u.km)(h)))}),[h.refetch]),(0,m.jsx)(a.A,{title:l("edit.gift.card"),extra:(0,m.jsx)(v.A,{}),loading:f,children:!f&&(0,m.jsx)(d.A,{form:t,handleSubmit:e=>c.A.update(A,e)})})}},69239:(e,l,t)=>{t.d(l,{A:()=>$});var i=t(59233),n=t(87094),o=t(41988),a=t(55902),r=t(40577),s=t(99674),d=t(25933),c=t(48538),u=t(91854),v=t(70030),m=t(9950),h=t(85923),p=t(74623),A=t(28429),f=t(76206),j=t(31281),x=t(47992),b=t(55660),g=t(44414);const y=["1 day","3 days","7 days","14 days","1 month","2 month","3 month","4 month","5 month","6 month","8 month","18 months","1 year","2 years","5 years"];const $=function(e){let{handleSubmit:l,form:t}=e;const{t:$}=(0,v.B)(),w=(0,u.wA)(),k=(0,A.Zp)(),{defaultLang:I,languages:O}=(0,u.d4)((e=>e.formLang),u.bN),{defaultCurrency:S}=(0,u.d4)((e=>e.currency),u.bN),{activeMenu:C}=(0,u.d4)((e=>e.menu)),[q,E]=(0,m.useState)(!1);function N(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return(l?!e&&(null===l||void 0===l?void 0:l.locale)===I:!e)?Promise.reject(new Error($("required"))):e&&""===(null===e||void 0===e?void 0:e.trim())?Promise.reject(new Error($("no.empty.space"))):e&&(null===e||void 0===e?void 0:e.trim().length)<t?Promise.reject(new Error($(`must.be.at.least.${t}`))):Promise.resolve()}return(0,g.jsxs)(i.A,{layout:"vertical",form:t,onFinish:e=>{var t;E(!0);const i="gift-cards",n={price:e.price,time:e.time,active:e.active?1:0,shop_id:null===(t=e.shop)||void 0===t?void 0:t.value,title:(0,j.A)(O,e,"title"),description:(0,j.A)(O,e,"description")};l(n).then((()=>{h.oR.success($("successfully.added")),(0,u.vA)((()=>{w((0,p.EK)({...C,nextUrl:i})),w((0,f.Eb)())})),k(`/${i}`)})).finally((()=>E(!1)))},children:[(0,g.jsxs)(n.A,{gutter:12,children:[(0,g.jsx)(o.A,{span:12,children:O.map((e=>(0,g.jsx)(i.A.Item,{label:$("title"),name:`title[${e.locale}]`,hidden:e.locale!==I,rules:[{validator:(l,t)=>N(t,e)}],children:(0,g.jsx)(a.A,{})},"title"+e.id)))}),(0,g.jsx)(o.A,{span:12,children:O.map((e=>(0,g.jsx)(i.A.Item,{label:$("description"),name:`description[${e.locale}]`,hidden:e.locale!==I,rules:[{validator:(l,t)=>N(t,e)}],children:(0,g.jsx)(a.A,{})},"description"+e.id)))}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(i.A.Item,{name:"price",label:$("price"),rules:[{required:!0,message:$("required")}],children:(0,g.jsx)(r.A,{min:0,className:"w-100",addonAfter:"after"===(null===S||void 0===S?void 0:S.position)&&((null===S||void 0===S?void 0:S.symbol)||"$"),addonBefore:"before"===(null===S||void 0===S?void 0:S.position)&&((null===S||void 0===S?void 0:S.symbol)||"$")})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(i.A.Item,{name:"time",label:$("time"),rules:[{required:!0}],children:(0,g.jsx)(s.A,{children:y.map((e=>(0,g.jsx)(s.A.Option,{value:e,children:e},e)))})})}),(0,g.jsx)(o.A,{span:12,children:(0,g.jsx)(i.A.Item,{label:$("shop"),name:"shop",rules:[{required:!0,message:$("required")}],children:(0,g.jsx)(x.G,{fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const l={search:e,perPage:10,page:1};return""===e.trim()&&delete l.search,b.A.getAll(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})}),(0,g.jsx)(o.A,{children:(0,g.jsx)(i.A.Item,{name:"active",label:$("active"),valuePropName:"checked",children:(0,g.jsx)(d.A,{})})})]}),(0,g.jsx)(c.A,{type:"primary",htmlType:"submit",loading:q,children:$("submit")})]})}}}]);