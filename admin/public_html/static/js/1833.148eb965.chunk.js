"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1833],{1833:(e,l,t)=>{t.r(l),t.d(l,{default:()=>F});var a=t(9950),n=t(59233),o=t(23263),r=t(87094),i=t(41988),s=t(55902),d=t(25933),c=t(48538),u=t(90650),m=t(85923),v=t(28429),p=t(71999),g=t(91854),h=t(74623),j=t(33774),A=t(70030),f=t(42362),x=t(29597),b=t(47992),y=t(62572),w=t(75670),P=t(31281),E=t(44414);const F=()=>{var e,l,t,F,$;const{t:N}=(0,A.B)(),k=(0,v.Zp)(),S=(0,g.wA)(),{activeMenu:C}=(0,g.d4)((e=>e.menu),g.bN),[I,O]=(0,a.useState)(!1),[q]=n.A.useForm(),[V,z]=(0,a.useState)(!1),{id:_}=(0,v.g)(),{params:B}=(0,g.d4)((e=>e.career),g.bN),{defaultLang:R,languages:D}=(0,g.d4)((e=>e.formLang),g.bN),{settings:M}=(0,g.d4)((e=>e.globalSettings),g.bN),[G,K]=(0,a.useState)(null!==C&&void 0!==C&&null!==(e=C.data)&&void 0!==e&&e.location?{lat:parseFloat(null===C||void 0===C||null===(l=C.data)||void 0===l||null===(t=l.location)||void 0===t?void 0:t.latitude),lng:parseFloat(null===C||void 0===C||null===(F=C.data)||void 0===F||null===($=F.location)||void 0===$?void 0:$.longitude)}:(0,x.A)(M));function L(e){if(!e)return{};const{translations:l}=e,t=D.map((e=>{var t,a,n;return{[`title[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,[`description[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.description,[`address[${e.locale}]`]:null===(n=l.find((l=>l.locale===e.locale)))||void 0===n?void 0:n.address}}));return Object.assign({},...t)}(0,a.useEffect)((()=>()=>{const e=q.getFieldsValue(!0);S((0,h.Ok)({activeMenu:C,data:e}))}),[]);return(0,a.useEffect)((()=>{var e;C.refetch&&(e=_,O(!0),j.A.getById(e).then((e=>{let l=e.data;const t={...l,...L(l),category_id:{label:l.category.translation.title,value:l.category.id}};q.setFieldsValue(t)})).finally((()=>{O(!1),S((0,h.km)(C))})))}),[C.refetch]),(0,E.jsx)(o.A,{title:N("clone.career"),extra:(0,E.jsx)(p.A,{}),children:I?(0,E.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,E.jsx)(u.A,{size:"large",className:"mt-5 pt-5"})}):(0,E.jsxs)(n.A,{name:"basic",layout:"vertical",onFinish:e=>{z(!0);const l={...e,title:(0,P.A)(D,e,"title"),description:(0,P.A)(D,e,"description"),address:(0,P.A)(D,e,"address"),active:e.active?1:0,"location[latitude]":G.lat,"location[longitude]":G.lng,category_id:e.category_id.value},t="catalog/career";j.A.create(l).then((()=>{m.oR.success(N("successfully.updated")),S((0,h.EK)({...C,nextUrl:t})),S((0,f.R)(B)),k(`/${t}`)})).catch((e=>console.error(e.response.data.params))).finally((()=>z(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...C.data},form:q,children:[(0,E.jsxs)(r.A,{gutter:12,children:[(0,E.jsx)(i.A,{span:12,children:D.map(((e,l)=>(0,E.jsx)(n.A.Item,{label:N("name"),name:`title[${e.locale}]`,rules:[{validator:(l,t)=>t||(null===e||void 0===e?void 0:e.locale)!==R?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(N("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(N("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(N("required")))}],hidden:e.locale!==R,children:(0,E.jsx)(s.A,{placeholder:N("name")})},e.title+l)))}),(0,E.jsx)(i.A,{span:12,children:(0,E.jsx)(w.A,{form:q,lang:R,languages:D})}),(0,E.jsx)(i.A,{span:12,children:(0,E.jsx)(n.A.Item,{label:N("category"),name:"category_id",rules:[{required:!0,message:N("required")}],children:(0,E.jsx)(b.G,{fetchOptions:async function(e){const l={search:e.lenght>0?e:void 0,type:"career",active:1};return y.A.getAll(l).then((e=>e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id})))))}})})}),(0,E.jsx)(i.A,{span:12,children:D.map(((e,l)=>(0,E.jsx)(n.A.Item,{label:N("location"),name:`address[${e.locale}]`,rules:[{validator:(l,t)=>t||(null===e||void 0===e?void 0:e.locale)!==R?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(N("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(N("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(N("required")))}],hidden:e.locale!==R,children:(0,E.jsx)(s.A,{})},e.locale+l)))}),(0,E.jsx)(i.A,{span:12,children:(0,E.jsx)(n.A.Item,{label:N("active"),name:"active",valuePropName:"checked",children:(0,E.jsx)(d.A,{})})}),(0,E.jsx)(i.A,{span:12}),(0,E.jsx)(i.A,{span:24,className:"mb-5"})]}),(0,E.jsx)(c.A,{type:"primary",htmlType:"submit",loading:V,children:N("submit")})]})})}},29597:(e,l,t)=>{function a(e){var l;if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}t.d(l,{A:()=>a})},31281:(e,l,t)=>{function a(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.map((e=>({[e.locale]:""===l[`${t}[${e.locale}]`]?void 0:l[`${t}[${e.locale}]`]})));return Object.assign({},...a)}t.d(l,{A:()=>a})},47992:(e,l,t)=>{t.d(l,{G:()=>d});var a=t(9950),n=t(95491),o=t.n(n),r=t(99674),i=t(90650),s=t(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:n,refetchOptions:d=!1,...c}=e;const[u,m]=(0,a.useState)(!1),[v,p]=(0,a.useState)([]),g=(0,a.useMemo)((()=>o()((e=>{p([]),m(!0),l(e).then((e=>{p(e),m(!1)}))}),t)),[l,t]);return(0,s.jsx)(r.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:g,onClear:()=>{g(""),n&&n()},notFoundContent:u?(0,s.jsx)(i.A,{size:"small"}):"no results",...c,options:v,onFocus:()=>{v.length&&!d||g("")}})}},75670:(e,l,t)=>{t.d(l,{A:()=>v});var a=t(9950),n=t(59233),o=t(70030),r=t(36455),i=t(19181),s=t.n(i),d=t(63620),c=t(64924),u=t(85923),m=t(44414);function v(e){let{form:l,lang:t,languages:i}=e;const{t:v}=(0,o.B)();function p(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((l,t)=>{const a=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(v("min.2.mb")),t()),a.append("image",e),a.append("type","blogs"),c.A.upload(a).then((e=>{let{data:t}=e;l({default:`${d.sE+t.title}`})})).catch((e=>{t(e)}))}))}))}}(e)}return(0,m.jsx)(a.Fragment,{children:i.map((e=>(0,m.jsx)(n.A.Item,{label:v("description"),name:`description[${e.locale}]`,valuePropName:"data",getValueFromEvent:(e,l)=>l.getData(),rules:[{required:e.locale===t,message:v("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(v("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<5?Promise.reject(new Error(v("must.be.at.least.5"))):l&&(null===l||void 0===l?void 0:l.trim().length)>200?Promise.reject(new Error(v("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==t,children:(0,m.jsx)(r.CKEditor,{editor:s(),config:{extraPlugins:[p]},onBlur:(t,a)=>{const n=a.getData();l.setFieldsValue({[`description[${e.value}]`]:n})}})},"desc"+e.locale)))})}}}]);