"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6883],{6883:(e,l,i)=>{i.r(l),i.d(l,{default:()=>p});var t=i(9950),o=i(59233),n=i(76585),a=i(31281),d=i(5302),s=i(91854),r=i(28429),u=i(81446),v=i(74623),c=i(44414);function p(){const e=(0,s.wA)(),[l]=o.A.useForm(),{activeMenu:i}=(0,s.d4)((e=>e.menu),s.bN),{languages:p}=(0,s.d4)((e=>e.formLang),s.bN),{id:m}=(0,r.g)(),[h,A]=(0,t.useState)(!1);(0,t.useEffect)((()=>{i.refetch&&(t=>{A(!0),d.A.getById(t,{type:"look"}).then((t=>{var o,n,a,d,s,r,u,c,p,m;const h=null===t||void 0===t?void 0:t.data,A={[`title[${null===h||void 0===h||null===(o=h.translation)||void 0===o?void 0:o.locale}]`]:null===h||void 0===h||null===(n=h.translation)||void 0===n?void 0:n.title,[`description[${null===h||void 0===h||null===(a=h.translation)||void 0===a?void 0:a.locale}]`]:null===h||void 0===h||null===(d=h.translation)||void 0===d?void 0:d.description,shop:{label:null===h||void 0===h||null===(s=h.shop)||void 0===s||null===(r=s.translation)||void 0===r?void 0:r.title,value:null===h||void 0===h||null===(u=h.shop)||void 0===u?void 0:u.id,key:null===h||void 0===h||null===(c=h.shop)||void 0===c?void 0:c.id},products:null===h||void 0===h||null===(p=h.products)||void 0===p?void 0:p.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})),image:null===h||void 0===h||null===(m=h.galleries)||void 0===m?void 0:m.map((e=>({uid:e.id,name:e.path,url:e.path}))),active:Boolean(null===h||void 0===h?void 0:h.active)};l.setFieldsValue(A),e((0,v.Ok)({activeMenu:i,data:A}))})).finally((()=>{A(!1),e((0,v.km)(i))}))})(m)}),[i.refetch]);return(0,c.jsx)(t.Fragment,{children:h?(0,c.jsx)(u.A,{}):(0,c.jsx)(n.A,{form:l,handleSubmit:(e,l)=>{const i={type:"look",active:Number(e.active),shop_id:e.shop.value,title:(0,a.A)(p,e,"title"),description:(0,a.A)(p,e,"description"),products:e.products.map((e=>e.value)),images:l.map((e=>e.name))};return d.A.update(m,i)}})})}},31281:(e,l,i)=>{function t(e,l){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const t=e.map((e=>({[e.locale]:""===l[`${i}[${e.locale}]`]?void 0:l[`${i}[${e.locale}]`]})));return Object.assign({},...t)}i.d(l,{A:()=>t})},47992:(e,l,i)=>{i.d(l,{G:()=>r});var t=i(9950),o=i(95491),n=i.n(o),a=i(99674),d=i(90650),s=i(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:o,refetchOptions:r=!1,...u}=e;const[v,c]=(0,t.useState)(!1),[p,m]=(0,t.useState)([]),h=(0,t.useMemo)((()=>n()((e=>{m([]),c(!0),l(e).then((e=>{m(e),c(!1)}))}),i)),[l,i]);return(0,s.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),o&&o()},notFoundContent:v?(0,s.jsx)(d.A,{size:"small"}):"no results",...u,options:p,onFocus:()=>{p.length&&!r||h("")}})}},76585:(e,l,i)=>{i.d(l,{A:()=>w});var t=i(9950),o=i(23263),n=i(59233),a=i(87094),d=i(41988),s=i(55902),r=i(25933),u=i(48538),v=i(70030),c=i(71999),p=i(91854),m=i(28429),h=i(98591),A=i(47992),g=i(47933),j=i(48970),x=i(74623),f=i(85923),b=i(86918),y=i(55660),k=i(44414);function w(e){var l,i,w,S;let{form:$,handleSubmit:I}=e;const P=(0,p.wA)(),C=(0,m.Zp)(),{t:F}=(0,v.B)(),{defaultLang:O,languages:q}=(0,p.d4)((e=>e.formLang),p.bN),{activeMenu:E}=(0,p.d4)((e=>e.menu),p.bN),[L,N]=(0,t.useState)(!1),[M,V]=(0,t.useState)(null!==(l=null===E||void 0===E||null===(i=E.data)||void 0===i?void 0:i.image)&&void 0!==l?l:[]),[z,B]=(0,t.useState)(null!==(w=null===E||void 0===E||null===(S=E.data)||void 0===S?void 0:S.shop)&&void 0!==w?w:{}),[G,_]=(0,t.useState)(!1);function T(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return(l?!e&&(null===l||void 0===l?void 0:l.locale)===O:!e)?Promise.reject(new Error(F("required"))):e&&""===(null===e||void 0===e?void 0:e.trim())?Promise.reject(new Error(F("no.empty.space"))):e&&(null===e||void 0===e?void 0:e.trim().length)<i?Promise.reject(new Error(F(`must.be.at.least.${i}`))):Promise.resolve()}return(0,k.jsx)(t.Fragment,{children:(0,k.jsx)(o.A,{title:F("add.look"),extra:(0,k.jsx)(c.A,{}),children:(0,k.jsxs)(n.A,{form:$,onFinish:e=>{N(!0);const l="catalog/looks";I(e,M).then((()=>{f.oR.success(F("successfully.added")),(0,p.vA)((()=>{P((0,x.EK)({...E,nextUrl:l})),P((0,b.x_)({}))})),C(`/${l}`)})).finally((()=>N(!1)))},layout:"vertical",initialValues:{active:!0,...null===E||void 0===E?void 0:E.data},children:[(0,k.jsxs)(a.A,{gutter:12,children:[(0,k.jsx)(d.A,{span:12,children:q.map((e=>(0,k.jsx)(n.A.Item,{label:F("title"),name:`title[${e.locale}]`,hidden:e.locale!==O,rules:[{validator:(l,i)=>T(i,e)}],children:(0,k.jsx)(s.A,{})},"title"+e.id)))}),(0,k.jsx)(d.A,{span:12,children:q.map((e=>(0,k.jsx)(n.A.Item,{label:F("description"),name:`description[${e.locale}]`,hidden:e.locale!==O,rules:[{validator:(l,i)=>T(i,e,5)}],children:(0,k.jsx)(h.A,{rows:3,maxLength:300})},"description"+e.id)))}),(0,k.jsx)(d.A,{span:12,children:(0,k.jsx)(n.A.Item,{label:F("shop"),name:"shop",rules:[{required:!0,message:F("required")}],children:(0,k.jsx)(A.G,{allowClear:!1,fetchOptions:e=>{const l={page:1,perPage:10,status:"approved",search:e||null};return y.A.getAll(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},onSelect:e=>{_(!0),B(e),$.setFieldsValue({products:[]})}})},"shop")}),(0,k.jsx)(d.A,{span:12,children:(0,k.jsx)(n.A.Item,{label:F("products"),name:"products",rules:[{required:!0,message:F("required")}],children:(0,k.jsx)(A.G,{mode:"multiple",fetchOptions:e=>{const l={page:1,perPage:10,active:1,status:"published",shop_id:null===z||void 0===z?void 0:z.value,search:e||null};return g.A.getAll(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}})))).finally((()=>_(!1)))},disabled:!(null!==z&&void 0!==z&&z.value),refetchOptions:G})})}),(0,k.jsx)(d.A,{span:4,children:(0,k.jsx)(n.A.Item,{name:"images",label:F("image"),rules:[{validator:()=>0===M.length?Promise.reject(new Error(F("required"))):Promise.resolve()}],children:(0,k.jsx)(j.A,{type:"products",imageList:M,setImageList:V,form:$,multiple:!1})})}),(0,k.jsx)(d.A,{span:4,children:(0,k.jsx)(n.A.Item,{label:F("active"),name:"active",valuePropName:"checked",children:(0,k.jsx)(r.A,{defaultChecked:!0})})})]}),(0,k.jsx)(u.A,{type:"primary",htmlType:"submit",loading:L,children:F("submit")})]})})})}}}]);