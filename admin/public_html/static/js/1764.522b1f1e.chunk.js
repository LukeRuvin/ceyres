"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[1764],{12970:(l,e,i)=>{function d(l){var e,i;let d=null===l||void 0===l?void 0:l.slice(0,1),n=null===l||void 0===l?void 0:l.lastIndexOf("@"),s=null===l||void 0===l?void 0:l.slice(1,n-1);s=null===(e=s)||void 0===e?void 0:e.replace(/./g,"*");let o=null===l||void 0===l?void 0:l.slice(n-1,l.length);return null===d||void 0===d||null===(i=d.concat(s))||void 0===i?void 0:i.concat(o)}i.d(e,{A:()=>d})},79930:(l,e,i)=>{i.d(e,{Y:()=>u});var d=i(59233),n=i(87094),s=i(41988),o=i(55902),r=i(48538),t=i(70030),a=i(44414);const u=l=>{let{onSubmit:e,initialData:i,isSubmitting:u}=l;const{t:c}=(0,t.B)();return(0,a.jsx)(d.A,{layout:"vertical",initialValues:i,onFinish:e,children:(0,a.jsxs)(n.A,{children:[(0,a.jsx)(s.A,{span:24,children:(0,a.jsx)(d.A.Item,{label:c("tracking.name"),name:"track_name",rules:[{required:!0,message:c("required")}],children:(0,a.jsx)(o.A,{})})}),(0,a.jsx)(s.A,{span:24,children:(0,a.jsx)(d.A.Item,{label:c("tracking.id"),name:"track_id",rules:[{required:!0,message:c("required")}],children:(0,a.jsx)(o.A,{})})}),(0,a.jsx)(s.A,{span:24,children:(0,a.jsx)(d.A.Item,{label:c("tracking.url"),name:"track_url",rules:[{type:"url",message:c("should.be.url")}],children:(0,a.jsx)(o.A,{})})}),(0,a.jsx)(s.A,{span:7,children:(0,a.jsx)(r.A,{type:"primary",loading:u,htmlType:"submit",children:c("submit")})})]})})}},81764:(l,e,i)=>{i.r(e),i.d(e,{default:()=>W});var d=i(9950),n=i(80737),s=i(12916),o=i(72243),r=i(52913),t=i(48538),a=i(23263),u=i(87094),c=i(41988),v=i(66362),x=i(74522),p=i(86366),h=i(90650),m=i(91524),j=i(98252),y=i(74947),A=i(40895),f=i(99083),g=i(24513),b=i(81419),_=i(28429),k=i(42074),N=i(23758),w=i(69554),I=i(91854),C=i(74623),Y=i(56592),$=i(23283),z=i(70030),D=i(53774),S=i(51242),M=i(31222),q=i(38635),B=i(74930),R=i(63620),F=i(50384),T=i(39174),L=i(59051),O=i.n(L),E=i(90352),P=i(13311),V=i(12970),H=i(94117),X=i(79930),G=i(85923),Z=i(91030),K=i(51066),U=i(44414);function W(){var l,e,i,L,W,J,Q,ll,el,il,dl,nl,sl,ol,rl,tl,al,ul,cl,vl,xl,pl,hl,ml,jl,yl,Al,fl,gl,bl,_l,kl,Nl,wl,Il,Cl,Yl,$l,zl,Dl,Sl,Ml,ql,Bl,Rl,Fl,Tl,Ll,Ol,El,Pl,Vl,Hl,Xl,Gl,Zl,Kl,Ul,Wl,Jl,Ql,le,ee,ie,de,ne,se,oe,re,te,ae,ue,ce,ve,xe,pe,he,me,je,ye,Ae,fe,ge;const{activeMenu:be}=(0,I.d4)((l=>l.menu),I.bN),{defaultLang:_e}=(0,I.d4)((l=>l.formLang),I.bN),ke=be.data,{t:Ne}=(0,z.B)(),{id:we}=(0,_.g)(),Ie=(0,I.wA)(),Ce=(0,_.Zp)(),Ye=(0,d.useRef)(),$e=(0,d.useRef)(),{isDemo:ze}=(0,P.A)(),[De,Se]=(0,d.useState)(null),[Me,qe]=(0,d.useState)(!1),[Be,Re]=(0,d.useState)(null),[Fe,Te]=(0,d.useState)(!1),[Le,Oe]=(0,d.useState)(null),[Ee,Pe]=(0,d.useState)(!1),{statusList:Ve}=(0,I.d4)((l=>l.orderStatus),I.bN),He=(0,K.Q)(),Xe=[{title:Ne("id"),dataIndex:"id",key:"id",render:(l,e)=>{var i;return null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.id}},{title:Ne("product.name"),dataIndex:"product",key:"product",render:(l,e)=>{var i,d,o,r,t;return(0,U.jsxs)(n.A,{direction:"vertical",className:"relative",children:[null===(i=e.stock)||void 0===i||null===(d=i.product)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,null===(r=e.stock)||void 0===r||null===(t=r.extras)||void 0===t?void 0:t.map((l=>{var e,i,d,n,o;return(0,U.jsxs)(s.A,{style:{display:"flex",width:"fit-content",justifyContent:"start",alignItems:"center",columnGap:"5px"},children:[null===(e=l.group)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,":"," ","color"===(null===(d=l.group)||void 0===d?void 0:d.type)?(0,U.jsx)("span",{style:{display:"block",width:"19px",height:"19px",backgroundColor:null===(n=l.value)||void 0===n?void 0:n.value,border:"1px solid #080136",borderRadius:"50%"}}):null===(o=l.value)||void 0===o?void 0:o.value]},null===l||void 0===l?void 0:l.id)}))]})}},{title:Ne("image"),dataIndex:"img",key:"img",render:(l,e)=>{var i,d;return(0,U.jsx)(o.A,{src:(0,w.A)(null===e||void 0===e||null===(i=e.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Ne("price"),dataIndex:"origin_price",key:"origin_price",render:(l,e)=>{var i,d,n;return(0,D.default)(null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.price,null===ke||void 0===ke||null===(d=ke.currency)||void 0===d?void 0:d.symbol,null===ke||void 0===ke||null===(n=ke.currency)||void 0===n?void 0:n.position)}},{title:Ne("quantity"),dataIndex:"quantity",key:"quantity",render:(l,e)=>{var i,d;return null!==e&&void 0!==e&&e.bonus?(0,U.jsx)(s.A,{color:"green",children:Ne("bonus")}):(0,U.jsx)("span",{children:l*((null===e||void 0===e||null===(i=e.stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.interval)||1)})}},{title:Ne("discount"),dataIndex:"rate_discount",key:"rate_discount",render:(l,e)=>{var i,d,n;return(0,D.default)(null===e||void 0===e||null===(i=e.stock)||void 0===i?void 0:i.discount,null===ke||void 0===ke||null===(d=ke.currency)||void 0===d?void 0:d.symbol,null===ke||void 0===ke||null===(n=ke.currency)||void 0===n?void 0:n.position)}},{title:Ne("tax"),dataIndex:"tax",key:"tax",render:(l,e)=>{var i,d;return(0,D.default)(null===e||void 0===e?void 0:e.tax,null===ke||void 0===ke||null===(i=ke.currency)||void 0===i?void 0:i.symbol,null===ke||void 0===ke||null===(d=ke.currency)||void 0===d?void 0:d.position)}},{title:Ne("total.price"),dataIndex:"total_price",key:"total_price",render:(l,e)=>{var i,d;return(0,D.default)(null===e||void 0===e?void 0:e.total_price,null===ke||void 0===ke||null===(i=ke.currency)||void 0===i?void 0:i.symbol,null===ke||void 0===ke||null===(d=ke.currency)||void 0===d?void 0:d.position)}},{title:Ne("actions"),dataIndex:"actions",key:"actions",render:(l,e)=>(0,U.jsx)(n.A,{children:(0,U.jsx)(t.A,{type:"primary",icon:(0,U.jsx)(f.A,{}),onClick:()=>Je(e),disabled:"new"!==(null===ke||void 0===ke?void 0:ke.status)&&"accepted"!==(null===ke||void 0===ke?void 0:ke.status)||(null===e||void 0===e?void 0:e.bonus)})})}],Ge=[{title:Ne("date"),dataIndex:"date",key:"date",render:l=>O()(l).format(`YYYY-MM-DD ${He}`)},{title:Ne("document"),dataIndex:"document",key:"document"},{title:Ne("number"),dataIndex:"number",key:"number"},{title:Ne("total.price"),dataIndex:"price",key:"price"}],Ze=[{price:(0,D.default)(null===ke||void 0===ke?void 0:ke.total_price,null===ke||void 0===ke||null===(l=ke.currency)||void 0===l?void 0:l.symbol,null===ke||void 0===ke||null===(e=ke.currency)||void 0===e?void 0:e.position),number:(0,U.jsxs)(k.N_,{to:`/orders/generate-invoice/${null===ke||void 0===ke?void 0:ke.id}`,children:["#",null===ke||void 0===ke?void 0:ke.id]}),document:Ne("invoice"),date:O()(null===ke||void 0===ke?void 0:ke.created_at).format(`YYYY-MM-DD ${He}`)},{price:"-",number:(0,U.jsxs)(k.N_,{to:`/orders/generate-invoice/${null===ke||void 0===ke?void 0:ke.id}`,children:["#",null===ke||void 0===ke?void 0:ke.id]}),document:Ne("delivery.receipt"),date:O()(null===ke||void 0===ke?void 0:ke.created_at).format(`YYYY-MM-DD ${He}`)}],Ke=()=>{Re(null),Oe(null),Se(null)};function Ue(){qe(!0),N.A.getById(we).then((l=>{let{data:e}=l;Ie((0,C.Ok)({activeMenu:be,data:e}))})).finally((()=>{qe(!1),Ie((0,C.km)(be))}))}const We=(0,d.useCallback)((l=>{Pe(!0),N.A.updateTracking(null===ke||void 0===ke?void 0:ke.id,l).then((()=>{G.oR.success(Ne("successfully.updated")),Ue()})).finally((()=>{Pe(!1)}))}),[null===ke||void 0===ke?void 0:ke.id]),Je=l=>{var e,i;Ie((0,C.X4)({url:`order/details/${null===ke||void 0===ke?void 0:ke.id}/replace/${null===l||void 0===l||null===(e=l.stock)||void 0===e?void 0:e.id}`,id:"replace_product",name:Ne("replace.product")})),Ce(`/order/details/${null===ke||void 0===ke?void 0:ke.id}/replace/${null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.id}`,{state:{data:ke}})};(0,d.useEffect)((()=>{be.refetch&&(Ue(),0===Ve.length&&Ie((0,E.rA)({})))}),[be.refetch]);return(0,U.jsxs)("div",{className:"order_details",children:[(0,U.jsx)(a.A,{className:"order-details-info",title:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(B.iHs,{className:"mr-2 icon"}),`${Ne("order")} ${null!==ke&&void 0!==ke&&ke.id?`#${null===ke||void 0===ke?void 0:ke.id} `:""}`," ",Ne("from.order")," ",null===ke||void 0===ke||null===(i=ke.user)||void 0===i?void 0:i.firstname," ",(null===ke||void 0===ke||null===(L=ke.user)||void 0===L?void 0:L.lastname)||""]}),extra:"delivered"!==(null===ke||void 0===ke?void 0:ke.status)&&"canceled"!==(null===ke||void 0===ke?void 0:ke.status)?(0,U.jsxs)(n.A,{children:["delivered"!==(null===ke||void 0===ke?void 0:ke.status)&&"canceled"!==(null===ke||void 0===ke?void 0:ke.status)&&1!==(null===ke||void 0===ke?void 0:ke.type)?(0,U.jsx)(t.A,{type:"primary",onClick:()=>Re(null===ke||void 0===ke?void 0:ke.id),children:Ne("change.status")}):null,(0,U.jsx)(t.A,{type:"primary",icon:(0,U.jsx)(g.A,{}),onClick:()=>{Ie((0,S.Uy)()),Ie((0,C.X4)({url:`order/${we}`,id:"order_edit",name:Ne("edit.order")})),Ce(`/order/${we}`)},children:Ne("edit")})]}):""}),(0,U.jsxs)(u.A,{gutter:24,children:[(0,U.jsx)(c.A,{span:24,children:(0,U.jsx)(a.A,{children:(0,U.jsxs)(n.A,{className:"justify-content-between w-100",children:[(0,U.jsxs)(n.A,{className:"align-items-start",children:[(0,U.jsx)(b.A,{className:"order-card-icon"}),(0,U.jsxs)("div",{className:"d-flex flex-column",children:[(0,U.jsx)(v.A.Text,{children:Ne("delivery.date")}),Me?(0,U.jsx)(x.A.Button,{size:16}):(0,U.jsx)(v.A.Text,{className:"order-card-title",children:O()(null===ke||void 0===ke?void 0:ke.delivery_date).format(`YYYY-MM-DD ${He}`)})]})]}),(0,U.jsxs)(n.A,{className:"align-items-start",onClick:()=>$e.current.scrollIntoView({behavior:"smooth"}),children:[(0,U.jsx)(T.aOb,{className:"order-card-icon"}),(0,U.jsxs)("div",{className:"d-flex flex-column",children:[(0,U.jsx)(v.A.Text,{children:Ne("total.price")}),Me?(0,U.jsx)(x.A.Button,{size:16,loading:Me}):(0,U.jsx)(v.A.Text,{className:"order-card-title",children:(0,D.default)(null===ke||void 0===ke?void 0:ke.total_price,null===ke||void 0===ke||null===(W=ke.currency)||void 0===W?void 0:W.symbol,null===ke||void 0===ke||null===(J=ke.currency)||void 0===J?void 0:J.position)})]})]}),(0,U.jsxs)(n.A,{className:"align-items-start",children:[(0,U.jsx)(T.j6C,{className:"order-card-icon"}),(0,U.jsxs)("div",{className:"d-flex flex-column",children:[(0,U.jsx)(v.A.Text,{children:Ne("messages")}),Me?(0,U.jsx)(x.A.Button,{size:16}):(0,U.jsx)(v.A.Text,{className:"order-card-title",children:null!==ke&&void 0!==ke&&ke.review?1:0})]})]}),(0,U.jsxs)(n.A,{className:"align-items-start",onClick:()=>Ye.current.scrollIntoView({behavior:"smooth"}),children:[(0,U.jsx)(B.iHs,{className:"order-card-icon"}),(0,U.jsxs)("div",{className:"d-flex flex-column",children:[(0,U.jsx)(v.A.Text,{children:Ne("products")}),Me?(0,U.jsx)(x.A.Button,{size:16}):(0,U.jsx)(v.A.Text,{className:"order-card-title",children:null===ke||void 0===ke||null===(Q=ke.details)||void 0===Q?void 0:Q.reduce(((l,e)=>l+((null===e||void 0===e?void 0:e.quantity)||0)),0)})]})]})]})})}),"canceled"!==(null===ke||void 0===ke?void 0:ke.status)&&(0,U.jsx)(c.A,{span:24,children:(0,U.jsx)(a.A,{children:(0,U.jsx)(p.A,{current:null===Ve||void 0===Ve?void 0:Ve.findIndex((l=>l.name===(null===ke||void 0===ke?void 0:ke.status))),children:null===Ve||void 0===Ve||null===(ll=Ve.slice(0,-1))||void 0===ll||null===(el=ll.filter((l=>null===l||void 0===l?void 0:l.active)))||void 0===el?void 0:el.map((l=>(0,U.jsx)(p.A.Step,{title:Ne(l.name)},l.id)))})})}),(0,U.jsxs)(c.A,{span:16,children:[(0,U.jsx)(h.A,{spinning:Me,children:(0,U.jsxs)(a.A,{style:{minHeight:"200px"},children:[(0,U.jsxs)("h3",{children:[Ne("details"),":"]}),(0,U.jsxs)(u.A,{hidden:Me,className:"mb-3 order_detail",gutter:10,children:[(0,U.jsxs)(c.A,{span:12,children:[(0,U.jsxs)("div",{children:[Ne("created.date.&.time"),":",(0,U.jsxs)("span",{className:"ml-2",children:[(0,U.jsx)(F.cCc,{className:"mr-1"})," ",O()(null===ke||void 0===ke?void 0:ke.created_at).format(`YYYY-MM-DD ${He}`)," "]})]}),(0,U.jsx)("br",{}),(0,U.jsxs)("div",{children:[Ne("delivery.date.&.time"),":",(0,U.jsxs)("span",{className:"ml-2",children:[(0,U.jsx)(F.cCc,{className:"mr-1"})," ",O()(null===ke||void 0===ke?void 0:ke.delivery_date).format(`YYYY-MM-DD ${He}`)]})]}),(0,U.jsx)("br",{}),(0,U.jsxs)("div",{children:[Ne("payment.status"),":",(0,U.jsxs)("span",{style:{cursor:"pointer"},className:"ml-2",onClick:()=>Te(!0),children:[Ne(null===ke||void 0===ke||null===(il=ke.transaction)||void 0===il?void 0:il.status)," ",(0,U.jsx)(g.A,{})]})]}),(0,U.jsx)("br",{}),(0,U.jsxs)("div",{children:[Ne("note"),":",(0,U.jsx)("span",{className:"ml-2",children:Ne(null!==ke&&void 0!==ke&&ke.note?null===ke||void 0===ke?void 0:ke.note:"")})]})]}),(0,U.jsxs)(c.A,{span:12,children:[(0,U.jsxs)("div",{children:[Ne("status"),":",(0,U.jsx)("span",{className:"ml-2",children:"new"===(null===ke||void 0===ke?void 0:ke.status)?(0,U.jsx)(s.A,{color:"blue",children:Ne(null===ke||void 0===ke?void 0:ke.status)}):"canceled"===(null===ke||void 0===ke?void 0:ke.status)?(0,U.jsx)(s.A,{color:"error",children:Ne(null===ke||void 0===ke?void 0:ke.status)}):(0,U.jsx)(s.A,{color:"cyan",children:Ne(null===ke||void 0===ke?void 0:ke.status)})})]}),(0,U.jsx)("br",{}),(0,U.jsxs)("div",{children:[Ne("delivery.type"),":",(0,U.jsx)("span",{className:"ml-2",children:null===ke||void 0===ke?void 0:ke.delivery_type})]}),(0,U.jsx)("br",{}),(0,U.jsxs)("div",{children:[Ne("payment.type"),":",(0,U.jsx)("span",{className:"ml-2",children:Ne(null===ke||void 0===ke||null===(dl=ke.transaction)||void 0===dl||null===(nl=dl.payment_system)||void 0===nl?void 0:nl.tag)})]}),(0,U.jsx)("br",{}),(0,U.jsxs)("div",{children:[Ne("otp"),":",(0,U.jsx)("span",{className:"ml-2",children:null!==(sl=null===ke||void 0===ke?void 0:ke.otp)&&void 0!==sl?sl:Ne("N/A")})]})]})]}),(0,U.jsxs)(u.A,{hidden:Me,className:"mb-3 order_detail",children:[(0,U.jsxs)(c.A,{span:12,children:[(0,U.jsx)(m.A,{bordered:!0,title:Ne("delivery.address"),children:null!==ke&&void 0!==ke&&ke.address?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(m.A.Item,{label:Ne("street.house.number"),span:3,children:null!==(ol=null===ke||void 0===ke||null===(rl=ke.address)||void 0===rl?void 0:rl.street_house_number)&&void 0!==ol?ol:Ne("not.given")}),(0,U.jsx)(m.A.Item,{label:Ne("zipcode"),span:3,children:null!==(tl=null!==(al=null===ke||void 0===ke||null===(ul=ke.address)||void 0===ul?void 0:ul.zipcode)&&void 0!==al?al:null===ke||void 0===ke||null===(cl=ke.address)||void 0===cl?void 0:cl.zip_code)&&void 0!==tl?tl:Ne("not.given")})]}):null!==ke&&void 0!==ke&&ke.my_address?(0,U.jsxs)(U.Fragment,{children:[(null===ke||void 0===ke||null===(vl=ke.my_address)||void 0===vl?void 0:vl.firstname)&&(0,U.jsx)(m.A.Item,{label:Ne("firstname"),span:3,children:null===ke||void 0===ke||null===(xl=ke.my_address)||void 0===xl?void 0:xl.firstname}),(null===ke||void 0===ke||null===(pl=ke.my_address)||void 0===pl?void 0:pl.lastname)&&(0,U.jsx)(m.A.Item,{label:Ne("lastname"),span:3,children:null===ke||void 0===ke||null===(hl=ke.my_address)||void 0===hl?void 0:hl.lastname}),(null===ke||void 0===ke||null===(ml=ke.my_address)||void 0===ml?void 0:ml.phone)&&(0,U.jsx)(m.A.Item,{label:Ne("phone"),span:3,children:null!==ke&&void 0!==ke&&ke.my_address.phone.startsWith("+")?(0,U.jsx)("a",{href:`tel:${null===ke||void 0===ke?void 0:ke.my_address.phone}`,children:null===ke||void 0===ke?void 0:ke.my_address.phone}):(0,U.jsxs)("a",{href:`tel:+${null===ke||void 0===ke?void 0:ke.my_address.phone}`,children:["+",null===ke||void 0===ke?void 0:ke.my_address.phone]})}),(0,U.jsx)(m.A.Item,{label:Ne("street.house.number"),span:3,children:null!==(jl=null===ke||void 0===ke||null===(yl=ke.my_address)||void 0===yl?void 0:yl.street_house_number)&&void 0!==jl?jl:Ne("not.given")}),(0,U.jsx)(m.A.Item,{label:Ne("street.house.number"),span:3,children:null!==(Al=null===ke||void 0===ke||null===(fl=ke.my_address)||void 0===fl?void 0:fl.street_house_number)&&void 0!==Al?Al:Ne("not.given")}),(0,U.jsx)(m.A.Item,{label:Ne("zipcode"),span:3,children:null!==(gl=null===ke||void 0===ke||null===(bl=ke.my_address)||void 0===bl?void 0:bl.zipcode)&&void 0!==gl?gl:Ne("not.given")}),(null===ke||void 0===ke||null===(_l=ke.my_address)||void 0===_l?void 0:_l.additional_details)&&(0,U.jsx)(m.A.Item,{label:Ne("additional.details"),span:3,children:null===ke||void 0===ke||null===(kl=ke.my_address)||void 0===kl?void 0:kl.additional_details})]}):null!==ke&&void 0!==ke&&ke.delivery_point?(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)("div",{children:[Ne("address"),":"," ",null!==(Nl=null===ke||void 0===ke||null===(wl=ke.delivery_point)||void 0===wl||null===(Il=wl.address)||void 0===Il?void 0:Il[_e])&&void 0!==Nl?Nl:Ne("no.address")]})}):"digital"===(null===ke||void 0===ke?void 0:ke.delivery_type)?(0,U.jsx)("div",{children:Ne("digital.delivery")}):(0,U.jsx)("div",{children:Ne("no.address")})}),(0,U.jsxs)(t.A,{className:"map_show mt-3",onClick:()=>Se(we),children:[(0,U.jsx)(M.gwi,{style:{marginRight:"8px"}})," ",Ne("show.locations")]})]}),(0,U.jsx)(c.A,{span:12,children:(0,U.jsx)(H.A,{orderId:we})})]})]})}),(0,U.jsx)(a.A,{title:Ne("documents"),children:(0,U.jsx)(r.A,{columns:Ge,dataSource:Ze,pagination:!1,loading:Me})})]}),(0,U.jsxs)(c.A,{span:8,className:"order_info",children:["delivery"===(null===ke||void 0===ke?void 0:ke.delivery_type)&&(0,U.jsxs)(a.A,{title:Ne("deliveryman"),extra:"ready"===(null===ke||void 0===ke?void 0:ke.status)&&"pickup"!==(null===ke||void 0===ke?void 0:ke.delivery_type)&&(0,U.jsxs)(t.A,{onClick:()=>Oe(ke),children:[Ne("change"),(0,U.jsx)(g.A,{})]}),children:["new"===(null===ke||void 0===ke?void 0:ke.status)||"accepted"===(null===ke||void 0===ke?void 0:ke.status)?(0,U.jsx)("p",{children:Ne("order_status_ready")}):"","new"===(null===ke||void 0===ke?void 0:ke.status)||"accepted"===(null===ke||void 0===ke?void 0:ke.status)||null!==ke&&void 0!==ke&&ke.deliveryman?"":(0,U.jsx)("p",{children:Ne("The supplier is not assigned or delivery type pickup")}),(null===ke||void 0===ke?void 0:ke.deliveryman)&&(0,U.jsxs)(n.A,{children:[(0,U.jsx)(j.A,{shape:"square",size:64,src:R.sE+(null===ke||void 0===ke||null===(Cl=ke.deliveryman)||void 0===Cl?void 0:Cl.img)}),(0,U.jsxs)("div",{children:[(0,U.jsxs)("h5",{children:[null===ke||void 0===ke||null===(Yl=ke.deliveryman)||void 0===Yl?void 0:Yl.firstname," ",(null===ke||void 0===ke||null===($l=ke.deliveryman)||void 0===$l?void 0:$l.lastname)||""]}),(0,U.jsxs)("span",{className:"delivery-info",children:[(0,U.jsx)(F.s91,{}),null===ke||void 0===ke||null===(zl=ke.deliveryman)||void 0===zl?void 0:zl.phone]}),(0,U.jsxs)("div",{className:"delivery-info",children:[(0,U.jsx)("b",{children:(0,U.jsx)(M.mm2,{size:16})}),(0,U.jsx)("span",{children:ze?(0,V.A)(null===ke||void 0===ke||null===(Dl=ke.deliveryman)||void 0===Dl?void 0:Dl.email):null===ke||void 0===ke||null===(Sl=ke.deliveryman)||void 0===Sl?void 0:Sl.email})]})]})]})]}),2===(null===ke||void 0===ke?void 0:ke.type)&&"delivery"===(null===ke||void 0===ke?void 0:ke.delivery_type)&&(0,U.jsx)(a.A,{title:Ne("tracking.info"),children:(0,U.jsx)(X.Y,{onSubmit:We,isSubmitting:Ee,initialData:{track_name:null===ke||void 0===ke?void 0:ke.track_name,track_id:null===ke||void 0===ke?void 0:ke.track_id,track_url:null===ke||void 0===ke?void 0:ke.track_url}})}),!(null===ke||void 0===ke||!ke.username)&&(0,U.jsxs)(a.A,{title:Ne("order.receiver"),children:[(0,U.jsxs)("div",{className:"customer-info",children:[(0,U.jsx)("span",{className:"title",children:Ne("name")}),(0,U.jsxs)("span",{className:"description",children:[(0,U.jsx)(F.tVJ,{}),null===ke||void 0===ke?void 0:ke.username]})]}),(0,U.jsxs)("div",{className:"customer-info",children:[(0,U.jsx)("span",{className:"title",children:Ne("phone")}),(0,U.jsxs)("span",{className:"description",children:[(0,U.jsx)(F.s91,{}),null===ke||void 0===ke?void 0:ke.phone]})]})]}),!(null===ke||void 0===ke||!ke.user)&&(0,U.jsx)(a.A,{title:(0,U.jsxs)(n.A,{children:[Ne("customer.info"),(0,U.jsx)(g.A,{onClick:()=>(Ie((0,C.X4)({url:`users/user/${null===ke||void 0===ke?void 0:ke.user.uuid}`,id:"user_info",name:Ne("user.info")})),void Ce(`/users/user/${null===ke||void 0===ke?void 0:ke.user.uuid}`,{state:{user_id:null===ke||void 0===ke?void 0:ke.user.id}}))})]}),children:(0,U.jsxs)("div",{className:"d-flex w-100 customer-info-container",children:[Me?(0,U.jsx)(x.A.Avatar,{size:64,shape:"square"}):(0,U.jsx)(j.A,{shape:"square",size:64,src:null===ke||void 0===ke||null===(Ml=ke.user)||void 0===Ml?void 0:Ml.img}),(0,U.jsx)("h5",{className:"customer-name",children:Me?(0,U.jsx)(x.A.Button,{size:20,style:{width:70}}):(null===ke||void 0===ke||null===(ql=ke.user)||void 0===ql?void 0:ql.firstname)+" "+((null===ke||void 0===ke||null===(Bl=ke.user)||void 0===Bl?void 0:Bl.lastname)||"")}),(0,U.jsxs)("div",{className:"customer-info-detail",children:[(0,U.jsxs)("div",{className:"customer-info",children:[(0,U.jsx)("span",{className:"title",children:Ne("phone")}),(0,U.jsxs)("span",{className:"description",children:[(0,U.jsx)(F.s91,{}),Me?(0,U.jsx)(x.A.Button,{size:16}):(null===ke||void 0===ke||null===(Rl=ke.user)||void 0===Rl?void 0:Rl.phone)||"none"]})]}),(0,U.jsxs)("div",{className:"customer-info",children:[(0,U.jsx)("span",{className:"title",children:Ne("email")}),(0,U.jsxs)("span",{className:"description",children:[(0,U.jsx)(M.mm2,{}),Me?(0,U.jsx)(x.A.Button,{size:16}):ze?(0,V.A)(null===ke||void 0===ke||null===(Fl=ke.user)||void 0===Fl?void 0:Fl.email):null===ke||void 0===ke||null===(Tl=ke.user)||void 0===Tl?void 0:Tl.email]})]}),(0,U.jsxs)("div",{className:"customer-info",children:[(0,U.jsx)("span",{className:"title",children:Ne("registration.date")}),(0,U.jsxs)("span",{className:"description",children:[(0,U.jsx)(F.cCc,{}),Me?(0,U.jsx)(x.A.Button,{size:16}):O()(null===ke||void 0===ke||null===(Ll=ke.user)||void 0===Ll?void 0:Ll.created_at).format(`YYYY-MM-DD ${He}`)]})]}),(0,U.jsxs)("div",{className:"customer-info",children:[(0,U.jsx)("span",{className:"title",children:Ne("orders.count")}),(0,U.jsx)("span",{className:"description",children:Me?(0,U.jsx)(x.A.Button,{size:16}):(0,U.jsx)(y.A,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===ke||void 0===ke||null===(Ol=ke.user)||void 0===Ol?void 0:Ol.orders_count)||0})})]}),(0,U.jsxs)("div",{className:"customer-info",children:[(0,U.jsx)("span",{className:"title",children:Ne("spent.since.registration")}),(0,U.jsx)("span",{className:"description",children:Me?(0,U.jsx)(x.A.Button,{size:16}):(0,U.jsx)(y.A,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,D.default)(null===ke||void 0===ke||null===(El=ke.user)||void 0===El?void 0:El.orders_sum_price,null===ke||void 0===ke||null===(Pl=ke.currency)||void 0===Pl?void 0:Pl.symbol,null===ke||void 0===ke||null===(Vl=ke.currency)||void 0===Vl?void 0:Vl.position)})})]})]})]})}),(null===ke||void 0===ke?void 0:ke.shop)&&(0,U.jsx)(a.A,{title:`${Ne("shop.details")}: #${null===ke||void 0===ke||null===(Hl=ke.shop)||void 0===Hl?void 0:Hl.id}`,loading:Me,children:(0,U.jsxs)(u.A,{gutter:12,children:[(0,U.jsxs)(c.A,{span:24,style:{display:"flex",columnGap:"20px",marginBottom:"20px"},children:[(0,U.jsx)("div",{style:{width:"100px",height:"100px",backgroundColor:"#f5f5f5",overflow:"hidden",borderRadius:"10px",position:"relative"},children:(0,U.jsx)(o.A,{alt:Ne("shop.logo"),style:{objectFit:"contain"},src:(null===ke||void 0===ke||null===(Xl=ke.shop)||void 0===Xl?void 0:Xl.logo_img)||"https://via.placeholder.com/150",width:100,height:100,preview:!1})}),(0,U.jsxs)("div",{style:{width:"calc(100% - 100px - 20px)"},children:[(0,U.jsx)("h5",{style:{maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:(null===ke||void 0===ke||null===(Gl=ke.shop)||void 0===Gl||null===(Zl=Gl.translation)||void 0===Zl?void 0:Zl.title)||"--"}),(0,U.jsx)("p",{children:null!==ke&&void 0!==ke&&null!==(Kl=ke.shop)&&void 0!==Kl&&Kl.open?(0,U.jsx)(s.A,{color:"green",children:Ne("open")}):(0,U.jsx)(s.A,{color:"red",children:Ne("closed")})})]})]}),(0,U.jsxs)(c.A,{span:24,children:[(null===ke||void 0===ke||null===(Ul=ke.shop)||void 0===Ul?void 0:Ul.phone)&&(0,U.jsxs)("p",{children:[(0,U.jsxs)("strong",{children:[Ne("phone"),":"]})," ",null===ke||void 0===ke||null===(Wl=ke.shop)||void 0===Wl?void 0:Wl.phone]}),(null===ke||void 0===ke||null===(Jl=ke.shop)||void 0===Jl||null===(Ql=Jl.translation)||void 0===Ql?void 0:Ql.address)&&(0,U.jsxs)("p",{children:[(0,U.jsxs)("strong",{children:[Ne("address"),":"]})," ",null===ke||void 0===ke||null===(le=ke.shop)||void 0===le||null===(ee=le.translation)||void 0===ee?void 0:ee.address]})]})]})}),(null===ke||void 0===ke?void 0:ke.review)&&!Me&&(0,U.jsx)(a.A,{title:Ne("messages"),children:(0,U.jsxs)("div",{className:"order-message",children:[(0,U.jsx)("span",{className:"message",children:null===ke||void 0===ke||null===(ie=ke.review)||void 0===ie?void 0:ie.comment}),(0,U.jsx)(n.A,{className:"w-100 justify-content-end",children:(0,U.jsx)("span",{className:"date",children:O()(null===ke||void 0===ke||null===(de=ke.review)||void 0===de?void 0:de.created_at).format(`YYYY-MM-DD ${He}`)})})]})})]}),(0,U.jsx)(c.A,{span:24,children:(0,U.jsxs)(a.A,{className:"w-100 order-table",title:Ne("order.products"),children:[(0,U.jsx)(A.A,{}),(0,U.jsx)(r.A,{ref:Ye,scroll:{x:!0},columns:Xe,dataSource:(null===(ne=be.data)||void 0===ne?void 0:ne.details)||[],loading:Me,rowKey:l=>null===l||void 0===l?void 0:l.id,pagination:!1,expandable:{expandedRowRender:l=>{if(null===l||void 0===l||!l.replace_stock)return;const e=[{title:Ne("id"),dataIndex:"id",key:"id",render:(l,e)=>{var i;return null===e||void 0===e||null===(i=e.replace_stock)||void 0===i?void 0:i.id}},{title:Ne("product.name"),dataIndex:"product",key:"product",render:(l,e)=>{var i,d,o,r,t;return(0,U.jsxs)(n.A,{direction:"vertical",className:"relative",children:[null===(i=e.replace_stock)||void 0===i||null===(d=i.product)||void 0===d||null===(o=d.translation)||void 0===o?void 0:o.title,null===(r=e.replace_stock)||void 0===r||null===(t=r.extras)||void 0===t?void 0:t.map((l=>{var e,i,d,n,o;return(0,U.jsxs)(s.A,{style:{display:"flex",width:"fit-content",justifyContent:"start",alignItems:"center",columnGap:"5px"},children:[null===(e=l.group)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,":"," ","color"===(null===(d=l.group)||void 0===d?void 0:d.type)?(0,U.jsx)("span",{style:{display:"block",width:"19px",height:"19px",backgroundColor:null===(n=l.value)||void 0===n?void 0:n.value,border:"1px solid #080136",borderRadius:"50%"}}):null===(o=l.value)||void 0===o?void 0:o.value]},null===l||void 0===l?void 0:l.id)}))]})}},{title:Ne("image"),dataIndex:"img",key:"img",render:(l,e)=>{var i,d;return(0,U.jsx)(o.A,{src:(0,w.A)(null===e||void 0===e||null===(i=e.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.img),alt:"product",width:100,height:"auto",className:"rounded",preview:!0,placeholder:!0})}},{title:Ne("price"),dataIndex:"price",key:"price",render:(l,e)=>{var i,d,n;return(0,D.default)(null===e||void 0===e||null===(i=e.replace_stock)||void 0===i?void 0:i.price,null===ke||void 0===ke||null===(d=ke.currency)||void 0===d?void 0:d.symbol,null===ke||void 0===ke||null===(n=ke.currency)||void 0===n?void 0:n.position)}},{title:Ne("quantity"),dataIndex:"replace_quantity",key:"replace_quantity",render:(l,e)=>{var i,d;return(0,U.jsx)("span",{children:l*((null===e||void 0===e||null===(i=e.replace_stock)||void 0===i||null===(d=i.product)||void 0===d?void 0:d.interval)||1)})}},{title:Ne("discount"),dataIndex:"discount",key:"discount",render:(l,e)=>{var i,d,n,s;return(0,D.default)(null!==(i=null===e||void 0===e||null===(d=e.replace_stock)||void 0===d?void 0:d.discount)&&void 0!==i?i:0,null===ke||void 0===ke||null===(n=ke.currency)||void 0===n?void 0:n.symbol,null===ke||void 0===ke||null===(s=ke.currency)||void 0===s?void 0:s.position)}},{title:Ne("tax"),dataIndex:"tax",key:"tax",render:(l,e)=>{var i,d,n;return(0,D.default)(null===e||void 0===e||null===(i=e.replace_stock)||void 0===i?void 0:i.tax,null===ke||void 0===ke||null===(d=ke.currency)||void 0===d?void 0:d.symbol,null===ke||void 0===ke||null===(n=ke.currency)||void 0===n?void 0:n.position)}},{title:Ne("total.price"),dataIndex:"total_price",key:"total_price",render:(l,e)=>{var i,d,n;return(0,D.default)(null===e||void 0===e||null===(i=e.replace_stock)||void 0===i?void 0:i.total_price,null===ke||void 0===ke||null===(d=ke.currency)||void 0===d?void 0:d.symbol,null===ke||void 0===ke||null===(n=ke.currency)||void 0===n?void 0:n.position)}},{title:Ne("note"),dataIndex:"note",key:"note",render:l=>l||"--"}];return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("span",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,U.jsx)(f.A,{style:{padding:"10px",margin:"10px 0 50px 0",border:"2px solid #cad2de",borderRadius:"30%"},rotate:90})}),(0,U.jsx)(r.A,{columns:e,dataSource:[l],pagination:!1})]})},expandIcon:l=>{let{expanded:e,onExpand:i,record:d}=l;return(0,U.jsx)(f.A,{onClick:l=>i(d,l),rotate:90})},defaultExpandedRowKeys:["0"]}}),(0,U.jsxs)(n.A,{size:100,className:"d-flex justify-content-end w-100 order-table__summary",children:[(0,U.jsxs)("div",{children:[(0,U.jsxs)("span",{children:[Ne("delivery.fee"),":"]}),(0,U.jsx)("br",{}),(0,U.jsxs)("span",{children:[Ne("order.tax"),":"]}),(0,U.jsx)("br",{}),(0,U.jsxs)("span",{children:[Ne("product"),":"]}),(0,U.jsx)("br",{}),(0,U.jsxs)("span",{children:[Ne("discount"),":"]}),(0,U.jsx)("br",{}),(0,U.jsxs)("span",{children:[Ne("service.fee"),":"]}),(0,U.jsx)("br",{}),(0,U.jsxs)("span",{children:[Ne("tips"),":"]}),(0,U.jsx)("br",{}),(0,U.jsxs)("span",{children:[Ne("coupon.price"),":"]}),(0,U.jsx)("br",{}),(0,U.jsxs)("h3",{children:[Ne("total.price"),":"]})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)("span",{children:(0,D.default)(null!==(se=null===ke||void 0===ke?void 0:ke.delivery_fee)&&void 0!==se?se:0,null===ke||void 0===ke||null===(oe=ke.currency)||void 0===oe?void 0:oe.symbol,null===ke||void 0===ke||null===(re=ke.currency)||void 0===re?void 0:re.position)}),(0,U.jsx)("br",{}),(0,U.jsx)("span",{children:(0,D.default)(null===ke||void 0===ke?void 0:ke.tax,null===ke||void 0===ke||null===(te=ke.currency)||void 0===te?void 0:te.symbol,null===ke||void 0===ke||null===(ae=ke.currency)||void 0===ae?void 0:ae.position)}),(0,U.jsx)("br",{}),(0,U.jsx)("span",{children:(0,D.default)(null===ke||void 0===ke?void 0:ke.origin_price,null===ke||void 0===ke||null===(ue=ke.currency)||void 0===ue?void 0:ue.symbol,null===ke||void 0===ke||null===(ce=ke.currency)||void 0===ce?void 0:ce.position)}),(0,U.jsx)("br",{}),(0,U.jsx)("span",{children:(0,D.default)(null===ke||void 0===ke?void 0:ke.total_discount,null===ke||void 0===ke||null===(ve=ke.currency)||void 0===ve?void 0:ve.symbol,null===ke||void 0===ke||null===(xe=ke.currency)||void 0===xe?void 0:xe.position)}),(0,U.jsx)("br",{}),(0,U.jsx)("span",{children:(0,D.default)(null===ke||void 0===ke?void 0:ke.service_fee,null===ke||void 0===ke||null===(pe=ke.currency)||void 0===pe?void 0:pe.symbol,null===ke||void 0===ke||null===(he=ke.currency)||void 0===he?void 0:he.position)}),(0,U.jsx)("br",{}),(0,U.jsx)("span",{children:(0,D.default)(null===ke||void 0===ke?void 0:ke.tips,null===ke||void 0===ke||null===(me=ke.currency)||void 0===me?void 0:me.symbol,null===ke||void 0===ke||null===(je=ke.currency)||void 0===je?void 0:je.position)}),(0,U.jsx)("br",{}),(0,U.jsx)("span",{children:(0,D.default)(null===ke||void 0===ke?void 0:ke.coupon_price,null===ke||void 0===ke||null===(ye=ke.currency)||void 0===ye?void 0:ye.symbol,null===ke||void 0===ke||null===(Ae=ke.currency)||void 0===Ae?void 0:Ae.position)}),(0,U.jsx)("br",{}),(0,U.jsx)("h3",{ref:$e,children:(0,D.default)(null===ke||void 0===ke?void 0:ke.total_price,null===ke||void 0===ke||null===(fe=ke.currency)||void 0===fe?void 0:fe.symbol,null===ke||void 0===ke||null===(ge=ke.currency)||void 0===ge?void 0:ge.position)})]})]})]})})]}),Be&&(0,U.jsx)(Y.A,{orderId:Be,handleCancel:Ke,refetchPage:Ue}),Le&&(0,U.jsx)($.A,{orderDetails:Le,handleCancel:Ke}),De&&(0,U.jsx)(q.A,{id:De,handleCancel:Ke}),Fe&&(0,U.jsx)(Z.A,{orderId:we,handleCancel:()=>Te(!1),transactionDetails:null===ke||void 0===ke?void 0:ke.transaction,fetchOrder:Ue})]})}},91030:(l,e,i)=>{i.d(e,{A:()=>h});var d=i(9950),n=i(59233),s=i(82706),o=i(48538),r=i(87094),t=i(41988),a=i(99674),u=i(70030),c=i(85923),v=i(92270),x=i(44414);const p=["paid","canceled"];function h(l){let{transactionDetails:e,handleCancel:i,fetchOrder:h,orderId:m}=l;const[j]=n.A.useForm(),{t:y}=(0,u.B)(),[A,f]=(0,d.useState)(!1);return(0,x.jsx)(s.A,{visible:!!e,title:y("transaction.status"),closable:!1,footer:[(0,x.jsx)(o.A,{type:"primary",onClick:()=>j.submit(),loading:A,children:y("save")},"save-form"),(0,x.jsx)(o.A,{type:"default",onClick:i,children:y("cancel")},"cansel-modal")],children:(0,x.jsx)(n.A,{form:j,layout:"vertical",onFinish:l=>{f(!0),v.A.updateStatus(m,l).then((()=>{i(),h()})).catch((l=>c.oR.error(l.message))).finally((()=>f(!1)))},initialValues:{status:e.status},children:(0,x.jsx)(r.A,{gutter:12,children:(0,x.jsx)(t.A,{span:24,children:(0,x.jsx)(n.A.Item,{label:y("status"),name:"status",rules:[{validator:(l,e)=>"paid"===e||"canceled"===e?Promise.resolve():Promise.reject(new Error(y("required")))}],children:(0,x.jsx)(a.A,{children:p.map(((l,e)=>(0,x.jsx)(a.A.Option,{value:l,children:y(l)},e)))})})})})})})}},94117:(l,e,i)=>{i.d(e,{A:()=>h});var d=i(9950),n=i(70030),s=i(99163),o=i(85923),r=i(48538),t=i(12916),a=i(96011),u=i.n(a),c=i(63620),v=i(81446),x=i(44414);const p=`https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=${c.Lq}`;function h(l){let{orderId:e,showLink:i=!0,size:a=2}=l;const{t:h}=(0,n.B)(),[m,j]=(0,d.useState)(""),[y,A]=(0,d.useState)(!1),[f,g]=(0,d.useState)(null);return(0,d.useEffect)((()=>{(async()=>{A(!0);const l={dynamicLinkInfo:{domainUriPrefix:c.ac,link:`${c.CY}/orders/${e}`,androidInfo:{androidPackageName:c.xp},iosInfo:{iosBundleId:c.lu}}};try{const{data:e}=await u().post(p,l);g(null),j(null===e||void 0===e?void 0:e.shortLink)}catch(f){g(f),o.oR.error(f.message)}finally{A(!1)}})()}),[e]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("h3",{children:[h("qr_code"),":"]}),(0,x.jsx)("div",{children:y||f?f?(0,x.jsx)(t.A,{color:"red",children:h("smth.went.wrong")}):(0,x.jsx)(v.A,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{style:{width:100*a+"px",height:100*a+"px",borderRadius:"10px",overflow:f?"none":"hidden"},children:(0,x.jsx)(s.Xe,{size:500,id:"qrCode",includeMargin:!0,value:m,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,x.jsx)("br",{}),i&&(0,x.jsx)(r.A,{type:"primary",href:m,target:"_blank",rel:"noreferrer",style:{width:100*a+"px"},children:h("link.to.order")})]})})]})}}}]);