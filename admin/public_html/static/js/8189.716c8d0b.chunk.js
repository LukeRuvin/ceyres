"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8189],{78189:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(9950),i=s(28429),l=s(85923),r=s(59233),n=s(23263),c=s(87094),d=s(41988),m=s(55902),o=s(25933),u=s(48538),v=s(90650),h=s(63620),j=s(91854),g=s(74623),x=s(37963),A=s(59759),p=s(70030),f=s(48970),b=s(44414);const y=()=>{var e,t;const{t:s}=(0,p.B)(),{activeMenu:y}=(0,j.d4)((e=>e.menu),j.bN),{id:E}=(0,i.g)(),k=(0,j.wA)(),[w,P]=(0,a.useState)(null!==(e=y.data)&&void 0!==e&&e.image?[null===(t=y.data)||void 0===t?void 0:t.image]:[]),[F]=r.A.useForm(),I=(0,i.Zp)(),[N,z]=((0,i.zy)(),(0,a.useState)(!1)),[S,V]=(0,a.useState)(!1);(0,a.useEffect)((()=>()=>{const e=F.getFieldsValue(!0);k((0,g.Ok)({activeMenu:y,data:e}))}),[]);const q=e=>({name:e,url:h.sE+e});return(0,a.useEffect)((()=>{y.refetch&&(e=>{z(!0),x.A.getById(e).then((e=>{let t=e.data;F.setFieldsValue({...t,image:[q(t.img)]}),P([q(t.img)])})).finally((()=>{z(!1),k((0,g.km)(y))}))})(E)}),[y.refetch]),(0,b.jsx)(n.A,{title:s("clone.brand"),children:N?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(v.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(r.A,{name:"basic",layout:"vertical",onFinish:e=>{var t;const a={...e,active:e.active?1:0,"images[0]":null===(t=w[0])||void 0===t?void 0:t.name};V(!0);const i="catalog/brands";x.A.create(a).then((()=>{l.oR.success(s("successfully.updated")),k((0,g.EK)({...y,nextUrl:i})),I(`/${i}`),k((0,A.$F)({}))})).finally((()=>V(!1)))},form:F,initialValues:{...y.data},children:[(0,b.jsxs)(c.A,{gutter:12,children:[(0,b.jsx)(d.A,{span:12,children:(0,b.jsx)(r.A.Item,{label:s("title"),name:"title",rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(s("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(s("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(s("required")))}],children:(0,b.jsx)(m.A,{})})}),(0,b.jsx)(d.A,{span:6,children:(0,b.jsx)(r.A.Item,{label:s("image"),name:"images",rules:[{validator:(e,t)=>0===(null===w||void 0===w?void 0:w.length)?Promise.reject(new Error(s("required"))):Promise.resolve()}],children:(0,b.jsx)(f.A,{type:"brands",imageList:w,setImageList:P,form:F,multiple:!1})})}),(0,b.jsx)(d.A,{span:6,children:(0,b.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,b.jsx)(r.A.Item,{label:s("active"),name:"active",valuePropName:"checked",children:(0,b.jsx)(o.A,{})})})})]}),(0,b.jsx)(u.A,{type:"primary",htmlType:"submit",loading:S,children:s("submit")})]})})}}}]);