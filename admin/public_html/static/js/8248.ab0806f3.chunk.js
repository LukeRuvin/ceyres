"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8248],{26107:(e,t,n)=>{n.d(t,{A:()=>g});var l=n(9950),s=n(59233),a=n(87094),i=n(41988),r=n(23263),d=n(55902),o=n(40577),c=n(25933),u=n(48538),m=n(91854),p=n(67231),h=n(74623),v=n(28429),x=n(70030),A=n(31888),j=n(15249),b=n(85023),y=n(44414);const g=e=>{let{next:t,action_type:n=""}=e;const{t:g}=(0,x.B)(),[f]=s.A.useForm(),q=(0,m.wA)(),{uuid:k}=(0,v.g)(),N=(0,v.Zp)(),[I,w]=(0,l.useState)(null),{myShop:$}=(0,m.d4)((e=>e.myShop),m.bN),{activeMenu:F}=(0,m.d4)((e=>e.menu),m.bN),{defaultLang:C,languages:S}=(0,m.d4)((e=>e.formLang),m.bN),[E,P]=(0,l.useState)(!1);(0,l.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);q((0,h.Ok)({activeMenu:F,data:{...F.data,...e}}))}),[]);return(0,y.jsxs)(s.A,{layout:"vertical",form:f,initialValues:{active:!0,...F.data},onFinish:e=>{var l;P(!0);const s={...e,active:Number(e.active),shop_id:$.id,unit_id:null===(l=e.unit)||void 0===l?void 0:l.value,shop:void 0,addon:Number(1)};"edit"===n?function(e,n){p.A.update(k,n).then((()=>{q((0,h.Ok)({activeMenu:F,data:e})),t()})).catch((e=>w(e.response.data.params))).finally((()=>P(!1)))}(e,s):function(e,t){p.A.create(t).then((t=>{let{data:n}=t;q((0,h.W6)({id:`addons-${n.uuid}`,url:`seller/addon/${n.uuid}`,name:g("add.addons"),data:e,refetch:!1})),N(`/seller/addon/${n.uuid}?step=1`)})).catch((e=>w(e.response.data.params))).finally((()=>P(!1)))}(e,s)},className:"addon-menu",children:[(0,y.jsxs)(a.A,{gutter:12,children:[(0,y.jsxs)(i.A,{xs:24,sm:24,md:16,children:[(0,y.jsxs)(r.A,{title:g("basic.info"),children:[S.map((e=>(0,y.jsx)(s.A.Item,{label:g("name"),name:`title[${e.locale}]`,rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==C?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(g("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(g("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(g("required")))}],hidden:e.locale!==C,children:(0,y.jsx)(d.A,{})},"name"+e.id))),S.map((e=>(0,y.jsx)(s.A.Item,{label:g("description"),name:`description[${e.locale}]`,rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==C?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(g("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<5?Promise.reject(new Error(g("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(g("required")))}],hidden:e.locale!==C,children:(0,y.jsx)(j.A,{rows:4,span:4})},"description"+e.id)))]}),(0,y.jsx)(r.A,{title:g("price"),children:(0,y.jsxs)(a.A,{gutter:12,children:[(0,y.jsx)(i.A,{span:12,children:(0,y.jsx)(s.A.Item,{label:g("min.qty"),name:"min_qty",rules:[{required:!0,message:g("required")},{type:"number",min:0,message:g("must.be.positive")}],children:(0,y.jsx)(o.A,{className:"w-100"})})}),(0,y.jsx)(i.A,{span:12,children:(0,y.jsx)(s.A.Item,{label:g("max.qty"),name:"max_qty",rules:[{required:!0,message:g("required")},{type:"number",min:0,message:g("must.be.positive")}],children:(0,y.jsx)(o.A,{className:"w-100"})})}),(0,y.jsx)(i.A,{span:12,children:(0,y.jsx)(s.A.Item,{label:g("tax"),name:"tax",rules:[{required:!0,message:g("required")},{type:"number",min:0,max:100,message:g("must.be.between.0.and.100")}],children:(0,y.jsx)(o.A,{className:"w-100",addonAfter:"%"})})}),(0,y.jsx)(i.A,{span:12,children:(0,y.jsx)(s.A.Item,{label:g("active"),name:"active",valuePropName:"checked",children:(0,y.jsx)(c.A,{})})})]})})]}),(0,y.jsx)(i.A,{xs:24,sm:24,md:8,children:(0,y.jsx)(r.A,{title:g("addition"),children:(0,y.jsx)(s.A.Item,{label:g("unit"),name:"unit",rules:[{required:!0,message:g("required")}],children:(0,y.jsx)(b.D,{style:{width:"100%"},fetchOptions:function(e){const t={search:e,active:1};return A.A.getAll(t).then((e=>{let{data:t}=e;return function(e){return e.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}(t)}))}})})})})]}),(0,y.jsx)(u.A,{type:"primary",htmlType:"submit",loading:E,children:g("next")})]})}},28116:(e,t,n)=>{n.d(t,{A:()=>v});var l=n(9950),s=n(91524),a=n(80737),i=n(48538),r=n(90650),d=n(91854),o=n(28429),c=n(74623),u=n(70030),m=n(67231),p=n(14863),h=n(44414);const v=e=>{var t,n,v;let{prev:x}=e;const{t:A}=(0,u.B)(),{activeMenu:j}=(0,d.d4)((e=>e.menu),d.bN),{defaultLang:b,languages:y}=(0,d.d4)((e=>e.formLang),d.bN),g=(0,o.Zp)(),f=(0,d.wA)(),[q,k]=(0,l.useState)({}),[N,I]=(0,l.useState)(null),{uuid:w}=(0,o.g)(),{params:$}=(0,d.d4)((e=>e.addons),d.bN);function F(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,n=y.map((e=>{var n,l;return{[`title[${e.locale}]`]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.title,[`description[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...n)}return(0,l.useEffect)((()=>{!function(e){I(!0),m.A.getById(e).then((e=>{const t={...e.data,...F(e.data),properties:e.data.properties.map(((e,t)=>({id:t,[`key[${e.locale}]`]:e.key,[`value[${e.locale}]`]:e.value}))),translation:void 0,translations:void 0};k(t)})).finally((()=>I(!1)))}(w)}),[]),N?(0,h.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,h.jsx)(r.A,{size:"large",className:"py-5"})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(s.A,{title:A("product.info"),bordered:!0,children:[(0,h.jsx)(s.A.Item,{label:`${A("title")} (${b})`,span:3,children:q[`title[${b}]`]}),(0,h.jsx)(s.A.Item,{label:`${A("description")} (${b})`,span:3,children:q[`description[${b}]`]}),(0,h.jsx)(s.A.Item,{label:A("shop"),span:1.5,children:null===(t=q.shop)||void 0===t?void 0:t.translation.title}),(0,h.jsx)(s.A.Item,{label:A("unit"),span:1.5,children:null===(n=q.unit)||void 0===n?void 0:n.translation.title}),(0,h.jsx)(s.A.Item,{label:A("tax"),children:q.tax}),(0,h.jsx)(s.A.Item,{label:A("min.quantity"),children:q.min_qty}),(0,h.jsx)(s.A.Item,{label:A("max.quantity"),children:q.max_qty})]}),null===(v=q.stocks)||void 0===v?void 0:v.map(((e,t)=>e?(0,h.jsxs)(s.A,{bordered:!0,className:"mt-4",children:[(0,h.jsx)(s.A.Item,{label:A("price"),span:2,children:e.price}),(0,h.jsx)(s.A.Item,{label:A("quantity"),span:2,children:e.quantity}),e.extras.map(((e,t)=>{var n,l;return(0,h.jsx)(s.A.Item,{label:null===e||void 0===e||null===(n=e.group)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title,children:null===e||void 0===e?void 0:e.value},"extra"+t)}))]},"desc"+t):"")),(0,h.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,h.jsxs)(a.A,{children:[(0,h.jsx)(i.A,{onClick:x,children:A("prev")}),(0,h.jsx)(i.A,{type:"primary",onClick:function(){const e={...$},t="seller/addons";g(`/${t}`),f((0,c.EK)({...j,nextUrl:t})),f((0,p.fw)(e)),f((0,c.km)(j))},children:A("finish")})]})})]})}},31888:(e,t,n)=>{n.d(t,{A:()=>s});var l=n(82371);const s={getAll:e=>l.A.get("dashboard/seller/units/paginate",{params:e}),getById:(e,t)=>l.A.get(`dashboard/seller/units/${e}`,{params:t})}},64361:(e,t,n)=>{n.d(t,{A:()=>A});var l=n(9950),s=n(59233),a=n(87094),i=n(41988),r=n(40577),d=n(55902),o=n(80737),c=n(48538),u=n(91854),m=n(67231),p=n(70030),h=n(28429),v=n(74623),x=n(44414);const A=e=>{let{prev:t,next:n,current:A}=e;const{t:j}=(0,p.B)(),[b]=s.A.useForm(),{uuid:y}=(0,h.g)(),{activeMenu:g}=(0,u.d4)((e=>e.menu),u.bN),[f,q]=(0,l.useState)(null),k=(0,u.wA)();return(0,l.useEffect)((()=>{var e,t,n,l,s,a;k((0,v.Ms)(g)),b.setFieldsValue({price:null!==(e=g.data)&&void 0!==e&&null!==(t=e.stocks)&&void 0!==t&&t.length?g.data.stocks[0].price:null,quantity:null!==(n=g.data)&&void 0!==n&&null!==(l=n.stocks)&&void 0!==l&&l.length?g.data.stocks[0].quantity:null,sku:null!==(s=g.data)&&void 0!==s&&null!==(a=s.stocks)&&void 0!==a&&a.length?g.data.stocks[0].sku:null})}),[]),(0,x.jsxs)(s.A,{layout:"vertical",form:b,onFinish:e=>{let t;q(!0),t=[{price:e.price,quantity:e.quantity,sku:e.sku}],m.A.stocks(y,{extras:t}).then((()=>n())).finally((()=>q(!1)))},children:[(0,x.jsxs)(a.A,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},children:[(0,x.jsx)(i.A,{children:(0,x.jsx)(s.A.Item,{label:j("price"),name:"price",rules:[{required:!0,message:j("required")},{type:"number",min:1,message:j("must.be.at.least.1")}],children:(0,x.jsx)(r.A,{className:"w-100",style:{minWidth:200}})})}),(0,x.jsx)(i.A,{children:(0,x.jsx)(s.A.Item,{label:j("quantity"),name:"quantity",rules:[{required:!0,message:j("required")},{type:"number",min:1,message:j("must.be.at.least.1")}],children:(0,x.jsx)(r.A,{className:"w-100",style:{minWidth:200}})})}),(0,x.jsx)(i.A,{children:(0,x.jsx)(s.A.Item,{label:j("sku"),name:"sku",children:(0,x.jsx)(d.A,{style:{minWidth:200}})})})]}),(0,x.jsxs)(o.A,{className:"mt-4",children:[(0,x.jsx)(c.A,{onClick:t,children:j("prev")}),(0,x.jsx)(c.A,{type:"primary",htmlType:"submit",loading:!!f,children:j("next")})]})]})}},68218:(e,t,n)=>{n.d(t,{C:()=>l});const l=[{title:"addons",content:"First-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]},78248:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var l=n(9950),s=n(68218),a=n(86366),i=n(23263),r=n(28116),d=n(64361),o=n(26107),c=n(71999),u=n(91854),m=n(70030),p=n(44414);const{Step:h}=a.A,v=()=>{var e;const{t:t}=(0,m.B)(),{activeMenu:n}=(0,u.d4)((e=>e.menu),u.bN),[v,x]=(0,l.useState)((null===(e=n.data)||void 0===e?void 0:e.step)||0),A=()=>{x(v+1)},j=()=>{x(v-1)};return(0,p.jsxs)(i.A,{title:t("addon.add"),extra:(0,p.jsx)(c.A,{}),children:[(0,p.jsx)(a.A,{current:v,children:s.C.map((e=>(0,p.jsx)(h,{title:t(e.title)},e.title)))}),(0,p.jsxs)("div",{className:"steps-content",children:["First-content"===s.C[v].content&&(0,p.jsx)(o.A,{next:A}),"Third-content"===s.C[v].content&&(0,p.jsx)(d.A,{next:A,prev:j}),"Finish-content"===s.C[v].content&&(0,p.jsx)(r.A,{prev:j})]})]})}},85023:(e,t,n)=>{n.d(t,{D:()=>r});var l=n(9950),s=n(99674),a=n(90650),i=n(44414);const r=e=>{let{fetchOptions:t,refetch:n=!1,value:r,...d}=e;const[o,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)([]);"object"===typeof(null===r||void 0===r?void 0:r.label)&&null!==(null===r||void 0===r?void 0:r.label)&&(r.label=r.label.value);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.A,{labelInValue:!0,filterOption:!1,notFoundContent:o?(0,i.jsx)(a.A,{size:"small"}):"no results",value:r,...d,options:o?[]:u,onFocus:()=>{u.length&&!n||(c(!0),t().then((e=>{m(e),c(!1)})))},getPopupContainer:e=>e.parentNode})})}}}]);