"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3723],{43723:(e,l,a)=>{a.r(l),a.d(l,{default:()=>w});var t=a(9950),i=a(59233),s=a(23263),r=a(87094),n=a(41988),d=a(55902),c=a(99674),u=a(25933),o=a(48538),m=a(90650),p=a(85923),v=a(28429),h=a(71999),g=a(98591),j=a(91854),x=a(74623),A=a(70030),y=a(48970),f=a(61707),b=a(12598),k=a(44414);const w=()=>{var e,l;const{t:a}=(0,A.B)(),w=(0,v.Zp)(),q=(0,j.wA)(),{activeMenu:I}=(0,j.d4)((e=>e.menu),j.bN),[_,$]=(0,t.useState)(!1),[S,N]=(0,t.useState)(null!==(e=I.data)&&void 0!==e&&e.image?[null===(l=I.data)||void 0===l?void 0:l.image]:[]),[F]=i.A.useForm(),[L,z]=(0,t.useState)(!1),[E,O]=(0,t.useState)(null),{uuid:V}=(0,v.g)(),{defaultLang:B,languages:C}=(0,j.d4)((e=>e.formLang),j.bN);(0,t.useEffect)((()=>()=>{const e=F.getFieldsValue(!0);q((0,x.Ok)({activeMenu:I,data:e}))}),[]);const M=e=>({name:e,url:e});function K(e){if(!e)return{};const{translations:l}=e,a=C.map((e=>{var a,t;return{[`title[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.description}}));return Object.assign({},...a)}return(0,t.useEffect)((()=>{var e;I.refetch&&(e=V,$(!0),b.A.getById(e).then((e=>{var l;let a=e.data;const t={...a,...K(a),image:[M(a.img)],keywords:a.keywords.split(","),parent_id:{label:a.parent?null===a||void 0===a||null===(l=a.translation)||void 0===l?void 0:l.title:"---",value:a.parent?null===a||void 0===a?void 0:a.id:0,key:a.parent?null===a||void 0===a?void 0:a.id:0}};F.setFieldsValue(t),N([M(a.img)])})).finally((()=>{$(!1),q((0,x.km)(I))})))}),[I.refetch]),(0,k.jsx)(s.A,{title:a("recipe.category.clone"),extra:(0,k.jsx)(h.A,{}),children:_?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,k.jsx)(m.A,{size:"large",className:"mt-5 pt-5"})}):(0,k.jsxs)(i.A,{name:"basic",layout:"vertical",onFinish:e=>{var l,t,i;z(!0);const s={...e,type:"receipt",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:0===(null===(l=e.parent_id)||void 0===l?void 0:l.value)?null:null===(t=e.parent_id)||void 0===t?void 0:t.value,"images[0]":null===(i=S[0])||void 0===i?void 0:i.name},r="seller/recipe-categories";b.A.create(s).then((()=>{p.oR.success(a("successfully.updated")),q((0,x.EK)({...I,nextUrl:r})),q((0,f.ss)()),w(`/${r}`)})).catch((e=>O(e.response.data.params))).finally((()=>z(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...I.data},form:F,children:[(0,k.jsxs)(r.A,{gutter:12,children:[(0,k.jsx)(n.A,{span:12,children:C.map(((e,l)=>(0,k.jsx)(i.A.Item,{label:a("name"),name:`title[${e.locale}]`,help:E&&E[`title.${B}`]?E[`title.${B}`][0]:null,validateStatus:E?"error":"success",rules:[{required:e.locale===B,message:a("required")}],hidden:e.locale!==B,children:(0,k.jsx)(d.A,{})},e.title+l)))}),(0,k.jsx)(n.A,{span:12,children:C.map(((e,l)=>(0,k.jsx)(i.A.Item,{label:a("description"),name:`description[${e.locale}]`,rules:[{required:e.locale===B,message:a("required")}],hidden:e.locale!==B,children:(0,k.jsx)(g.A,{rows:4})},e.locale+l)))}),(0,k.jsx)(n.A,{span:12,children:(0,k.jsx)(i.A.Item,{label:a("keywords"),name:"keywords",rules:[{required:!0,message:a("required")}],children:(0,k.jsx)(c.A,{mode:"tags",style:{width:"100%"}})})}),(0,k.jsx)(n.A,{span:12,children:(0,k.jsx)(i.A.Item,{label:a("parent.category"),name:"parent_id",rules:[{required:!0,message:a("required")}],help:E&&E.parent_id?E.parent_id[0]:null,validateStatus:E?"error":"success",children:(0,k.jsx)(c.A,{children:(0,k.jsx)(c.A.Option,{value:0,children:"---"})})})}),(0,k.jsx)(n.A,{span:4,children:(0,k.jsx)(i.A.Item,{label:a("image"),children:(0,k.jsx)(y.A,{type:"categories",imageList:S,setImageList:N,form:F,multiple:!1})})}),(0,k.jsx)(n.A,{span:2,children:(0,k.jsx)(i.A.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,k.jsx)(u.A,{})})})]}),(0,k.jsx)(o.A,{type:"primary",htmlType:"submit",loading:L,children:a("submit")})]})})}}}]);