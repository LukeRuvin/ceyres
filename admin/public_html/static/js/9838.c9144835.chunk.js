"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9838],{31281:(e,t,a)=>{function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const l=e.map((e=>({[e.locale]:""===t[`${a}[${e.locale}]`]?void 0:t[`${a}[${e.locale}]`]})));return Object.assign({},...l)}a.d(t,{A:()=>l})},47992:(e,t,a)=>{a.d(t,{G:()=>c});var l=a(9950),r=a(95491),n=a.n(r),i=a(99674),s=a(90650),o=a(44414);const c=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:r,refetchOptions:c=!1,...d}=e;const[u,m]=(0,l.useState)(!1),[v,p]=(0,l.useState)([]),h=(0,l.useMemo)((()=>n()((e=>{p([]),m(!0),t(e).then((e=>{p(e),m(!1)}))}),a)),[t,a]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),r&&r()},notFoundContent:u?(0,o.jsx)(s.A,{size:"small"}):"no results",...d,options:v,onFocus:()=>{v.length&&!c||h("")}})}},75670:(e,t,a)=>{a.d(t,{A:()=>v});var l=a(9950),r=a(59233),n=a(70030),i=a(36455),s=a(19181),o=a.n(s),c=a(63620),d=a(64924),u=a(85923),m=a(44414);function v(e){let{form:t,lang:a,languages:s}=e;const{t:v}=(0,n.B)();function p(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,a)=>{const l=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(v("min.2.mb")),a()),l.append("image",e),l.append("type","blogs"),d.A.upload(l).then((e=>{let{data:a}=e;t({default:`${c.sE+a.title}`})})).catch((e=>{a(e)}))}))}))}}(e)}return(0,m.jsx)(l.Fragment,{children:s.map((e=>(0,m.jsx)(r.A.Item,{label:v("description"),name:`description[${e.locale}]`,valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===a,message:v("required")},{validator:(e,t)=>t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(v("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<5?Promise.reject(new Error(v("must.be.at.least.5"))):t&&(null===t||void 0===t?void 0:t.trim().length)>200?Promise.reject(new Error(v("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==a,children:(0,m.jsx)(i.CKEditor,{editor:o(),config:{extraPlugins:[p]},onBlur:(a,l)=>{const r=l.getData();t.setFieldsValue({[`description[${e.value}]`]:r})}})},"desc"+e.locale)))})}},99838:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var l=a(9950),r=a(59233),n=a(23263),i=a(87094),s=a(41988),o=a(55902),c=a(25933),d=a(48538),u=a(90650),m=a(85923),v=a(28429),p=a(71999),h=a(91854),g=a(74623),j=a(33774),A=a(70030),f=a(42362),x=a(47992),b=a(62572),y=a(75670),w=a(31281),P=a(44414);const E=()=>{const{t:e}=(0,A.B)(),t=(0,v.Zp)(),a=(0,h.wA)(),{activeMenu:E}=(0,h.d4)((e=>e.menu),h.bN),[$,F]=(0,l.useState)(!1),[N]=r.A.useForm(),[k,C]=(0,l.useState)(!1),{id:I}=(0,v.g)(),{params:O}=(0,h.d4)((e=>e.career),h.bN),{defaultLang:q,languages:S}=(0,h.d4)((e=>e.formLang),h.bN);function V(e){if(!e)return{};const{translations:t}=e,a=S.map((e=>{var a,l,r;return{[`title[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description,[`address[${e.locale}]`]:null===(r=t.find((t=>t.locale===e.locale)))||void 0===r?void 0:r.address}}));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=N.getFieldsValue(!0);a((0,g.Ok)({activeMenu:E,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;E.refetch&&(e=I,F(!0),j.A.getById(e).then((e=>{var t,a;let l=e.data;const r={...l,...V(l),category_id:{label:l.category.translation.title,value:l.category.id},active:!(null===e||void 0===e||null===(t=e.data)||void 0===t||!t.active)&&(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.active)};N.setFieldsValue(r)})).finally((()=>{F(!1),a((0,g.km)(E))})))}),[E.refetch]),(0,P.jsx)(n.A,{title:e("edit.career"),extra:(0,P.jsx)(p.A,{}),children:$?(0,P.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,P.jsx)(u.A,{size:"large",className:"mt-5 pt-5"})}):(0,P.jsxs)(r.A,{name:"basic",layout:"vertical",onFinish:l=>{C(!0);const r={...l,active:Number(l.active),category_id:l.category_id.value,type:l.type,title:(0,w.A)(S,l,"title"),description:(0,w.A)(S,l,"description"),address:(0,w.A)(S,l,"address")},n="catalog/career";j.A.update(I,r).then((()=>{m.oR.success(e("successfully.updated")),a((0,g.EK)({...E,nextUrl:n})),a((0,f.R)(O)),t(`/${n}`)})).catch((e=>console.error(e.response.data.params))).finally((()=>C(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...E.data},form:N,children:[(0,P.jsxs)(i.A,{gutter:12,children:[(0,P.jsx)(s.A,{span:12,children:S.map(((t,a)=>(0,P.jsx)(r.A.Item,{label:e("name"),name:`title[${t.locale}]`,rules:[{validator:(a,l)=>l||(null===t||void 0===t?void 0:t.locale)!==q?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(e("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(e("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(e("required")))}],hidden:t.locale!==q,children:(0,P.jsx)(o.A,{placeholder:e("name")})},t.title+a)))}),(0,P.jsx)(s.A,{span:12}),(0,P.jsx)(s.A,{span:24,children:(0,P.jsx)(y.A,{form:N,lang:q,languages:S})}),(0,P.jsx)(s.A,{span:12,children:(0,P.jsx)(r.A.Item,{label:e("category"),name:"category_id",rules:[{required:!0,message:e("required")}],children:(0,P.jsx)(x.G,{fetchOptions:async function(e){const t={search:e.lenght>0?e:void 0,type:"career",active:1};return b.A.getAll(t).then((e=>e.data.map((e=>({label:e.translation?e.translation.title:"no name",value:e.id})))))}})})}),(0,P.jsx)(s.A,{span:12,children:S.map(((t,a)=>(0,P.jsx)(r.A.Item,{label:e("location"),name:`address[${t.locale}]`,rules:[{validator:(a,l)=>l||(null===t||void 0===t?void 0:t.locale)!==q?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(e("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(e("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(e("required")))}],hidden:t.locale!==q,children:(0,P.jsx)(o.A,{})},t.locale+a)))}),(0,P.jsx)(s.A,{span:12,children:(0,P.jsx)(r.A.Item,{label:e("active"),name:"active",valuePropName:"checked",children:(0,P.jsx)(c.A,{})})}),(0,P.jsx)(s.A,{span:12}),(0,P.jsx)(s.A,{span:24,className:"mb-5"})]}),(0,P.jsx)(d.A,{type:"primary",htmlType:"submit",loading:k,children:e("submit")})]})})}}}]);