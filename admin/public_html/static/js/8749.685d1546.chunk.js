"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8749],{31281:(e,l,t)=>{function a(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.map((e=>({[e.locale]:""===l[`${t}[${e.locale}]`]?void 0:l[`${t}[${e.locale}]`]})));return Object.assign({},...a)}t.d(l,{A:()=>a})},88754:(e,l,t)=>{t.d(l,{A:()=>g});var a=t(9950),s=t(36455),i=t(19181),n=t.n(i),c=t(59233),r=t(70030),d=t(64924),o=t(63620),u=t(44414);const g=e=>{let{getLanguageFields:l,form:t,lang:i,languages:g}=e;const{t:m}=(0,r.B)();function h(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((l,t)=>{const a=new FormData;e.file.then((e=>{a.append("image",e),a.append("type","blogs"),d.A.upload(a).then((e=>{let{data:t}=e;l({default:`${o.sE+t.title}`})})).catch((e=>{t(e)}))}))}))}}(e)}return(0,u.jsx)(a.Fragment,{children:g.map((e=>(0,u.jsx)(c.A.Item,{label:m("description"),name:`description[${e.locale}]`,valuePropName:"data",getValueFromEvent:(e,l)=>l.getData(),rules:[{required:e.locale===i,message:m("required")}],hidden:e.locale!==i,children:(0,u.jsx)(s.CKEditor,{editor:n(),data:l()[`description[${e.value}]`],config:{extraPlugins:[h]},onBlur:(l,a)=>{const s=a.getData();t.setFieldsValue({[`description[${e.value}]`]:s})}})},"desc"+e.locale)))})}},98749:(e,l,t)=>{t.r(l),t.d(l,{default:()=>q});var a=t(9950),s=t(28429),i=t(85923),n=t(59233),c=t(23263),r=t(87094),d=t(41988),o=t(55902),u=t(25933),g=t(80737),m=t(48538),h=t(90650),p=t(91854),A=t(74623),v=t(12044),f=t(58920),x=t(71999),j=t(31281),b=t(62466),y=t(70030),$=t(88754),F=t(48970),k=t(44414);function q(){var e,l;const{t:t}=(0,y.B)(),{activeMenu:q}=(0,p.d4)((e=>e.menu),p.bN),{languages:I,defaultLang:N}=(0,p.d4)((e=>e.formLang),p.bN),E=(0,p.wA)(),[L]=n.A.useForm(),_=(0,s.Zp)(),{uuid:w}=(0,s.g)(),[V,B]=(0,a.useState)(null!==(e=q.data)&&void 0!==e&&e.image?[null===(l=q.data)||void 0===l?void 0:l.image]:[]),[P,z]=(0,a.useState)(!1),[C,D]=(0,a.useState)(!1);(0,a.useEffect)((()=>()=>{const e=L.getFieldsValue(!0);E((0,A.Ok)({activeMenu:q,data:e}))}),[]);function O(e){if(!e)return{};const{translations:l}=e,t=I.map((e=>{var t,a,s;return{[`title[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,[`description[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.description,[`short_desc[${e.locale}]`]:null===(s=l.find((l=>l.locale===e.locale)))||void 0===s?void 0:s.short_desc}}));return Object.assign({},...t)}return(0,a.useEffect)((()=>{q.refetch&&(e=>{D(!0),f.A.getById(e).then((e=>{let l=e.data;L.setFieldsValue({...l,...O(l),image:[(0,b.A)(l.img)]}),B([(0,b.A)(l.img)])})).finally((()=>{D(!1),E((0,A.km)(q))}))})(w)}),[q.refetch]),(0,k.jsx)(c.A,{title:t("clone.blog"),extra:(0,k.jsx)(x.A,{}),children:C?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsx)(h.A,{size:"large",className:"py-5"})}):(0,k.jsxs)(n.A,{name:"blog-edit",layout:"vertical",onFinish:e=>{var l;const a={type:"blog",active:e.active?1:0,images:[null===(l=V[0])||void 0===l?void 0:l.name],title:(0,j.A)(I,e),description:(0,j.A)(I,e,"description"),short_desc:(0,j.A)(I,e,"short_desc")};z(!0);const s="blogs";f.A.create(a).then((()=>{i.oR.success(t("successfully.created")),E((0,A.EK)({...q,nextUrl:s})),_(`/${s}`),E((0,v.k)({}))})).finally((()=>z(!1)))},form:L,initialValues:{active:!0,...q.data},children:[(0,k.jsxs)(r.A,{gutter:12,children:[(0,k.jsx)(d.A,{span:12,children:I.map((e=>(0,k.jsx)(n.A.Item,{label:t("title"),name:`title[${e.locale}]`,rules:[{required:e.locale===N,message:t("requried")}],hidden:e.locale!==N,children:(0,k.jsx)(o.A,{})},"title"+e.locale)))}),(0,k.jsx)(d.A,{children:(0,k.jsx)(n.A.Item,{label:t("image"),rules:[{required:!V.length,message:t("required")}],children:(0,k.jsx)(F.A,{type:"blogs",imageList:V,setImageList:B,form:L,length:"1",multiple:!1})})}),(0,k.jsx)(d.A,{children:(0,k.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,k.jsx)(n.A.Item,{label:t("active"),name:"active",valuePropName:"checked",children:(0,k.jsx)(u.A,{})})})}),(0,k.jsx)(d.A,{span:24,children:I.map((e=>(0,k.jsx)(n.A.Item,{label:t("short.description"),name:`short_desc[${e.locale}]`,rules:[{required:e.locale===N,message:t("required")}],hidden:e.locale!==N,children:(0,k.jsx)(o.A,{})},"short_desc"+e.locale)))}),(0,k.jsx)(d.A,{span:24,children:(0,k.jsx)($.A,{languages:I,form:L,lang:N,getLanguageFields:O})})]}),(0,k.jsx)(g.A,{children:(0,k.jsx)(m.A,{type:"primary",htmlType:"submit",loading:P,children:t("save")})})]})})}}}]);