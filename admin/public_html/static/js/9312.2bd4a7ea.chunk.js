"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9312],{39312:(e,a,l)=>{l.r(a),l.d(a,{default:()=>q});var t=l(9950),s=l(59233),i=l(23263),r=l(87094),n=l(41988),d=l(55902),c=l(99674),u=l(25933),o=l(48538),m=l(90650),p=l(85923),v=l(28429),h=l(71999),g=l(98591),x=l(91854),A=l(74623),j=l(63620),y=l(70030),f=l(48970),b=l(61707),k=l(12598),w=l(44414);const q=()=>{var e,a;const{t:l}=(0,y.B)(),q=(0,v.Zp)(),I=(0,x.wA)(),{activeMenu:$}=(0,x.d4)((e=>e.menu),x.bN),[_,N]=(0,t.useState)(!1),[S,E]=(0,t.useState)(null!==(e=$.data)&&void 0!==e&&e.image?[null===(a=$.data)||void 0===a?void 0:a.image]:[]),[z]=s.A.useForm(),[F,L]=(0,t.useState)(!1),[O,V]=(0,t.useState)(null),B=(0,v.zy)(),{uuid:C}=(0,v.g)(),{params:K}=(0,x.d4)((e=>e.category),x.bN),{defaultLang:M,languages:R}=(0,x.d4)((e=>e.formLang),x.bN);(0,t.useEffect)((()=>()=>{const e=z.getFieldsValue(!0);I((0,A.Ok)({activeMenu:$,data:e}))}),[]);const U=e=>({name:e,url:j.sE+e});function P(e){if(!e)return{};const{translations:a}=e,l=R.map((e=>{var l,t;return{[`title[${e.locale}]`]:null===(l=a.find((a=>a.locale===e.locale)))||void 0===l?void 0:l.title,[`description[${e.locale}]`]:null===(t=a.find((a=>a.locale===e.locale)))||void 0===t?void 0:t.description}}));return Object.assign({},...l)}return(0,t.useEffect)((()=>{var e;$.refetch&&(e=C,N(!0),k.A.getById(e).then((e=>{var a;let l=e.data;const t={...l,...P(l),image:[U(l.img)],keywords:l.keywords.split(","),parent_id:{label:l.parent?null===l||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title:"---",value:l.parent?null===l||void 0===l?void 0:l.id:0,key:l.parent?null===l||void 0===l?void 0:l.id:0}};z.setFieldsValue(t),E([U(l.img)])})).finally((()=>{N(!1),I((0,A.km)($))})))}),[$.refetch]),(0,w.jsx)(i.A,{title:l("edit.category"),extra:(0,w.jsx)(h.A,{}),children:_?(0,w.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,w.jsx)(m.A,{size:"large",className:"mt-5 pt-5"})}):(0,w.jsxs)(s.A,{name:"basic",layout:"vertical",onFinish:e=>{var a,t,s;L(!0);const i={...e,type:"receipt",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:0===(null===(a=e.parent_id)||void 0===a?void 0:a.value)?null:null===(t=e.parent_id)||void 0===t?void 0:t.value,"images[0]":null===(s=S[0])||void 0===s?void 0:s.name},r="seller/recipe-categories";"edit"===B.state?k.A.update(C,i).then((()=>{p.oR.success(l("successfully.updated")),I((0,A.EK)({...$,nextUrl:r})),I((0,b.ss)()),q(`/${r}`)})).catch((e=>V(e.response.data.params))).finally((()=>L(!1))):k.A.create(i).then((()=>{p.oR.success(l("successfully.updated")),I((0,A.EK)({...$,nextUrl:r})),I((0,b.ss)()),q(`/${r}`)})).catch((e=>V(e.response.data.params))).finally((()=>L(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...$.data},form:z,children:[(0,w.jsxs)(r.A,{gutter:12,children:[(0,w.jsx)(n.A,{span:12,children:R.map(((e,a)=>(0,w.jsx)(s.A.Item,{label:l("name"),name:`title[${e.locale}]`,help:O&&O[`title.${M}`]?O[`title.${M}`][0]:null,validateStatus:O?"error":"success",rules:[{required:e.locale===M,message:l("required")}],hidden:e.locale!==M,children:(0,w.jsx)(d.A,{})},e.title+a)))}),(0,w.jsx)(n.A,{span:12,children:R.map(((e,a)=>(0,w.jsx)(s.A.Item,{label:l("description"),name:`description[${e.locale}]`,rules:[{required:e.locale===M,message:l("required")}],hidden:e.locale!==M,children:(0,w.jsx)(g.A,{rows:4})},e.locale+a)))}),(0,w.jsx)(n.A,{span:12,children:(0,w.jsx)(s.A.Item,{label:l("keywords"),name:"keywords",rules:[{required:!0,message:l("required")}],children:(0,w.jsx)(c.A,{mode:"tags",style:{width:"100%"}})})}),(0,w.jsx)(n.A,{span:12,children:(0,w.jsx)(s.A.Item,{label:l("parent.category"),name:"parent_id",rules:[{required:!0,message:l("required")}],help:O&&O.parent_id?O.parent_id[0]:null,validateStatus:O?"error":"success",children:(0,w.jsx)(c.A,{children:(0,w.jsx)(c.A.Option,{value:0,children:"---"})})})}),(0,w.jsx)(n.A,{span:4,children:(0,w.jsx)(s.A.Item,{label:l("image"),children:(0,w.jsx)(f.A,{type:"categories",imageList:S,setImageList:E,form:z,multiple:!1})})}),(0,w.jsx)(n.A,{span:2,children:(0,w.jsx)(s.A.Item,{label:l("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(u.A,{})})})]}),(0,w.jsx)(o.A,{type:"primary",htmlType:"submit",loading:F,children:l("submit")})]})})}}}]);