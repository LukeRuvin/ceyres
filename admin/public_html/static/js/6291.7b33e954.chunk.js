"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[6291],{8168:(e,i,t)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(i,{A:()=>l})},47992:(e,i,t)=>{t.d(i,{G:()=>s});var l=t(9950),n=t(95491),d=t.n(n),a=t(99674),o=t(90650),r=t(44414);const s=e=>{let{fetchOptions:i,debounceTimeout:t=400,onClear:n,refetchOptions:s=!1,...u}=e;const[c,v]=(0,l.useState)(!1),[p,h]=(0,l.useState)([]),f=(0,l.useMemo)((()=>d()((e=>{h([]),v(!0),i(e).then((e=>{h(e),v(!1)}))}),t)),[i,t]);return(0,r.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:f,onClear:()=>{f(""),n&&n()},notFoundContent:c?(0,r.jsx)(o.A,{size:"small"}):"no results",...u,options:p,onFocus:()=>{p.length&&!s||f("")}})}},53774:(e,i,t)=>{function l(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const t=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===i?`${t} ${e}`:`${e} ${t}`}t.r(i),t.d(i,{default:()=>l})},76291:(e,i,t)=>{t.r(i),t.d(i,{default:()=>_});var l=t(70030),n=t(91854),d=t(9950),a=t(53774),o=t(12916),r=t(48538),s=t(23263),u=t(52913),c=t(12678),v=t(8168),p=t(74623),h=t(88986),f=t(80737),g=t(47992),m=t(55660),x=t(53271),A=t(44414);const j=()=>{const{t:e}=(0,l.B)(),i=(0,n.wA)(),{activeMenu:t}=(0,n.d4)((e=>e.menu),n.bN),d=e=>{const l=t.data;i((0,p.Ok)({activeMenu:t,data:{...l,...e}}))};return(0,A.jsxs)(f.A,{wrap:!0,children:[(0,A.jsx)(g.G,{fetchOptions:e=>{const i={perPage:10,page:1,search:e};return m.A.getAll(i).then((e=>{var i;return null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>{var i;return{label:null===e||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},className:"w-200px",placeholder:e("select.shop"),onChange:e=>d({shop_id:null===e||void 0===e?void 0:e.value})}),(0,A.jsx)(g.G,{fetchOptions:e=>{const i={parPage:10,page:1,search:e};return x.A.getAll(i).then((e=>{var i;return null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>({label:`${null===e||void 0===e?void 0:e.firstname} ${null===e||void 0===e?void 0:e.lastname}`,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))},className:"w-200px",placeholder:e("select.user"),onChange:e=>d({user_id:null===e||void 0===e?void 0:e.value})})]})};var C=t(82706),b=t(91524),w=t(81446),y=t(29720);function k(e){var i,t,o,s,u,c,v,p;let{id:h,handleCancel:f}=e;const[g,m]=(0,d.useState)({}),[x,j]=(0,d.useState)(!1),{t:k}=(0,l.B)(),{defaultCurrency:I}=(0,n.d4)((e=>e.currency),n.bN);return(0,d.useEffect)((()=>{!function(e){j(!0),y.A.getById(e).then((e=>m(e.data))).finally((()=>j(!1)))}(h)}),[h]),(0,A.jsx)(C.A,{visible:!!h,title:k("gift.card"),onCancel:f,footer:(0,A.jsx)(r.A,{type:"default",onClick:f,children:k("cancel")}),children:x?(0,A.jsx)(w.A,{}):(0,A.jsxs)(b.A,{bordered:!0,children:[(0,A.jsx)(b.A.Item,{span:3,label:k("id"),children:g.id}),(0,A.jsx)(b.A.Item,{span:3,label:k("gift.card"),children:null===(i=g.giftCart)||void 0===i||null===(t=i.translation)||void 0===t?void 0:t.title}),(0,A.jsx)(b.A.Item,{span:3,label:k("gift.card.id"),children:null===(o=g.giftCart)||void 0===o?void 0:o.id}),(0,A.jsx)(b.A.Item,{span:3,label:k("time"),children:null===(s=g.giftCart)||void 0===s?void 0:s.time}),(0,A.jsx)(b.A.Item,{span:3,label:k("shop.id"),children:null===(u=g.giftCart)||void 0===u?void 0:u.shop_id}),(0,A.jsx)(b.A.Item,{span:3,label:k("price"),children:(0,a.default)(null===g||void 0===g?void 0:g.price,null===I||void 0===I?void 0:I.symbol,null===I||void 0===I?void 0:I.position)}),(0,A.jsx)(b.A.Item,{span:3,label:k("user.id"),children:null===(c=g.user)||void 0===c?void 0:c.id}),(0,A.jsxs)(b.A.Item,{span:3,label:k("user"),children:[null===(v=g.user)||void 0===v?void 0:v.firstname," ",null===(p=g.user)||void 0===p?void 0:p.lastname]})]})})}var I=t(22428);const _=function(){var e,i,t;const{t:f}=(0,l.B)(),g=(0,n.wA)(),{activeMenu:m}=(0,n.d4)((e=>e.menu),n.bN),[x,C]=(0,d.useState)({shop:{}}),{userGiftCards:b,loading:w,meta:y,params:_}=(0,n.d4)((e=>e.userGiftCards),n.bN),{defaultCurrency:$}=(0,n.d4)((e=>e.currency),n.bN),[S,N]=(0,d.useState)(null),O=m.data,P={sort:null===O||void 0===O?void 0:O.sort,column:null===O||void 0===O?void 0:O.column,perPage:null===O||void 0===O?void 0:O.perPage,page:null===O||void 0===O?void 0:O.page,shop_id:null===O||void 0===O?void 0:O.shop_id,user_id:null===O||void 0===O?void 0:O.user_id},z=[{title:f("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:f("user"),dataIndex:"user",key:"user",is_show:!0,render:(e,i)=>{var t,l;return`${null===(t=i.user)||void 0===t?void 0:t.firstname} ${null===(l=i.user)||void 0===l?void 0:l.lastname}`}},{title:f("gift.card"),dataIndex:"giftCart",key:"gift.card",is_show:!0,render:(e,i)=>{var t,l;return null===i||void 0===i||null===(t=i.giftCart)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title}},{title:f("time"),dataIndex:"time",key:"time",is_show:!0,render:(e,i)=>{var t;return null===i||void 0===i||null===(t=i.giftCart)||void 0===t?void 0:t.time}},{title:f("price"),dataIndex:"price",key:"price",is_show:!0,render:(e,i)=>(0,a.default)(null===i||void 0===i?void 0:i.price,null===$||void 0===$?void 0:$.symbol,null===$||void 0===$?void 0:$.position)},{title:f("transaction"),dataIndex:"transaction",key:"transaction",is_show:!0,render:(e,i)=>{var t;const l=(null===(t=i.transaction)||void 0===t?void 0:t.status)||"not.paid";return"not.paid"===l?(0,A.jsx)(o.A,{children:f(l)}):"paid"===l?(0,A.jsx)(o.A,{color:"cyan",children:f(l)}):(0,A.jsx)(o.A,{color:"warning",children:f(l)})}},{title:f("options"),key:"options",is_show:!0,render:(e,i)=>(0,A.jsx)(r.A,{icon:(0,A.jsx)(c.A,{}),onClick:()=>F(i)})}],F=e=>{N(e.id)};return(0,h.A)((()=>{g((0,I.$)(P))}),[m.data]),(0,d.useEffect)((()=>{m.refetch&&(g((0,p.km)(m)),g((0,I.$)()))}),[m.refetch]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.A,{children:(0,A.jsx)(j,{filters:x,setFilters:C})}),(0,A.jsx)(s.A,{title:f("user.gift.cards"),children:(0,A.jsx)(u.A,{scroll:{x:!0},columns:null===z||void 0===z?void 0:z.filter((e=>e.is_show)),dataSource:b,loading:w,pagination:{pageSize:_.perPage,page:(null===(e=m.data)||void 0===e?void 0:e.page)||1,total:y.total,defaultCurrent:null===(i=m.data)||void 0===i?void 0:i.page,current:null===(t=m.data)||void 0===t?void 0:t.page},rowKey:e=>e.id,onChange:function(e,i,t){const{pageSize:l,current:n}=e,{field:d,order:a}=t,o=(0,v.A)(a);g((0,p.Ok)({activeMenu:m,data:{...O,perPage:l,page:n,column:d,sort:o}}))}})}),S&&(0,A.jsx)(k,{id:S,handleCancel:()=>N(null)})]})}}}]);