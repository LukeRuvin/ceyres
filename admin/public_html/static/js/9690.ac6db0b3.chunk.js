"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9690],{19690:(e,l,i)=>{i.r(l),i.d(l,{default:()=>d});var s=i(59233),n=i(23800),o=i(35523),a=i(44414);function d(){const[e]=s.A.useForm();return(0,a.jsx)(o.A,{form:e,handleSubmit:e=>n.A.create(e)})}},31281:(e,l,i)=>{function s(e,l){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const s=e.map((e=>({[e.locale]:""===l[`${i}[${e.locale}]`]?void 0:l[`${i}[${e.locale}]`]})));return Object.assign({},...s)}i.d(l,{A:()=>s})},35523:(e,l,i)=>{i.d(l,{A:()=>I});var s=i(23263),n=i(59233),o=i(87094),a=i(41988),d=i(55902),r=i(40577),t=i(99674),u=i(48538),v=i(98591),c=i(9950),m=i(91854),h=i(70030),p=i(47992),A=i(54764),j=i(55660),x=i(71999),b=(i(25825),i(31281)),g=i(86644),y=i(74623),f=i(28429),q=i(44414);const S=["1 day","3 days","7 days","14 days","1 month","2 month","3 month","4 month","5 month","6 month","8 month","18 months","1 year","2 years","5 years"],w=[{label:"limited",value:1,key:1},{label:"unlimited",value:2,key:2}],I=e=>{var l,i,I;let{form:k,handleSubmit:O}=e;const{t:C}=(0,h.B)(),P=(0,m.wA)(),$=(0,f.Zp)(),{paramsData:_}=(0,f.zy)(),{id:F}=(0,f.g)(),{defaultLang:L,languages:z}=(0,m.d4)((e=>e.formLang),m.bN),{activeMenu:N}=(0,m.d4)((e=>e.menu),m.bN),[V,G]=(0,c.useState)((null===(l=N.data)||void 0===l?void 0:l.shop)||[]),[M,T]=(0,c.useState)((null===(i=N.data)||void 0===i?void 0:i.sessions)||w[1].value||0),[B,D]=(0,c.useState)((null===(I=N.data)||void 0===I?void 0:I.color)||""),[E,K]=(0,c.useState)(!1);return(0,q.jsx)(s.A,{title:C(F?"edit.membership":"add.membership"),extra:(0,q.jsx)(x.A,{}),children:(0,q.jsxs)(n.A,{form:k,onFinish:e=>{var l,i,s;const n={shop_id:null===e||void 0===e||null===(l=e.shop)||void 0===l?void 0:l.value,price:null===e||void 0===e?void 0:e.price,time:null===e||void 0===e?void 0:e.time,sessions:(null===e||void 0===e||null===(i=e.sessions)||void 0===i?void 0:i.value)||(null===e||void 0===e?void 0:e.sessions),sessions_count:null===e||void 0===e?void 0:e.sessions_count,title:(0,b.A)(z,e,"title"),description:(0,b.A)(z,e,"description"),term:(0,b.A)(z,e,"term"),services:null===e||void 0===e||null===(s=e.services)||void 0===s?void 0:s.map((e=>({service_id:e.value})))};2===(null===n||void 0===n?void 0:n.sessions)&&(null===n||void 0===n||delete n.sessions_count),O(n).then((()=>{const e="membership";(0,m.vA)((()=>{P((0,y.EK)({...N,nextUrl:e})),P((0,g.jm)(_))})),$(`/${e}`)})).final((()=>K(!1)))},layout:"vertical",initialValues:{sessions:w[1]},children:[(0,q.jsxs)(o.A,{gutter:12,children:[(0,q.jsx)(a.A,{span:24,children:z.map((e=>(0,q.jsx)(n.A.Item,{label:C("title"),name:`title[${null===e||void 0===e?void 0:e.locale}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==L,rules:[{required:(null===e||void 0===e?void 0:e.locale)===L,message:C("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(C("no.empty.space")):Promise.resolve()}],children:(0,q.jsx)(d.A,{maxLength:100})},"title"+(null===e||void 0===e?void 0:e.id))))}),(0,q.jsx)(a.A,{span:12,children:z.map((e=>(0,q.jsx)(n.A.Item,{label:C("description"),name:`description[${null===e||void 0===e?void 0:e.locale}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==L,rules:[{required:(null===e||void 0===e?void 0:e.locale)===L,message:C("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(C("no.empty.space")):Promise.resolve()}],children:(0,q.jsx)(v.A,{rows:3,maxLength:300})},"description"+e.id)))}),(0,q.jsx)(a.A,{span:12,children:z.map((e=>(0,q.jsx)(n.A.Item,{label:C("term"),name:`term[${null===e||void 0===e?void 0:e.locale}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==L,rules:[{required:(null===e||void 0===e?void 0:e.locale)===L,message:C("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(C("no.empty.space")):Promise.resolve()}],children:(0,q.jsx)(v.A,{rows:3,maxLength:300})},"term"+e.id)))}),(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(n.A.Item,{label:C("shop"),name:"shop",rules:[{required:!0,message:C("required")}],children:(0,q.jsx)(p.G,{fetchOptions:e=>{var l;const i={page:1,perPage:20,status:"approved",search:e};return null!==e&&void 0!==e&&null!==(l=e.trim())&&void 0!==l&&l.length||delete i.search,j.A.getAll(i).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},onSelect:e=>{G(e),k.setFieldsValue({services:[]})},onClear:()=>{G([]),k.setFieldsValue({services:[]})}})},"shop")}),(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(n.A.Item,{label:C("services"),name:"services",rules:[{required:!0,message:C("required")}],children:(0,q.jsx)(p.G,{allowClear:!1,fetchOptions:e=>{var l;const i={page:1,perPage:20,shop_id:null===V||void 0===V?void 0:V.value,search:e};return null!==e&&void 0!==e&&null!==(l=e.trim())&&void 0!==l&&l.length||delete i.search,A.A.getAll(i).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},mode:"multiple",refetchOptions:!0,disabled:!(null!==V&&void 0!==V&&V.value)})},"services")}),(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(n.A.Item,{label:C("price"),name:"price",rules:[{required:!0,message:C("required")}],children:(0,q.jsx)(r.A,{min:0,className:"w-100"})},"price")}),(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(n.A.Item,{name:"time",label:C("time"),rules:[{required:!0}],children:(0,q.jsx)(t.A,{children:S.map((e=>(0,q.jsx)(t.A.Option,{value:e,children:C(e)},e)))})})}),(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(n.A.Item,{name:"sessions",label:C("sessions"),rules:[{required:!0,message:C("required")}],children:(0,q.jsx)(t.A,{onSelect:e=>T(e),children:w.map((e=>(0,q.jsx)(t.A.Option,{value:e.value,children:C(e.label)},e.key)))})})}),(0,q.jsx)(a.A,{span:12,children:(0,q.jsx)(n.A.Item,{name:"sessions_count",label:C("sessions.count"),rules:[{required:M===w[0].value,message:C("required")}],children:(0,q.jsx)(r.A,{min:0,className:"w-100",disabled:(null===M||void 0===M?void 0:M.value)===w[1].value||M===w[1].value})})})]}),(0,q.jsx)(u.A,{type:"primary",htmlType:"submit",loading:E,children:C("submit")})]})})}},47992:(e,l,i)=>{i.d(l,{G:()=>t});var s=i(9950),n=i(95491),o=i.n(n),a=i(99674),d=i(90650),r=i(44414);const t=e=>{let{fetchOptions:l,debounceTimeout:i=400,onClear:n,refetchOptions:t=!1,...u}=e;const[v,c]=(0,s.useState)(!1),[m,h]=(0,s.useState)([]),p=(0,s.useMemo)((()=>o()((e=>{h([]),c(!0),l(e).then((e=>{h(e),c(!1)}))}),i)),[l,i]);return(0,r.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),n&&n()},notFoundContent:v?(0,r.jsx)(d.A,{size:"small"}):"no results",...u,options:m,onFocus:()=>{m.length&&!t||p("")}})}}}]);