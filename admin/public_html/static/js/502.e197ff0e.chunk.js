"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[502],{502:(e,l,i)=>{i.r(l),i.d(l,{default:()=>N});var d=i(80737),n=i(12916),s=i(23263),o=i(48538),r=i(52913),t=i(40895),a=i(9950),c=i(70030),v=i(28429),u=i(23758),h=i(81446),x=i(91854),p=i(59051),j=i.n(p),m=i(53774),f=i(37279),y=i(45418),g=i(94117),k=i(74623),b=i(12970),w=i(35973),A=i(13311),_=i(51066),I=i(44414);const N=()=>{var e,l,i,p,N,$,Y,S,C,D,L;const{t:M}=(0,c.B)(),q=(0,x.wA)(),H=(0,a.useRef)(),R=(0,v.Zp)(),{id:z}=(0,v.g)(),{settings:F}=(0,x.d4)((e=>e.globalSettings)),B=(0,_.Q)(),{defaultCurrency:P}=(0,x.d4)((e=>e.currency),x.bN),{isDemo:E}=(0,A.A)(),{activeMenu:G}=(0,x.d4)((e=>e.menu),x.bN),[O,Q]=(0,a.useState)(null),[K,T]=(0,a.useState)(null),U=[{title:M("id"),dataIndex:"id",key:"id",render:(e,l)=>{var i;return null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.id}},{title:M("product.name"),dataIndex:"product",key:"product",render:(e,l)=>{var i,s,o,r,t;return(0,I.jsxs)(d.A,{direction:"vertical",className:"relative",children:[null===l||void 0===l||null===(i=l.stock)||void 0===i||null===(s=i.product)||void 0===s||null===(o=s.translation)||void 0===o?void 0:o.title,null===l||void 0===l||null===(r=l.stock)||void 0===r||null===(t=r.extras)||void 0===t?void 0:t.map((e=>{var l,i,d;return(0,I.jsxs)(n.A,{children:[null===(l=e.group)||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title,": ",null===(d=e.value)||void 0===d?void 0:d.value]},null===e||void 0===e?void 0:e.id)}))]})}},{title:M("price"),dataIndex:"price",key:"price",render:(e,l)=>{var i,d,n;return(0,m.default)((null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.price)-(null!==(d=null===l||void 0===l||null===(n=l.stock)||void 0===n?void 0:n.tax)&&void 0!==d?d:0),null===P||void 0===P?void 0:P.symbol)}},{title:M("quantity"),dataIndex:"quantity",key:"quantity",render:(e,l)=>e*(l.stock.product.interval||0)},{title:M("tax"),dataIndex:"tax",key:"tax",render:e=>(0,m.default)(e,null===P||void 0===P?void 0:P.symbol)},{title:M("discount"),dataIndex:"discount",key:"discount",render:(e,l)=>{var i;return(0,m.default)(null===l||void 0===l||null===(i=l.stock)||void 0===i?void 0:i.discount,null===P||void 0===P?void 0:P.symbol)}},{title:M("total.price"),dataIndex:"total_price",key:"total_price",render:e=>(0,m.default)(e,null===P||void 0===P?void 0:P.symbol)}];function V(){Q(!0),u.A.getById(z).then((e=>{let{data:l}=e;T(l)})).finally((()=>{Q(!1)}))}(0,a.useEffect)((()=>{V(),q((0,k.km)(G))}),[]),(0,a.useEffect)((()=>{G.refetch&&(V(),q((0,k.km)(G)))}),[G.refetch]);const W=(0,y.useReactToPrint)({content:()=>H.current});return(0,I.jsx)(s.A,{title:M("invoice"),extra:(0,I.jsxs)(d.A,{wrap:!0,children:[(0,I.jsx)(o.A,{type:"primary",onClick:()=>R(-1),children:(0,I.jsx)("span",{className:"ml-1",children:M("back")})}),(0,I.jsxs)(o.A,{type:"primary",onClick:()=>W(),ref:H,children:[(0,I.jsx)(f.A,{type:"printer"}),(0,I.jsx)("span",{className:"ml-1",children:M("print")})]})]}),children:O?(0,I.jsx)(h.A,{}):(0,I.jsxs)("div",{className:"container_check",ref:H,children:[(0,I.jsxs)("header",{className:"check_header",children:[(0,I.jsx)("div",{style:{objectFit:"contain",maxWidth:200,maxHeight:200,overflow:"hidden"},children:(0,I.jsx)("img",{src:null===F||void 0===F?void 0:F.favicon,alt:"img",className:"check_icon overflow-hidden rounded",width:200,height:200})}),(0,I.jsxs)("span",{className:"check_companyInfo",children:[(0,I.jsx)("h1",{children:null===F||void 0===F?void 0:F.title}),(0,I.jsx)("h5",{children:null===F||void 0===F?void 0:F.address})]})]}),(0,I.jsxs)("main",{children:[(0,I.jsxs)("span",{children:[(0,I.jsxs)("h4",{children:[M("order.id"),": ",null===K||void 0===K?void 0:K.id]}),(0,I.jsxs)("h4",{children:[M("date"),":"," ",j()(null===K||void 0===K?void 0:K.created_at).format(`YYYY-MM-DD ${B}`)]}),(0,I.jsx)("address",{children:(0,I.jsxs)("p",{children:[(0,I.jsxs)("span",{children:[M("delivery.type"),": ",null===K||void 0===K?void 0:K.delivery_type]}),(null===K||void 0===K||null===(e=K.address)||void 0===e?void 0:e.city)&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[M("delivery.address"),": ",null===K||void 0===K||null===(l=K.address)||void 0===l?void 0:l.city]})]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[M("delivery.date"),":"," ",j()(null===K||void 0===K?void 0:K.delivery_date).format(`YYYY-MM-DD ${B}`)]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[M("status"),": ",(0,I.jsx)(n.A,{color:"green",children:null===K||void 0===K?void 0:K.status})]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[M("otp"),": ",null!==(i=null===K||void 0===K?void 0:K.otp)&&void 0!==i?i:M("N/A")]})]})})]}),(0,I.jsx)("span",{children:(0,I.jsx)("address",{children:(0,I.jsxs)("p",{children:[(0,I.jsx)("h3",{className:"shop_data",children:M("user")}),(0,I.jsxs)("span",{children:[M("user.id"),": ",null===K||void 0===K||null===(p=K.user)||void 0===p?void 0:p.id]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[M("full.name"),":"," ",`${(null===K||void 0===K||null===(N=K.user)||void 0===N?void 0:N.firstname)||""} ${(null===K||void 0===K||null===($=K.user)||void 0===$?void 0:$.lastname)||""}`]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[M("email"),":"," ",(null!==K&&void 0!==K&&null!==(Y=K.user)&&void 0!==Y&&Y.email,(0,b.A)(null===K||void 0===K||null===(S=K.user)||void 0===S?void 0:S.email))]}),(0,I.jsx)("br",{}),(0,I.jsxs)("span",{children:[M("phone"),":"," ",null!==K&&void 0!==K&&null!==(C=K.user)&&void 0!==C&&C.phone?(0,w.A)(null===K||void 0===K||null===(D=K.user)||void 0===D?void 0:D.phone):M("no.phone")]})]})})}),(0,I.jsx)("span",{children:(0,I.jsx)(g.A,{orderId:z,showLink:!1,size:1.5})})]}),(0,I.jsx)(r.A,{scroll:{x:!0},columns:U,dataSource:(null===K||void 0===K?void 0:K.details)||[],loading:O,rowKey:e=>e.id,pagination:!1,className:"check_table"}),(0,I.jsxs)("footer",{children:[(0,I.jsx)("span",{children:(0,I.jsxs)("h3",{children:[M("note"),": ",null!==(L=null===K||void 0===K?void 0:K.note)&&void 0!==L?L:M("no.note")]})}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[M("origin.price"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===K||void 0===K?void 0:K.origin_price,null===P||void 0===P?void 0:P.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[M("total.tax"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===K||void 0===K?void 0:K.tax,null===P||void 0===P?void 0:P.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[M("service.fee"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===K||void 0===K?void 0:K.service_fee,null===P||void 0===P?void 0:P.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[M("delivery.fee"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===K||void 0===K?void 0:K.delivery_fee,null===P||void 0===P?void 0:P.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[M("tips"),":"]}),(0,I.jsx)("h4",{children:(0,m.default)(null===K||void 0===K?void 0:K.tips,null===P||void 0===P?void 0:P.symbol)})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[M("total.discount"),":"]}),(0,I.jsxs)("h4",{children:["- ",(0,m.default)(null===K||void 0===K?void 0:K.total_discount)]})]}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h5",{children:[M("coupon"),":"]}),(0,I.jsxs)("h4",{children:["- ",(0,m.default)(null===K||void 0===K?void 0:K.coupon_price)]})]}),(0,I.jsx)(t.A,{}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("h4",{children:[M("total.price"),":"]}),(0,I.jsx)("h3",{children:(0,m.default)(null===K||void 0===K?void 0:K.total_price,null===P||void 0===P?void 0:P.symbol)})]})]})]}),(0,I.jsxs)("section",{className:"text-center",children:["\xa9 ",j()(new Date).format("YYYY")," ",null===F||void 0===F?void 0:F.title,"."," ",M("all.rights.reserved")]})]})})}},12970:(e,l,i)=>{function d(e){var l,i;let d=null===e||void 0===e?void 0:e.slice(0,1),n=null===e||void 0===e?void 0:e.lastIndexOf("@"),s=null===e||void 0===e?void 0:e.slice(1,n-1);s=null===(l=s)||void 0===l?void 0:l.replace(/./g,"*");let o=null===e||void 0===e?void 0:e.slice(n-1,e.length);return null===d||void 0===d||null===(i=d.concat(s))||void 0===i?void 0:i.concat(o)}i.d(l,{A:()=>d})},35973:(e,l,i)=>{function d(e){const l=`${e}`,i="*".repeat(l.length-2);return(null===l||void 0===l?void 0:l[0])+i+(null===l||void 0===l?void 0:l[(null===l||void 0===l?void 0:l.length)-1])}i.d(l,{A:()=>d})},51066:(e,l,i)=>{i.d(l,{Q:()=>s});var d=i(17706),n=i(80415);const s=()=>{var e,l,i,s;return null!==(e=null===(l=d.M.getState())||void 0===l||null===(i=l.globalSettings)||void 0===i||null===(s=i.settings)||void 0===s?void 0:s.hour_format)&&void 0!==e?e:n.G}},53774:(e,l,i)=>{function d(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const i=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===l?`${i} ${e}`:`${e} ${i}`}i.r(l),i.d(l,{default:()=>d})},80415:(e,l,i)=>{i.d(l,{G:()=>o,HV:()=>n,LH:()=>d,PR:()=>s,wO:()=>t,xt:()=>r});const d={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},n=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),s=30,o="HH:mm",r="hh:mm a",t=!0},94117:(e,l,i)=>{i.d(l,{A:()=>p});var d=i(9950),n=i(70030),s=i(99163),o=i(85923),r=i(48538),t=i(12916),a=i(96011),c=i.n(a),v=i(63620),u=i(81446),h=i(44414);const x=`https://firebasedynamiclinks.googleapis.com/v1/shortLinks?key=${v.Lq}`;function p(e){let{orderId:l,showLink:i=!0,size:a=2}=e;const{t:p}=(0,n.B)(),[j,m]=(0,d.useState)(""),[f,y]=(0,d.useState)(!1),[g,k]=(0,d.useState)(null);return(0,d.useEffect)((()=>{(async()=>{y(!0);const e={dynamicLinkInfo:{domainUriPrefix:v.ac,link:`${v.CY}/orders/${l}`,androidInfo:{androidPackageName:v.xp},iosInfo:{iosBundleId:v.lu}}};try{const{data:l}=await c().post(x,e);k(null),m(null===l||void 0===l?void 0:l.shortLink)}catch(g){k(g),o.oR.error(g.message)}finally{y(!1)}})()}),[l]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("h3",{children:[p("qr_code"),":"]}),(0,h.jsx)("div",{children:f||g?g?(0,h.jsx)(t.A,{color:"red",children:p("smth.went.wrong")}):(0,h.jsx)(u.A,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{width:100*a+"px",height:100*a+"px",borderRadius:"10px",overflow:g?"none":"hidden"},children:(0,h.jsx)(s.Xe,{size:500,id:"qrCode",includeMargin:!0,value:j,style:{width:"100%",aspectRatio:"1/1",height:"100%"},bgColor:"#fff",level:"H"})}),(0,h.jsx)("br",{}),i&&(0,h.jsx)(r.A,{type:"primary",href:j,target:"_blank",rel:"noreferrer",style:{width:100*a+"px"},children:p("link.to.order")})]})})]})}}}]);