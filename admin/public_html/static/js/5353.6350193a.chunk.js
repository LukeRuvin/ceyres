"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5353],{31281:(e,l,t)=>{function a(e,l){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.map((e=>({[e.locale]:""===l[`${t}[${e.locale}]`]?void 0:l[`${t}[${e.locale}]`]})));return Object.assign({},...a)}t.d(l,{A:()=>a})},35353:(e,l,t)=>{t.r(l),t.d(l,{default:()=>E});var a=t(9950),n=t(28429),s=t(85923),i=t(59233),r=t(23263),o=t(87094),d=t(41988),c=t(55902),u=t(99674),m=t(25933),p=t(48538),g=t(90650),v=t(91854),h=t(74623),b=t(60926),x=t(95709),A=t(70030),j=t(71999),f=t(48970),_=t(63620),y=t(75670),k=t(96011),N=t.n(k),$=t(31281),w=t(46492),F=t(44414);const E=()=>{var e,l,t;const{t:k}=(0,A.B)(),{activeMenu:E}=(0,v.d4)((e=>e.menu),v.bN),I=(0,v.wA)(),[P]=i.A.useForm(),q=(0,n.Zp)(),{id:z}=(0,n.g)(),[B,V]=(0,a.useState)(!1),[D,L]=(0,a.useState)(!1),{languages:R,defaultLang:S}=(0,v.d4)((e=>e.formLang),v.bN),C=e=>({name:e,url:_.sE+e}),[O,T]=(0,a.useState)(null!==(e=E.data)&&void 0!==e&&null!==(l=e.galleries)&&void 0!==l&&l[0]?[C(null===(t=E.data.galleries)||void 0===t?void 0:t[0].path)]:[]);function K(e){if(!e)return{};const{translations:l}=e,t=R.map((e=>{var t,a;return{[`title[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,[`description[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...t)}(0,a.useEffect)((()=>()=>{const e=P.getFieldsValue(!0);I((0,h.Ok)({activeMenu:E,data:e}))}),[]);return(0,a.useEffect)((()=>{var e;E.refetch&&(e=z,L(!0),x.A.getById(e).then((e=>{let l=e.data;const t={...l,...K(l),...l.buttons};P.setFieldsValue(t),T([C(l.galleries[0].path)])})).finally((()=>{I((0,h.km)(E)),L(!1)})))}),[E.refetch]),(0,F.jsx)(r.A,{title:k("edit.page"),className:"h-100",extra:(0,F.jsx)(j.A,{}),children:D?(0,F.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,F.jsx)(g.A,{size:"large",className:"py-5"})}):(0,F.jsxs)(i.A,{name:"banner-add",layout:"vertical",onFinish:e=>{V(!0);const l={images:O.map((e=>e.name)),active:Number(e.active),type:e.type,title:(0,$.A)(R,e,"title"),description:(0,$.A)(R,e,"description"),buttons:{google_play_button_link:null===e||void 0===e?void 0:e.google_play_button_link,app_store_button_link:null===e||void 0===e?void 0:e.app_store_button_link}};N()({method:"put",url:`${_.TT}dashboard/admin/pages/${z}`,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},data:l,params:{}}).then((()=>{const e="pages";s.oR.success(k("successfully.updated")),I((0,h.EK)({...E,nextUrl:e})),q(`/${e}`),I((0,b.f)())})).catch((e=>{var l,t;return s.oR.error(null===(l=e.response)||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message)})).finally((()=>V(!1)))},form:P,initialValues:{active:!0,...E.data},className:"d-flex flex-column h-100",children:[(0,F.jsxs)(o.A,{gutter:12,children:[(0,F.jsx)(d.A,{span:12,children:R.map((e=>(0,F.jsx)(i.A.Item,{label:k("name"),name:`title[${e.locale}]`,rules:[{required:e.locale===S,message:k("required")}],hidden:e.locale!==S,children:(0,F.jsx)(c.A,{})},"title"+e.locale)))}),(0,F.jsx)(d.A,{span:12}),(0,F.jsx)(d.A,{span:24,children:(0,F.jsx)(y.A,{form:P,languages:R,lang:S})}),(0,F.jsx)(d.A,{span:12,children:(0,F.jsx)(i.A.Item,{label:k("type"),name:"type",rules:[{required:!0,message:k("required")}],children:(0,F.jsx)(u.A,{options:w.F,className:"w-100",disabled:!0})})}),(0,F.jsx)(d.A,{span:12,children:(0,F.jsx)(i.A.Item,{label:k("active"),name:"active",valuePropName:"checked",children:(0,F.jsx)(m.A,{})})}),(0,F.jsx)(d.A,{span:12,children:(0,F.jsx)(i.A.Item,{label:k("google_play_button_link"),name:"google_play_button_link",children:(0,F.jsx)(c.A,{className:"w-100"})})}),(0,F.jsx)(d.A,{span:12,children:(0,F.jsx)(i.A.Item,{label:k("app_store_button_link"),name:"app_store_button_link",children:(0,F.jsx)(c.A,{className:"w-100"})})}),(0,F.jsx)(d.A,{span:12,children:(0,F.jsx)(i.A.Item,{label:k("image"),children:(0,F.jsx)(f.A,{type:"receipts",imageList:O,setImageList:T,form:P,multiple:!1})})})]}),(0,F.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,F.jsx)("div",{className:"pb-5",children:(0,F.jsx)(p.A,{type:"primary",htmlType:"submit",loading:B,disabled:B,children:k("submit")})})})]})})}},46492:(e,l,t)=>{t.d(l,{F:()=>a});const a=[{value:"delivery",label:"Delivery"},{value:"about",label:"About"},{value:"about_second",label:"About second"},{value:"about_three",label:"About third"}]},75670:(e,l,t)=>{t.d(l,{A:()=>p});var a=t(9950),n=t(59233),s=t(70030),i=t(36455),r=t(19181),o=t.n(r),d=t(63620),c=t(64924),u=t(85923),m=t(44414);function p(e){let{form:l,lang:t,languages:r}=e;const{t:p}=(0,s.B)();function g(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((l,t)=>{const a=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(p("min.2.mb")),t()),a.append("image",e),a.append("type","blogs"),c.A.upload(a).then((e=>{let{data:t}=e;l({default:`${d.sE+t.title}`})})).catch((e=>{t(e)}))}))}))}}(e)}return(0,m.jsx)(a.Fragment,{children:r.map((e=>(0,m.jsx)(n.A.Item,{label:p("description"),name:`description[${e.locale}]`,valuePropName:"data",getValueFromEvent:(e,l)=>l.getData(),rules:[{required:e.locale===t,message:p("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(p("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<5?Promise.reject(new Error(p("must.be.at.least.5"))):l&&(null===l||void 0===l?void 0:l.trim().length)>200?Promise.reject(new Error(p("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==t,children:(0,m.jsx)(i.CKEditor,{editor:o(),config:{extraPlugins:[g]},onBlur:(t,a)=>{const n=a.getData();l.setFieldsValue({[`description[${e.value}]`]:n})}})},"desc"+e.locale)))})}}}]);