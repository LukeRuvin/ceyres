"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8798],{8297:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(9950),l=a(55902),s=a(41397),i=a(60767),d=a(44414);function r(e){let{handleChange:t,defaultValue:a,resetSearch:r,...o}=e;const[c,u]=(0,n.useState)(a),v=(0,n.useMemo)((()=>(0,s.debounce)((e=>{t(e)}),800)),[]);return(0,n.useEffect)((()=>{u(a)}),[r]),(0,d.jsx)(l.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(i.A,{}),...o})}},12521:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(82706),l=a(48538),s=a(90650),i=a(91524),d=a(53774),r=a(9950),o=a(70030),c=a(3948),u=a(44414);const v=e=>{var t;let{id:a,onClose:v}=e;const{t:h}=(0,o.B)(),[p,x]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),A=(0,r.useCallback)((()=>{x(!0),a&&c.A.getById(a).then((e=>{g(e.data)})).finally((()=>{x(!1)}))}),[a]);return(0,r.useEffect)((()=>{A()}),[a,A]),(0,u.jsx)(n.A,{visible:!!a,title:h("ad.detail"),onCancel:v,footer:[(0,u.jsx)(l.A,{onClick:v,children:h("close")})],children:p?(0,u.jsx)("div",{className:"flex justify-content-center my-6",children:(0,u.jsx)(s.A,{})}):(0,u.jsxs)(i.A,{bordered:!0,children:[(0,u.jsx)(i.A.Item,{span:3,label:h("title"),children:null===m||void 0===m||null===(t=m.translation)||void 0===t?void 0:t.title}),(0,u.jsx)(i.A.Item,{span:3,label:h("price"),children:(0,d.default)(null===m||void 0===m?void 0:m.price)}),(0,u.jsxs)(i.A.Item,{span:3,label:h("time"),children:[null===m||void 0===m?void 0:m.time," ",null===m||void 0===m?void 0:m.time_type]})]})})}},17456:(e,t,a)=>{a.d(t,{A:()=>n});a(9950);const n=a.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},28016:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(89379),l=a(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M396 512a112 112 0 10224 0 112 112 0 10-224 0zm546.2-25.8C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}}]},name:"eye",theme:"filled"};var i=a(25085),d=function(e,t){return l.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:t,icon:s}))};const r=l.forwardRef(d)},28645:(e,t,a)=>{a.d(t,{A:()=>x});var n=a(9950),l=a(66362),s=a(69216),i=a(80737),d=a(25933),r=a(57811),o=a(81541),c=a(48538),u=a(89323),v=a(70030),h=a(44414);const{Text:p}=l.A,x=e=>{let{columns:t=[],setColumns:a,style:l,size:x="",iconOnly:m}=e;const{t:g}=(0,v.B)(),[A,f]=(0,n.useState)(!1),j=(0,h.jsx)(s.A,{children:null===t||void 0===t?void 0:t.map(((e,n)=>(0,h.jsx)(s.A.Item,{children:(0,h.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(p,{children:e.title}),(0,h.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));a(n)}(e),disabled:1===n})]})},e+n)))});return(0,h.jsx)(r.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{f(e)},visible:A,children:(0,h.jsx)(o.A,{title:g("change.columns"),children:(0,h.jsx)(c.A,{style:{...l},size:x,icon:(0,h.jsx)(u.A,{}),children:m?null:g("Columns")})})})}},51066:(e,t,a)=>{a.d(t,{Q:()=>s});var n=a(17706),l=a(80415);const s=()=>{var e,t,a,s;return null!==(e=null===(t=n.M.getState())||void 0===t||null===(a=t.globalSettings)||void 0===a||null===(s=a.settings)||void 0===s?void 0:s.hour_format)&&void 0!==e?e:l.G}},53774:(e,t,a)=>{function n(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const a=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?`${a} ${e}`:`${e} ${a}`}a.r(t),a.d(t,{default:()=>n})},58798:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var n=a(9950),l=a(80737),s=a(48538),i=a(12916),d=a(23263),r=a(52913),o=a(4486),c=a(91854),u=a(70030),v=a(8297),h=a(28645),p=a(74623),x=a(88986),m=a(53774),g=a(3948),A=a(85923),f=(a(17491),a(28016)),j=a(12521),y=a(59051),b=a.n(y),w=a(53496),_=(a(99122),a(76214)),C=a(73242),k=a(68873),z=a(54826),S=a(70283),V=a(17456),H=a(82706),I=a(87094),N=a(41988),M=a(81446),$=a(44414);function B(e){var t;let{buyingAd:a,handleCancel:l}=e;const{t:i}=(0,u.B)(),r=(0,c.wA)(),{seller:v}=(0,c.d4)((e=>e.myShop.myShop),c.bN),[h,p]=(0,n.useState)(!1),[x,m]=(0,n.useState)({}),{payments:f,loading:j}=(0,c.d4)((e=>e.payment),c.bN);(0,n.useEffect)((()=>{r((0,w.kK)({}))}),[]),console.log("buyingAd",a);const y=()=>{p(!0),_.A.payExternal(x.tag,{ads_package_id:a.ads_package_id}).then((e=>{var t;let{data:a}=e;window.location.replace(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.url),l(),r((0,C.v)({}))})).finally((()=>p(!1)))};const b=e=>{switch(e){case"wallet":default:return(0,$.jsx)(k.c8K,{size:80});case"paypal":return(0,$.jsx)(z.SnG,{size:80});case"stripe":return(0,$.jsx)(S.kDV,{size:80});case"razorpay":return(0,$.jsx)(S.NVb,{size:80});case"paystack":return(0,$.jsx)("img",{src:V.A,alt:"img",width:"80",height:"80"})}};return(0,$.jsx)(H.A,{visible:!!a,title:i("purchase.ad"),onCancel:l,footer:[(0,$.jsx)(s.A,{type:"primary",onClick:()=>{if(x.id){var e;if("wallet"===x.tag)return(null===v||void 0===v||null===(e=v.wallet)||void 0===e?void 0:e.price)<a.ads_package.price?void A.oR.warning(i("insufficient.balance")):g.A.purchase(a.id,{payment_sys_id:null===x||void 0===x?void 0:x.id}).then((()=>{A.oR.success(i("purchased.successfully"))})).finally((()=>{r((0,o.KZ)({})),p(!1)}));y()}else A.oR.warning(i("please.select.payment.type"))},loading:h,children:i("save")},"save-btn"),(0,$.jsx)(s.A,{type:"default",onClick:l,children:i("cancel")},"cancel-btn")],children:j?(0,$.jsx)(M.A,{}):(0,$.jsx)(I.A,{gutter:12,children:null===f||void 0===f||null===(t=f.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.tag))))||void 0===t?void 0:t.map(((e,t)=>(0,$.jsx)(N.A,{span:8,children:(0,$.jsxs)(d.A,{className:"payment-card "+((null===x||void 0===x?void 0:x.tag)===e.tag?"active":""),onClick:()=>{m(e)},children:[(0,$.jsx)("div",{className:"payment-icon",children:b(null===e||void 0===e?void 0:e.tag)}),(0,$.jsx)("div",{className:"font-weight-bold mt-2",children:i(null===e||void 0===e?void 0:e.tag)})]})},t)))})})}var E=a(51066);function K(){const{t:e}=(0,u.B)(),t=(0,c.wA)(),[a,g]=(0,n.useState)(null),[A,y]=(0,n.useState)(null),{activeMenu:w}=(0,c.d4)((e=>e.menu),c.bN),{shopAdList:_,loading:C,meta:k}=(0,c.d4)((e=>e.advert),c.bN),[z,S]=(0,n.useState)(""),[V,H]=(0,n.useState)(!1),I=(0,E.Q)(),[N,M]=(0,n.useState)([{title:e("id"),dataIndex:"id",is_show:!0,sorter:(e,t)=>e.id-t.id},{title:e("ad.package"),dataIndex:"ads_package",is_show:!0,render:e=>{var t;return(0,$.jsxs)(l.A,{children:[(0,$.jsx)("span",{children:null===e||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title}),(0,$.jsx)(s.A,{icon:(0,$.jsx)(f.A,{}),onClick:()=>g(e.id)})]})}},{title:e("price"),dataIndex:"price",is_show:!0,render:(e,t)=>{var a;return(0,m.default)(null===t||void 0===t||null===(a=t.ads_package)||void 0===a?void 0:a.price)}},{title:e("expire_at"),dataIndex:"expire_at",is_show:!0,render:(e,t)=>b()(null===t||void 0===t?void 0:t.expired_at).format(`YYYY-MM-DD ${I}`)},{title:e("status"),dataIndex:"status",is_show:!0,render:t=>(0,$.jsx)("div",{children:"new"===t?(0,$.jsx)(i.A,{color:"blue",children:e(t)}):"canceled"===t?(0,$.jsx)(i.A,{color:"error",children:e(t)}):(0,$.jsx)(i.A,{color:"cyan",children:e(t)})})},{title:e("transaction"),dataIndex:"transaction",is_show:!0,render:t=>(0,$.jsx)("div",{children:"paid"===(null===t||void 0===t?void 0:t.status)?(0,$.jsx)(i.A,{color:"cyan",children:e(null===t||void 0===t?void 0:t.status)}):"canceled"===(null===t||void 0===t?void 0:t.status)||"rejected"===(null===t||void 0===t?void 0:t.status)?(0,$.jsx)(i.A,{color:"error",children:e(null===t||void 0===t?void 0:t.status)}):(0,$.jsx)(i.A,{color:"orange",children:e("not.paid")})})},{title:e("options"),dataIndex:"options",is_show:!0,render:(t,a)=>{var n;return(0,$.jsx)(l.A,{children:(0,$.jsx)(s.A,{onClick:()=>{y(a)},disabled:"paid"===(null===(n=a.transaction)||void 0===n?void 0:n.status),loading:V,children:e("purchase")})})}}]),K={perPage:10,page:1,sort:"desc",column:"created_at"};(0,n.useEffect)((()=>{w.refetch&&(t((0,o.KZ)(K)),t((0,p.km)(w)))}),[w.refetch]),(0,x.A)((()=>{const e={search:z};t((0,o.KZ)(e))}),[w.data,z]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(d.A,{className:"p-o",children:(0,$.jsxs)("div",{className:"flex justify-content-between",children:[(0,$.jsx)(v.A,{style:{maxWidth:"200px"},handleChange:e=>S(e),placeholder:e("search")}),(0,$.jsx)("div",{className:"flex gap-3",children:(0,$.jsx)(h.A,{columns:N,setColumns:M})})]})}),(0,$.jsx)(d.A,{children:(0,$.jsx)(r.A,{scroll:{x:!0},dataSource:_,columns:null===N||void 0===N?void 0:N.filter((e=>e.is_show)),rowKey:e=>e.id,loading:C||V,pagination:{pageSize:k.per_page,page:k.current_page,total:k.total},onChange:e=>{const{pageSize:a,current:n}=e;t((0,o.KZ)({perPage:a,page:n}))}})}),(0,$.jsx)(j.A,{id:a,onClose:()=>g(null)}),A&&(0,$.jsx)(B,{buyingAd:A,handleCancel:()=>y(null)})]})}},80415:(e,t,a)=>{a.d(t,{G:()=>i,HV:()=>l,LH:()=>n,PR:()=>s,wO:()=>r,xt:()=>d});const n={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},l=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),s=30,i="HH:mm",d="hh:mm a",r=!0},89323:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(89379),l=a(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=a(25085),d=function(e,t){return l.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:t,icon:s}))};const r=l.forwardRef(d)},99122:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(82371);const l={getAll:e=>n.A.get("dashboard/seller/subscriptions",{params:e}),attach:(e,t)=>n.A.post(`dashboard/seller/subscriptions/${e}/attach`,t),transactionCreate:(e,t)=>n.A.post(`payments/subscription/${e}/transactions`,t)}}}]);