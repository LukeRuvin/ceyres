"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5459],{35459:(e,l,t)=>{t.r(l),t.d(l,{default:()=>q});var a=t(9950),s=t(28429),r=t(85923),i=t(59233),n=t(23263),o=t(87094),c=t(41988),d=t(55902),u=t(25933),m=t(80737),g=t(48538),h=t(91854),p=t(74623),v=t(12044),j=t(58920),x=t(71999),A=t(70030),f=t(75670),b=t(48970),y=t(44414);function q(){var e,l;const{t:t}=(0,A.B)(),{activeMenu:q}=(0,h.d4)((e=>e.menu),h.bN),{languages:w,defaultLang:E}=(0,h.d4)((e=>e.formLang),h.bN),F=(0,h.wA)(),[P]=i.A.useForm(),$=(0,s.Zp)(),[k,I]=(0,a.useState)(null!==(e=q.data)&&void 0!==e&&e.image?[null===(l=q.data)||void 0===l?void 0:l.image]:[]),[N,L]=(0,a.useState)(!1);function V(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title";const t=w.map((t=>({[t.locale]:e[`${l}[${t.locale}]`]})));return Object.assign({},...t)}(0,a.useEffect)((()=>()=>{const e=P.getFieldsValue(!0);F((0,p.Ok)({activeMenu:q,data:e}))}),[]);return(0,y.jsx)(n.A,{title:t("add.blog"),extra:(0,y.jsx)(x.A,{}),children:(0,y.jsxs)(i.A,{name:"blog-add",layout:"vertical",onFinish:e=>{const l={type:"blog",active:e.active?1:0,images:k.length?k.map((e=>e.name)):void 0,title:V(e),description:V(e,"description"),short_desc:V(e,"short_desc")};L(!0);const a="blogs";j.A.create(l).then((()=>{r.oR.success(t("successfully.created")),F((0,p.EK)({...q,nextUrl:a})),$(`/${a}`),F((0,v.k)({}))})).finally((()=>L(!1)))},form:P,initialValues:{active:!0,...q.data},children:[(0,y.jsxs)(o.A,{gutter:12,children:[(0,y.jsx)(c.A,{span:12,children:w.map((e=>(0,y.jsx)(i.A.Item,{label:t("title"),name:`title[${e.locale}]`,rules:[{required:e.locale===E,message:t("required")}],hidden:e.locale!==E,children:(0,y.jsx)(d.A,{})},"title"+e.locale)))}),(0,y.jsx)(c.A,{children:(0,y.jsx)(i.A.Item,{label:t("image"),rules:[{required:!k.length,message:t("required")}],children:(0,y.jsx)(b.A,{type:"blogs",imageList:k,setImageList:I,form:P,length:"1",multiple:!1})})}),(0,y.jsx)(c.A,{children:(0,y.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,y.jsx)(i.A.Item,{label:t("active"),name:"active",valuePropName:"checked",children:(0,y.jsx)(u.A,{})})})}),(0,y.jsx)(c.A,{span:12,children:w.map((e=>(0,y.jsx)(i.A.Item,{label:t("short.description"),name:`short_desc[${e.locale}]`,rules:[{required:e.locale===E,message:t("required")}],hidden:e.locale!==E,children:(0,y.jsx)(d.A,{})},"short_desc"+e.locale)))}),(0,y.jsx)(c.A,{span:24,children:(0,y.jsx)(f.A,{languages:w,form:P,lang:E})})]}),(0,y.jsx)(m.A,{children:(0,y.jsx)(g.A,{type:"primary",htmlType:"submit",loading:N,children:t("save")})})]})})}},75670:(e,l,t)=>{t.d(l,{A:()=>g});var a=t(9950),s=t(59233),r=t(70030),i=t(36455),n=t(19181),o=t.n(n),c=t(63620),d=t(64924),u=t(85923),m=t(44414);function g(e){let{form:l,lang:t,languages:n}=e;const{t:g}=(0,r.B)();function h(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((l,t)=>{const a=new FormData;e.file.then((e=>{e.size/1024/1024<2||(u.oR.error(g("min.2.mb")),t()),a.append("image",e),a.append("type","blogs"),d.A.upload(a).then((e=>{let{data:t}=e;l({default:`${c.sE+t.title}`})})).catch((e=>{t(e)}))}))}))}}(e)}return(0,m.jsx)(a.Fragment,{children:n.map((e=>(0,m.jsx)(s.A.Item,{label:g("description"),name:`description[${e.locale}]`,valuePropName:"data",getValueFromEvent:(e,l)=>l.getData(),rules:[{required:e.locale===t,message:g("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(g("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<5?Promise.reject(new Error(g("must.be.at.least.5"))):l&&(null===l||void 0===l?void 0:l.trim().length)>200?Promise.reject(new Error(g("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==t,children:(0,m.jsx)(i.CKEditor,{editor:o(),config:{extraPlugins:[h]},onBlur:(t,a)=>{const s=a.getData();l.setFieldsValue({[`description[${e.value}]`]:s})}})},"desc"+e.locale)))})}}}]);