"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7675],{67675:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var a=l(9950),s=l(54909),i=l(70030),n=l(17213),d=l(80737),o=l(72243),r=l(12916),c=l(48538),u=l(23263),v=l(52913),p=l(82706),x=l(69554),g=l(90540),j=l(24513),h=l(9845),m=l(74623),A=l(91854),y=l(85923),f=l(76083),w=l(55386),b=l(28429),k=l(28645),C=l(8168),I=l(88986),_=l(3462),S=l(99324),q=l(35116),P=l(8228),N=l(44414);const z={type:"category"};function K(e){var t,l,s;let{parentId:n}=e;const{t:K}=(0,i.B)(),[M,T]=(0,a.useState)(!1),{setIsModalVisible:O}=(0,a.useContext)(w.o),[R,$]=(0,a.useState)(!1),[B,E]=(0,a.useState)(!1),[U,V]=(0,a.useState)(""),[X,Z]=(0,a.useState)(null),D=(0,A.wA)(),F=(0,b.Zp)(),{activeMenu:G}=(0,A.d4)((e=>e.menu),A.bN),{data:H,meta:J,loading:L,params:Q}=(0,A.d4)((e=>e.requestModels),A.bN),W=G.data,{uuid:Y}=(0,b.g)(),ee={search:null===W||void 0===W?void 0:W.search,sort:null===W||void 0===W?void 0:W.sort,column:null===W||void 0===W?void 0:W.column,perPage:null===W||void 0===W?void 0:W.perPage,page:null===W||void 0===W?void 0:W.page,parent_id:n,type:"category"},[te,le]=(0,a.useState)([{title:K("name"),dataIndex:"name",key:"name",is_show:!0,render:(e,t)=>{var l,a,s,i,n;return(0,N.jsxs)(d.A,{children:[null===(l=t.model)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title," ",(0,N.jsx)(S.Kly,{})," ",null===(s=t.data)||void 0===s?void 0:s.title[null===t||void 0===t||null===(i=t.model)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.locale]]})}},{title:K("image"),dataIndex:"img",key:"img",is_show:!0,render:(e,t)=>{var l,a;return(0,N.jsxs)(d.A,{children:[(0,N.jsx)(o.A,{src:(0,x.A)(null===t||void 0===t||null===(l=t.model)||void 0===l?void 0:l.img),alt:"img_gallery",width:100,className:"rounded",preview:!0,placeholder:!0}),(0,N.jsx)(S.Kly,{}),(0,N.jsx)(o.A,{src:(0,x.A)(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.images.at(0)),alt:"img_gallery",width:100,className:"rounded",preview:!0,placeholder:!0})]})}},{title:K("status"),dataIndex:"status",is_show:!0,render:e=>(0,N.jsx)("div",{children:"new"===e?(0,N.jsx)(r.A,{color:"blue",children:K(e)}):"canceled"===e?(0,N.jsx)(r.A,{color:"error",children:K(e)}):(0,N.jsx)(r.A,{color:"cyan",children:K(e)})})},{title:K("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,t)=>(0,N.jsxs)(d.A,{children:[(0,N.jsx)(c.A,{icon:(0,N.jsx)(j.A,{}),onClick:()=>(e=>{D((0,m.X4)({url:`seller/category-request/${e.id}`,id:"request_edit",name:K("request.edit")})),F(`/seller/category-request/${e.id}`,{state:{parentId:n,parentUuid:Y}})})(t)}),"cancelled"===(null===t||void 0===t?void 0:t.status)&&(null===t||void 0===t?void 0:t.status_note)&&(0,N.jsx)(c.A,{icon:(0,N.jsx)(h.A,{}),onClick:()=>{E(!0),V(t.status_note)}}),(0,N.jsx)(q.A,{danger:!0,type:"primary",onClick:()=>{Z([t.id]),O(!0)}})]})}]);(0,a.useEffect)((()=>{D((0,_.ji)(ee)),D((0,m.km)(G))}),[G.refetch]),(0,I.A)((()=>{D((0,_.ji)(ee))}),[G.data]);const ae={selectedRowKeys:X,onChange:e=>{Z(e)}};return(0,N.jsxs)(u.A,{title:K("requests"),extra:(0,N.jsx)(d.A,{wrap:!0,children:(0,N.jsx)(k.A,{columns:te,setColumns:le})}),children:[(0,N.jsx)(v.A,{scroll:{x:!0},rowSelection:ae,columns:null===te||void 0===te?void 0:te.filter((e=>e.is_show)),dataSource:H,pagination:{pageSize:Q.perPage,page:(null===(t=G.data)||void 0===t?void 0:t.page)||1,total:J.total,defaultCurrent:null===(l=G.data)||void 0===l?void 0:l.page,current:null===(s=G.data)||void 0===s?void 0:s.page},rowKey:e=>e.key,onChange:function(e,t,l){const{pageSize:a,current:s}=e,{field:i,order:n}=l,d=(0,C.A)(n);D((0,m.Ok)({activeMenu:G,data:{...G.data,perPage:a,page:s,column:i,sort:d}}))},loading:L}),M&&(0,N.jsx)(g.A,{handleCancel:()=>T(!1),isModalOpen:M}),(0,N.jsx)(f.A,{click:()=>{$(!0);const e={...Object.assign({},...X.map(((e,t)=>({[`ids[${t}]`]:e}))))};P.A.delete(e).then((()=>{y.oR.success(K("successfully.deleted")),D((0,_.ji)(z)),O(!1)})).finally((()=>$(!1)))},text:K("delete"),setText:Z,loading:R}),(0,N.jsxs)(p.A,{title:"Reject message",closable:!1,visible:B,footer:null,centered:!0,children:[(0,N.jsx)("p",{children:U}),(0,N.jsx)("div",{className:"d-flex justify-content-end",children:(0,N.jsx)(c.A,{type:"primary",className:"mr-2",onClick:()=>E(!1),children:K("close")})})]})]})}function M(e){var t;let{parentId:l,type:a}=e;const{t:d}=(0,i.B)(),o=(0,b.zy)();return(0,N.jsxs)(s.A,{defaultActiveKey:(null===(t=o.state)||void 0===t?void 0:t.tab)||"list",destroyInactiveTabPane:!0,children:[(0,N.jsx)(s.A.TabPane,{tab:d("category.list"),children:(0,N.jsx)(n.A,{parentId:l,type:a})},"list"),(0,N.jsx)(s.A.TabPane,{tab:d("requests"),children:(0,N.jsx)(K,{parentId:l,type:a})},"request")]})}}}]);