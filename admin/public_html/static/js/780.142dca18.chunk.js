"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[780],{31281:(e,t,l)=>{function i(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const i=e.map((e=>({[e.locale]:""===t[`${l}[${e.locale}]`]?void 0:t[`${l}[${e.locale}]`]})));return Object.assign({},...i)}l.d(t,{A:()=>i})},88754:(e,t,l)=>{l.d(t,{A:()=>m});var i=l(9950),a=l(36455),n=l(19181),r=l.n(n),o=l(59233),s=l(70030),c=l(64924),d=l(63620),u=l(44414);const m=e=>{let{getLanguageFields:t,form:l,lang:n,languages:m}=e;const{t:p}=(0,s.B)();function g(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((t,l)=>{const i=new FormData;e.file.then((e=>{i.append("image",e),i.append("type","blogs"),c.A.upload(i).then((e=>{let{data:l}=e;t({default:`${d.sE+l.title}`})})).catch((e=>{l(e)}))}))}))}}(e)}return(0,u.jsx)(i.Fragment,{children:m.map((e=>(0,u.jsx)(o.A.Item,{label:p("description"),name:`description[${e.locale}]`,valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:e.locale===n,message:p("required")}],hidden:e.locale!==n,children:(0,u.jsx)(a.CKEditor,{editor:r(),data:t()[`description[${e.value}]`],config:{extraPlugins:[g]},onBlur:(t,i)=>{const a=i.getData();l.setFieldsValue({[`description[${e.value}]`]:a})}})},"desc"+e.locale)))})}},90780:(e,t,l)=>{l.r(t),l.d(t,{default:()=>$});var i=l(9950),a=l(28429),n=l(85923),r=l(59233),o=l(23263),s=l(87094),c=l(41988),d=l(55902),u=l(80737),m=l(48538),p=l(90650),g=l(91854),h=l(74623),v=l(73271),f=l(58920),j=l(71999),A=l(31281),x=l(70030),y=l(88754),b=l(44414);function $(){const{t:e}=(0,x.B)(),{activeMenu:t}=(0,g.d4)((e=>e.menu),g.bN),{languages:l,defaultLang:$}=(0,g.d4)((e=>e.formLang),g.bN),E=(0,g.wA)(),[w]=r.A.useForm(),F=(0,a.Zp)(),{uuid:P}=(0,a.g)(),[k,_]=(0,i.useState)(!1),[N,V]=(0,i.useState)(!1);(0,i.useEffect)((()=>()=>{const e=w.getFieldsValue(!0);E((0,h.Ok)({activeMenu:t,data:e}))}),[]);function q(e){if(!e)return{};const{translations:t}=e,i=l.map((e=>{var l,i,a;return{[`title[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,[`description[${e.locale}]`]:null===(i=t.find((t=>t.locale===e.locale)))||void 0===i?void 0:i.description,[`short_desc[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.short_desc}}));return Object.assign({},...i)}return(0,i.useEffect)((()=>{t.refetch&&(e=>{V(!0),f.A.getById(e).then((e=>{let t=e.data;w.setFieldsValue({...t,...q(t)})})).finally((()=>{V(!1),E((0,h.km)(t))}))})(P)}),[t.refetch]),(0,b.jsx)(o.A,{title:e("edit.notification"),extra:(0,b.jsx)(j.A,{}),children:N?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(p.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(r.A,{name:"notification-edit",layout:"vertical",onFinish:i=>{const a={type:"notification",title:(0,A.A)(l,i),description:(0,A.A)(l,i,"description"),short_desc:(0,A.A)(l,i,"short_desc")};_(!0);const r="notifications";f.A.update(P,a).then((()=>{n.oR.success(e("successfully.updated")),E((0,h.EK)({...t,nextUrl:r})),F(`/${r}`),E((0,v.b)({}))})).finally((()=>_(!1)))},form:w,initialValues:{active:!0,...t.data},children:[(0,b.jsxs)(s.A,{gutter:12,children:[(0,b.jsx)(c.A,{span:12,children:l.map((t=>(0,b.jsx)(r.A.Item,{label:e("title"),name:`title[${t.locale}]`,rules:[{validator:(l,i)=>i||(null===t||void 0===t?void 0:t.locale)!==$?i&&""===(null===i||void 0===i?void 0:i.trim())?Promise.reject(new Error(e("no.empty.space"))):i&&(null===i||void 0===i?void 0:i.trim().length)<2?Promise.reject(new Error(e("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(e("required")))}],hidden:t.locale!==$,children:(0,b.jsx)(d.A,{})},"title"+t.locale)))}),(0,b.jsx)(c.A,{span:24,children:l.map((t=>(0,b.jsx)(r.A.Item,{label:e("short.description"),name:`short_desc[${t.locale}]`,rules:[{validator:(l,i)=>i||(null===t||void 0===t?void 0:t.locale)!==$?i&&""===(null===i||void 0===i?void 0:i.trim())?Promise.reject(new Error(e("no.empty.space"))):i&&(null===i||void 0===i?void 0:i.trim().length)<2?Promise.reject(new Error(e("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(e("required")))}],hidden:t.locale!==$,children:(0,b.jsx)(d.A,{})},"short_desc"+t.locale)))}),(0,b.jsx)(c.A,{span:24,children:(0,b.jsx)(y.A,{form:w,lang:$,languages:l,getLanguageFields:q})})]}),(0,b.jsx)(u.A,{children:(0,b.jsx)(m.A,{type:"primary",htmlType:"submit",loading:k,children:e("save")})})]})})}}}]);