"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[7299],{27299:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var s=i(9950),l=i(12678),a=i(44070),n=i(29633),d=i(80737),o=i(48538),r=i(23263),u=i(52913),c=i(85923),v=i(76083),x=i(55386),h=i(91854),m=i(74623),p=i(88986),g=i(8168),f=i(70030),y=i(12408),k=i(18583),w=i(59051),A=i.n(w),j=i(28429),C=i(35116),_=i(28645),I=i(1160),b=i(51066),S=i(44414);function z(){const{t:e}=(0,f.B)(),t=(0,h.wA)(),i=(0,j.Zp)(),w=(0,b.Q)(),z=s=>{t((0,m.X4)({url:`/users/user/${s.uuid}`,id:"user_info",name:e("user.info")})),i(`/users/user/${s.uuid}`,{state:{user_id:s.id}})},[M,N]=(0,s.useState)([{title:e("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:e("user"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,S.jsxs)("div",{className:"text-hover",onClick:()=>z(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("deliveryman"),dataIndex:"deliveryman",key:"deliveryman",is_show:!0,render:e=>(0,S.jsxs)("div",{className:"text-hover",onClick:()=>z(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("rating"),dataIndex:"rating",key:"rating",is_show:!0,render:e=>(0,S.jsx)(n.A,{allowHalf:!0,disabled:!0,defaultValue:e})},{title:e("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>A()(e).format(`YYYY-MM-DD ${w}`)},{title:e("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,t)=>(0,S.jsxs)(d.A,{children:[(0,S.jsx)(o.A,{type:"primary",icon:(0,S.jsx)(l.A,{}),onClick:()=>D(t.id)}),(0,S.jsx)(C.A,{icon:(0,S.jsx)(a.A,{}),onClick:()=>{$([t.id]),P(!0),E(!0)}})]})}]),{setIsModalVisible:P}=(0,s.useContext)(x.o),[Y,$]=(0,s.useState)(null),[R,D]=(0,s.useState)(null),[O,V]=(0,s.useState)(!1),[B,E]=(0,s.useState)(null),{activeMenu:H}=(0,h.d4)((e=>e.menu),h.bN),{reviews:K,meta:Q,loading:T,params:X}=(0,h.d4)((e=>e.deliveryboyReview),h.bN),Z=H.data,q={sort:null===Z||void 0===Z?void 0:Z.sort,column:null===Z||void 0===Z?void 0:Z.column,perPage:null===Z||void 0===Z?void 0:Z.perPage,page:null===Z||void 0===Z?void 0:Z.page,assign:"deliveryman"};(0,s.useEffect)((()=>{H.refetch&&(0,h.vA)((()=>{t((0,I.iI)(q)),t((0,m.km)(H))}))}),[H.refetch]),(0,p.A)((()=>{t((0,I.iI)(q))}),[H.data]);const F={id:Y,onChange:e=>{$(e)}};return(0,S.jsxs)(r.A,{title:e("deliveryboy.reviews"),extra:(0,S.jsxs)(d.A,{wrap:!0,children:[(0,S.jsx)(C.A,{size:"",onClick:()=>{null===Y||0===Y.length?c.oR.warning(e("select.the.product")):(P(!0),E(!1))},children:e("delete.selected")}),(0,S.jsx)(_.A,{columns:M,setColumns:N})]}),children:[(0,S.jsx)(u.A,{scroll:{x:!0},rowSelection:F,columns:null===M||void 0===M?void 0:M.filter((e=>e.is_show)),dataSource:K,pagination:{pageSize:X.perPage,page:X.page,total:Q.total,defaultCurrent:X.page},rowKey:e=>e.id,onChange:function(e,i,s){const{pageSize:l,current:a}=e,{field:n,order:d}=s,o=(0,g.A)(d);t((0,m.Ok)({activeMenu:H,data:{perPage:l,page:a,column:n,sort:o}}))},loading:T}),(0,S.jsx)(v.A,{click:()=>{V(!0);const i={...Object.assign({},...Y.map(((e,t)=>({[`ids[${t}]`]:e}))))};y.A.delete(i).then((()=>{c.oR.success(e("successfully.deleted")),t((0,I.iI)()),P(!1)})).finally((()=>V(!1)))},text:e(B?"delete":"all.delete"),setText:$,loading:O}),R&&(0,S.jsx)(k.A,{id:R,handleCancel:()=>D(null)})]})}}}]);