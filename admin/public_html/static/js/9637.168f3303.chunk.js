"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[9637],{31281:(e,t,l)=>{function a(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const a=e.map((e=>({[e.locale]:""===t[`${l}[${e.locale}]`]?void 0:t[`${l}[${e.locale}]`]})));return Object.assign({},...a)}l.d(t,{A:()=>a})},59637:(e,t,l)=>{l.r(t),l.d(t,{default:()=>$});var a=l(9950),i=l(85923),s=l(59233),n=l(23263),r=l(87094),c=l(41988),o=l(55902),d=l(80737),u=l(48538),m=l(91854),h=l(36455),p=l(19181),A=l.n(p),f=l(74623),g=l(93142),v=l(70030),j=l(81446),y=l(71999),x=l(31281),b=l(44414);function $(){const{t:e}=(0,v.B)(),{activeMenu:t}=(0,m.d4)((e=>e.menu),m.bN),l=(0,m.wA)(),[p]=s.A.useForm(),[$,k]=(0,a.useState)(!1),[F,P]=(0,a.useState)(!1),{languages:q,defaultLang:E}=(0,m.d4)((e=>e.formLang),m.bN);function V(e){if(!e)return{};const{translations:t}=e,l=q.map((e=>{var l,a;return{[`title[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,[`description[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...l)}(0,a.useEffect)((()=>()=>{const e=p.getFieldsValue(!0);l((0,f.Ok)({activeMenu:t,data:e}))}),[]),(0,a.useEffect)((()=>{t.refetch&&(P(!0),g.A.getPolicy().then((e=>{let{data:t}=e;return p.setFieldsValue({...V(t)})})).catch((()=>{i.oR.dismiss(404)})).finally((()=>{P(!1),l((0,f.km)(t))})))}),[t.refetch]);return(0,b.jsx)(n.A,{title:e("policy"),extra:(0,b.jsx)(y.A,{}),children:F?(0,b.jsx)(j.A,{}):(0,b.jsxs)(s.A,{name:"policy-form",layout:"vertical",onFinish:t=>{const l={title:(0,x.A)(q,t),description:(0,x.A)(q,t,"description")};k(!0),g.A.createPolicy(l).then((()=>{i.oR.success(e("successfully.saved"))})).finally((()=>k(!1)))},form:p,initialValues:t.data,children:[(0,b.jsxs)(r.A,{gutter:12,children:[(0,b.jsx)(c.A,{span:12,children:q.map((t=>(0,b.jsx)(s.A.Item,{label:e("title"),name:`title[${t.locale}]`,rules:[{required:t.locale===E,message:e("required")}],hidden:t.locale!==E,children:(0,b.jsx)(o.A,{})},"title"+t.locale)))}),(0,b.jsx)(c.A,{span:24,children:q.map((t=>(0,b.jsx)(s.A.Item,{label:e("description"),name:`description[${t.locale}]`,valuePropName:"data",getValueFromEvent:(e,t)=>t.getData(),rules:[{required:t.locale===E,message:e("required")}],hidden:t.locale!==E,children:(0,b.jsx)(h.CKEditor,{editor:A()})})))})]}),(0,b.jsx)(d.A,{children:(0,b.jsx)(u.A,{type:"primary",htmlType:"submit",loading:$,children:e("save")})})]})})}},93142:(e,t,l)=>{l.d(t,{A:()=>i});var a=l(82371);const i={getPolicy:()=>a.A.get("dashboard/admin/policy"),getTerms:()=>a.A.get("dashboard/admin/term"),createPolicy:e=>a.A.post("dashboard/admin/policy",e),createTerms:e=>a.A.post("dashboard/admin/term",e)}}}]);