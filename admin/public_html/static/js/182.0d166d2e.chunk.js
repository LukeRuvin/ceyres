"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[182],{30182:(e,r,l)=>{l.r(r),l.d(r,{default:()=>f});var a=l(9950),t=l(59233),i=l(23263),s=l(87094),n=l(41988),o=l(55902),d=l(99674),c=l(25933),m=l(48538),u=l(85923),v=l(28429),p=l(71999),h=l(98591),j=l(91854),g=l(74623),A=l(62572),x=l(70030),y=l(48970),w=l(61707),b=l(44414);const f=()=>{var e,r;const{t:l}=(0,x.B)(),f=(0,v.Zp)(),k=(0,j.wA)(),{activeMenu:P}=(0,j.d4)((e=>e.menu),j.bN),[E,I]=(0,a.useState)(null!==(e=P.data)&&void 0!==e&&e.image?[null===(r=P.data)||void 0===r?void 0:r.image]:[]),[q]=t.A.useForm(),[$,L]=(0,a.useState)(!1),[S,F]=(0,a.useState)(null),{defaultLang:N,languages:z}=(0,j.d4)((e=>e.formLang),j.bN);(0,a.useEffect)((()=>()=>{const e=q.getFieldsValue(!0);k((0,g.Ok)({activeMenu:P,data:e}))}),[]);return(0,b.jsx)(i.A,{title:l("add.category"),extra:(0,b.jsx)(p.A,{}),children:(0,b.jsxs)(t.A,{name:"basic",layout:"vertical",onFinish:e=>{var r;L(!0);const a={...e,type:"receipt",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null,"images[0]":null===(r=E[0])||void 0===r?void 0:r.name},t="catalog/recipe-categories";A.A.create(a).then((()=>{u.oR.success(l("successfully.created")),k((0,w.rn)()),f(`/${t}`),k((0,g.EK)({...P,nextUrl:t}))})).catch((e=>F(e.response.data.params))).finally((()=>L(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...P.data},form:q,children:[(0,b.jsxs)(s.A,{gutter:12,children:[(0,b.jsx)(n.A,{span:12,children:z.map(((e,r)=>(0,b.jsx)(t.A.Item,{label:l("name"),name:`title[${e.locale}]`,help:S&&S[`title.${N}`]?S[`title.${N}`][0]:null,validateStatus:S?"error":"success",rules:[{validator:(r,a)=>a||(null===e||void 0===e?void 0:e.locale)!==N?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(l("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.trim().length)<2?Promise.reject(new Error(l("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(l("required")))}],hidden:e.locale!==N,children:(0,b.jsx)(o.A,{placeholder:l("name")})},e.title+r)))}),(0,b.jsx)(n.A,{span:12,children:z.map(((e,r)=>(0,b.jsx)(t.A.Item,{label:l("description"),name:`description[${e.locale}]`,rules:[{validator:(r,a)=>a||(null===e||void 0===e?void 0:e.locale)!==N?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(l("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.trim().length)<5?Promise.reject(new Error(l("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(l("required")))}],hidden:e.locale!==N,children:(0,b.jsx)(h.A,{rows:4})},e.locale+r)))}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(t.A.Item,{label:l("keywords"),name:"keywords",rules:[{required:!0,message:l("required")}],children:(0,b.jsx)(d.A,{mode:"tags",style:{width:"100%"}})})}),(0,b.jsx)(n.A,{span:4,children:(0,b.jsx)(t.A.Item,{label:l("image"),name:"images",rules:[{validator:()=>0===(null===E||void 0===E?void 0:E.length)?Promise.reject(new Error(l("required"))):Promise.resolve()}],children:(0,b.jsx)(y.A,{type:"categories",imageList:E,setImageList:I,form:q,multiple:!1})})}),(0,b.jsx)(n.A,{span:2,children:(0,b.jsx)(t.A.Item,{label:l("active"),name:"active",valuePropName:"checked",children:(0,b.jsx)(c.A,{})})})]}),(0,b.jsx)(m.A,{type:"primary",htmlType:"submit",loading:$,children:l("submit")})]})})}}}]);