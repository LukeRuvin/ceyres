"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3184],{23184:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var l=a(9950),s=a(28429),i=a(85923),n=a(59233),c=a(23263),r=a(87094),d=a(41988),u=a(55902),m=a(48538),o=a(90650),g=a(91854),h=a(74623),f=(a(63620),a(70030)),x=a(71999),p=a(31281),j=a(48970),v=a(58974),A=a(17498),b=a(44414);const y=()=>{var e,t;const{t:a}=(0,f.B)(),{activeMenu:y}=(0,g.d4)((e=>e.menu),g.bN),N=(0,g.wA)(),[k]=n.A.useForm(),$=(0,s.Zp)(),{id:q}=(0,s.g)(),[w,F]=(0,l.useState)(null!==(e=y.data)&&void 0!==e&&e.img?null===(t=y.data)||void 0===t?void 0:t.img:[]),[I,L]=(0,l.useState)(!1),[O,z]=(0,l.useState)(!1),{languages:E,defaultLang:M}=(0,g.d4)((e=>e.formLang),g.bN);(0,l.useEffect)((()=>()=>{const e=k.getFieldsValue(!0);N((0,h.Ok)({activeMenu:y,data:e}))}),[]);const S=e=>e.map((e=>({uid:e,name:e,url:e})));function V(e){if(!e)return{};const{translations:t}=e,a=E.map((e=>{var a;return{[`title[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title}}));return Object.assign({},...a)}return(0,l.useEffect)((()=>{var e;y.refetch&&(e=q,z(!0),v.A.getById(e).then((e=>{let t=e.data;const a={images:S([t.img]),...V(t)};k.setFieldsValue(a),F(S([t.img])),N((0,h.Ok)({activeMenu:y,data:a}))})).finally((()=>{N((0,h.km)(y)),z(!1)})))}),[y.refetch]),(0,b.jsx)(c.A,{title:a("shop.banner"),className:"h-100",extra:(0,b.jsx)(x.A,{}),children:O?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(o.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(n.A,{name:"shop-add",layout:"vertical",onFinish:e=>{const t={images:w.map((e=>e.name)),title:(0,p.A)(E,e,"title")};L(!0);const l="shop-tag";v.A.create(t).then((()=>{i.oR.success(a("successfully.created")),N((0,h.EK)({...y,nextUrl:l})),$(`/${l}`),N((0,A.H)())})).finally((()=>L(!1)))},form:k,initialValues:{active:!0,...y.data},className:"d-flex flex-column h-100",children:[(0,b.jsxs)(r.A,{gutter:12,children:[(0,b.jsx)(d.A,{span:12,children:E.map((e=>(0,b.jsx)(n.A.Item,{label:a("title"),name:`title[${e.locale}]`,rules:[{required:e.locale===M,message:a("required")}],hidden:e.locale!==M,children:(0,b.jsx)(u.A,{})},"title"+e.locale)))}),(0,b.jsx)(d.A,{span:24,children:(0,b.jsx)(n.A.Item,{rules:[{required:!w.length,message:a("required")}],label:a("image"),name:"images",children:(0,b.jsx)(j.A,{type:"products",imageList:w,setImageList:F,form:k,length:"1",multiple:!1})})})]}),(0,b.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,b.jsx)("div",{className:"pb-5",children:(0,b.jsx)(m.A,{type:"primary",htmlType:"submit",loading:I,disabled:I,children:a("submit")})})})]})})}},31281:(e,t,a)=>{function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const l=e.map((e=>({[e.locale]:""===t[`${a}[${e.locale}]`]?void 0:t[`${a}[${e.locale}]`]})));return Object.assign({},...l)}a.d(t,{A:()=>l})}}]);