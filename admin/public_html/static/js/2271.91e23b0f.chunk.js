"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[2271],{17456:(e,t,l)=>{l.d(t,{A:()=>a});l(9950);const a=l.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},42271:(e,t,l)=>{l.r(t),l.d(t,{default:()=>F});var a=l(12916),n=l(23263),d=l(48538),i=l(66362),r=l(52913),s=l(53774),c=l(59051),o=l.n(c),u=l(9950),p=l(70030),h=l(91854),v=l(74623),m=l(53271),y=l(59233),x=l(82706),b=l(87094),f=l(41988),g=l(40577),j=l(53496),A=l(81446),w=l(85923),k=l(17456),S=l(54826),C=l(70283),N=l(68873),_=l(17491),z=l(23327),I=l(44414);function $(e){var t,l;let{open:a,handleCancel:i,refetch:r}=e;const{t:s}=(0,p.B)(),c=(0,h.wA)(),{payments:o,loading:v}=(0,h.d4)((e=>e.payment),h.bN),{myShop:m}=(0,h.d4)((e=>e.myShop),h.bN),{defaultCurrency:$}=(0,h.d4)((e=>e.currency),h.bN),D=(0,h.d4)((e=>e.auth.user.walledId)),[F,H]=(0,u.useState)(!1),[M,Y]=(0,u.useState)({}),[B,G]=(0,u.useState)(null),[V,q]=(0,u.useState)(null),{payment_type:E}=(0,h.d4)((e=>e.globalSettings.settings),h.bN),[K]=y.A.useForm();(0,u.useEffect)((()=>{o.length||c((0,j.kK)()),async function(){await _.A.getById(m.id).then((e=>{let{data:t}=e;return G(t.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){return _.A.getAll().then((e=>{let{data:t}=e;return q(t.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}().then()}),[]);const Q=e=>{switch(e){case"wallet":return(0,I.jsx)(N.c8K,{size:80});case"paypal":return(0,I.jsx)(S.SnG,{size:80});case"stripe":return(0,I.jsx)(C.kDV,{size:80});case"razorpay":return(0,I.jsx)(C.NVb,{size:80});case"paystack":return(0,I.jsx)("img",{src:k.A,alt:"img",width:"80",height:"80"})}};return(0,I.jsx)(x.A,{visible:a,title:s("wallet.topup"),onCancel:i,footer:[(0,I.jsx)(d.A,{type:"primary",disabled:v,htmlType:"submit",form:"payment",loading:F,children:s("save")},"save-btn"),(0,I.jsx)(d.A,{type:"default",onClick:i,children:s("cancel")},"cancel-btn")],children:v?(0,I.jsx)(A.A,{}):(0,I.jsx)(y.A,{layout:"vertical",id:"payment",onFinish:e=>{if(!M.value)return void w.oR.warning(s("please.select.payment.type"));const t={wallet_id:D,total_price:e.price,currency_id:null===$||void 0===$?void 0:$.id};H(!0),z.A.topUp(M.label,t).then((e=>{let{data:t}=e;K.resetFields(),Y({}),i(),r(),window.open(t.data.url)})).finally((()=>H(!1)))},children:(0,I.jsxs)(b.A,{gutter:12,children:[(0,I.jsx)(f.A,{span:24,children:(0,I.jsx)(y.A.Item,{name:"price",label:s("price"),rules:[{required:!0,message:s("required")},{type:"number",min:0,message:s("should.be.greater.than.0")}],children:(0,I.jsx)(g.A,{className:"w-100"})})}),null===(t="admin"===E?V:B)||void 0===t||null===(l=t.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label)&&"wallet"!==(null===e||void 0===e?void 0:e.label))))||void 0===l?void 0:l.map(((e,t)=>(0,I.jsx)(f.A,{span:8,children:(0,I.jsxs)(n.A,{className:"payment-card "+((null===M||void 0===M?void 0:M.label)===e.label?"active":""),onClick:()=>{Y(e)},children:[(0,I.jsx)("div",{className:"payment-icon",children:Q(null===e||void 0===e?void 0:e.label)}),(0,I.jsx)("div",{className:"font-weight-bold mt-2",children:s(null===e||void 0===e?void 0:e.label)})]})},t)))]})})})}var D=l(51066);const F=()=>{var e;const[t,l]=(0,u.useState)(null),{t:c}=(0,p.B)(),y=(0,h.wA)(),[x,b]=(0,u.useState)(!1),[f,g]=(0,u.useState)(!1),{activeMenu:j}=(0,h.d4)((e=>e.menu)),A=(0,D.Q)(),w=(0,u.useCallback)((()=>{b(!0),m.A.profileShow().then((e=>{l(e.data)})).finally((()=>{b(!1)}))}),[]);(0,u.useEffect)((()=>{null!==j&&void 0!==j&&j.refetch&&w(),y((0,v.km)(j))}),[null===j||void 0===j?void 0:j.refetch]);const k=[{title:c("created.at"),dataIndex:"created_at",render:e=>o()(e).format(`YYYY-MM-DD ${A}`)},{title:c("status"),dataIndex:"status",render:e=>(0,I.jsx)("div",{children:"paid"===e?(0,I.jsx)(a.A,{color:"cyan",children:e}):(0,I.jsx)(a.A,{color:"blue",children:e})})},{title:c("type"),dataIndex:"type",render:e=>"topup"===e?(0,I.jsx)(a.A,{color:"cyan",children:e}):(0,I.jsx)(a.A,{color:"error",children:e})},{title:c("note"),dataIndex:"note"}];return(0,I.jsxs)(n.A,{title:c("user.wallet"),extra:x?null:(0,I.jsx)(d.A,{onClick:()=>g(!0),children:c("top.up")}),children:[null!==t&&void 0!==t&&t.wallet?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(i.A.Title,{children:(0,s.default)(null===t||void 0===t?void 0:t.wallet.price)}),(0,I.jsx)(r.A,{loading:x,dataSource:null===t||void 0===t||null===(e=t.wallet)||void 0===e?void 0:e.histories,columns:k})]}):(0,I.jsx)(r.A,{dataSource:[],columns:k,loading:x}),(0,I.jsx)($,{refetch:w,open:f,handleCancel:()=>g(!1)})]})}},51066:(e,t,l)=>{l.d(t,{Q:()=>d});var a=l(17706),n=l(80415);const d=()=>{var e,t,l,d;return null!==(e=null===(t=a.M.getState())||void 0===t||null===(l=t.globalSettings)||void 0===l||null===(d=l.settings)||void 0===d?void 0:d.hour_format)&&void 0!==e?e:n.G}},53774:(e,t,l)=>{function a(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"after";const l=Number(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"after"===t?`${l} ${e}`:`${e} ${l}`}l.r(t),l.d(t,{default:()=>a})},80415:(e,t,l)=>{l.d(t,{G:()=>i,HV:()=>n,LH:()=>a,PR:()=>d,wO:()=>s,xt:()=>r});const a={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},n=(new Date,new Date,["new","accepted","ready","on_a_way","pause","delivered","canceled"]),d=30,i="HH:mm",r="hh:mm a",s=!0}}]);