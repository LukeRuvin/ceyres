"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[5937],{45937:(e,r,a)=>{a.r(r),a.d(r,{default:()=>f});var l=a(9950),t=a(59233),i=a(23263),s=a(87094),n=a(41988),o=a(55902),d=a(99674),c=a(25933),m=a(48538),u=a(85923),v=a(28429),h=a(71999),p=a(98591),j=a(91854),g=a(74623),x=a(62572),A=a(85427),y=a(70030),b=a(48970),w=a(44414);const f=()=>{var e,r;const{t:a}=(0,y.B)(),f=(0,v.Zp)(),k=(0,j.wA)(),{activeMenu:P}=(0,j.d4)((e=>e.menu),j.bN),{params:E}=(0,j.d4)((e=>e.careerCategory),j.bN),[I,q]=(0,l.useState)(null!==(e=P.data)&&void 0!==e&&e.image?[null===(r=P.data)||void 0===r?void 0:r.image]:[]),[L]=t.A.useForm(),[$,N]=(0,l.useState)(!1),[S,C]=(0,l.useState)(null),{defaultLang:F,languages:z}=(0,j.d4)((e=>e.formLang),j.bN);(0,l.useEffect)((()=>()=>{const e=L.getFieldsValue(!0);k((0,g.Ok)({activeMenu:P,data:e}))}),[]);return(0,w.jsx)(i.A,{title:a("add.category"),extra:(0,w.jsx)(h.A,{}),children:(0,w.jsxs)(t.A,{name:"basic",layout:"vertical",onFinish:e=>{var r;N(!0);const l={...e,type:"career",active:e.active?1:0,keywords:e.keywords.join(","),parent_id:null,"images[0]":null===(r=I[0])||void 0===r?void 0:r.name},t="catalog/career-categories";x.A.create(l).then((()=>{u.oR.success(a("successfully.created")),k((0,g.EK)({...P,nextUrl:t})),k((0,A.b)(E)),f(`/${t}`)})).catch((e=>C(e.response.data.params))).finally((()=>N(!1)))},initialValues:{parent_id:{title:"---",value:0,key:0},active:!0,...P.data},form:L,children:[(0,w.jsxs)(s.A,{gutter:12,children:[(0,w.jsx)(n.A,{span:12,children:z.map(((e,r)=>(0,w.jsx)(t.A.Item,{label:a("name"),name:`title[${e.locale}]`,help:S&&S[`title.${F}`]?S[`title.${F}`][0]:null,validateStatus:S?"error":"success",rules:[{validator:(r,l)=>l||(null===e||void 0===e?void 0:e.locale)!==F?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(a("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(a("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(a("required")))}],hidden:e.locale!==F,children:(0,w.jsx)(o.A,{placeholder:a("name")})},e.title+r)))}),(0,w.jsx)(n.A,{span:12,children:z.map(((e,r)=>(0,w.jsx)(t.A.Item,{label:a("description"),name:`description[${e.locale}]`,rules:[{validator:(r,l)=>l||(null===e||void 0===e?void 0:e.locale)!==F?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(a("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<5?Promise.reject(new Error(a("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(a("required")))}],hidden:e.locale!==F,children:(0,w.jsx)(p.A,{rows:4,maxLength:150})},e.locale+r)))}),(0,w.jsx)(n.A,{span:12,children:(0,w.jsx)(t.A.Item,{label:a("keywords"),name:"keywords",rules:[{required:!0,message:a("required")}],children:(0,w.jsx)(d.A,{mode:"tags",style:{width:"100%"}})})}),(0,w.jsx)(n.A,{span:4,children:(0,w.jsx)(t.A.Item,{label:a("image"),name:"images",rules:[{validator:(e,r)=>0===(null===I||void 0===I?void 0:I.length)?Promise.reject(new Error(a("required"))):Promise.resolve()}],children:(0,w.jsx)(b.A,{type:"categories",imageList:I,setImageList:q,form:L,multiple:!1})})}),(0,w.jsx)(n.A,{span:2,children:(0,w.jsx)(t.A.Item,{label:a("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(c.A,{})})})]}),(0,w.jsx)(m.A,{type:"primary",htmlType:"submit",loading:$,children:a("submit")})]})})}}}]);