"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[8158],{26107:(e,t,n)=>{n.d(t,{A:()=>b});var a=n(9950),l=n(59233),s=n(87094),i=n(41988),r=n(23263),d=n(55902),o=n(40577),c=n(25933),u=n(48538),m=n(91854),p=n(67231),v=n(74623),h=n(28429),x=n(70030),A=n(31888),j=n(15249),g=n(85023),y=n(44414);const b=e=>{let{next:t,action_type:n=""}=e;const{t:b}=(0,x.B)(),[f]=l.A.useForm(),k=(0,m.wA)(),{uuid:q}=(0,h.g)(),N=(0,h.Zp)(),[I,w]=(0,a.useState)(null),{myShop:$}=(0,m.d4)((e=>e.myShop),m.bN),{activeMenu:F}=(0,m.d4)((e=>e.menu),m.bN),{defaultLang:C,languages:E}=(0,m.d4)((e=>e.formLang),m.bN),[P,S]=(0,a.useState)(!1);(0,a.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);k((0,v.Ok)({activeMenu:F,data:{...F.data,...e}}))}),[]);return(0,y.jsxs)(l.A,{layout:"vertical",form:f,initialValues:{active:!0,...F.data},onFinish:e=>{var a;S(!0);const l={...e,active:Number(e.active),shop_id:$.id,unit_id:null===(a=e.unit)||void 0===a?void 0:a.value,shop:void 0,addon:Number(1)};"edit"===n?function(e,n){p.A.update(q,n).then((()=>{k((0,v.Ok)({activeMenu:F,data:e})),t()})).catch((e=>w(e.response.data.params))).finally((()=>S(!1)))}(e,l):function(e,t){p.A.create(t).then((t=>{let{data:n}=t;k((0,v.W6)({id:`addons-${n.uuid}`,url:`seller/addon/${n.uuid}`,name:b("add.addons"),data:e,refetch:!1})),N(`/seller/addon/${n.uuid}?step=1`)})).catch((e=>w(e.response.data.params))).finally((()=>S(!1)))}(e,l)},className:"addon-menu",children:[(0,y.jsxs)(s.A,{gutter:12,children:[(0,y.jsxs)(i.A,{xs:24,sm:24,md:16,children:[(0,y.jsxs)(r.A,{title:b("basic.info"),children:[E.map((e=>(0,y.jsx)(l.A.Item,{label:b("name"),name:`title[${e.locale}]`,rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==C?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(b("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<2?Promise.reject(new Error(b("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(b("required")))}],hidden:e.locale!==C,children:(0,y.jsx)(d.A,{})},"name"+e.id))),E.map((e=>(0,y.jsx)(l.A.Item,{label:b("description"),name:`description[${e.locale}]`,rules:[{validator:(t,n)=>n||(null===e||void 0===e?void 0:e.locale)!==C?n&&""===(null===n||void 0===n?void 0:n.trim())?Promise.reject(new Error(b("no.empty.space"))):n&&(null===n||void 0===n?void 0:n.trim().length)<5?Promise.reject(new Error(b("must.be.at.least.5"))):Promise.resolve():Promise.reject(new Error(b("required")))}],hidden:e.locale!==C,children:(0,y.jsx)(j.A,{rows:4,span:4})},"description"+e.id)))]}),(0,y.jsx)(r.A,{title:b("price"),children:(0,y.jsxs)(s.A,{gutter:12,children:[(0,y.jsx)(i.A,{span:12,children:(0,y.jsx)(l.A.Item,{label:b("min.qty"),name:"min_qty",rules:[{required:!0,message:b("required")},{type:"number",min:0,message:b("must.be.positive")}],children:(0,y.jsx)(o.A,{className:"w-100"})})}),(0,y.jsx)(i.A,{span:12,children:(0,y.jsx)(l.A.Item,{label:b("max.qty"),name:"max_qty",rules:[{required:!0,message:b("required")},{type:"number",min:0,message:b("must.be.positive")}],children:(0,y.jsx)(o.A,{className:"w-100"})})}),(0,y.jsx)(i.A,{span:12,children:(0,y.jsx)(l.A.Item,{label:b("tax"),name:"tax",rules:[{required:!0,message:b("required")},{type:"number",min:0,max:100,message:b("must.be.between.0.and.100")}],children:(0,y.jsx)(o.A,{className:"w-100",addonAfter:"%"})})}),(0,y.jsx)(i.A,{span:12,children:(0,y.jsx)(l.A.Item,{label:b("active"),name:"active",valuePropName:"checked",children:(0,y.jsx)(c.A,{})})})]})})]}),(0,y.jsx)(i.A,{xs:24,sm:24,md:8,children:(0,y.jsx)(r.A,{title:b("addition"),children:(0,y.jsx)(l.A.Item,{label:b("unit"),name:"unit",rules:[{required:!0,message:b("required")}],children:(0,y.jsx)(g.D,{style:{width:"100%"},fetchOptions:function(e){const t={search:e,active:1};return A.A.getAll(t).then((e=>{let{data:t}=e;return function(e){return e.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}(t)}))}})})})})]}),(0,y.jsx)(u.A,{type:"primary",htmlType:"submit",loading:P,children:b("next")})]})}},28116:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(9950),l=n(91524),s=n(80737),i=n(48538),r=n(90650),d=n(91854),o=n(28429),c=n(74623),u=n(70030),m=n(67231),p=n(14863),v=n(44414);const h=e=>{var t,n,h;let{prev:x}=e;const{t:A}=(0,u.B)(),{activeMenu:j}=(0,d.d4)((e=>e.menu),d.bN),{defaultLang:g,languages:y}=(0,d.d4)((e=>e.formLang),d.bN),b=(0,o.Zp)(),f=(0,d.wA)(),[k,q]=(0,a.useState)({}),[N,I]=(0,a.useState)(null),{uuid:w}=(0,o.g)(),{params:$}=(0,d.d4)((e=>e.addons),d.bN);function F(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,n=y.map((e=>{var n,a;return{[`title[${e.locale}]`]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.title,[`description[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...n)}return(0,a.useEffect)((()=>{!function(e){I(!0),m.A.getById(e).then((e=>{const t={...e.data,...F(e.data),properties:e.data.properties.map(((e,t)=>({id:t,[`key[${e.locale}]`]:e.key,[`value[${e.locale}]`]:e.value}))),translation:void 0,translations:void 0};q(t)})).finally((()=>I(!1)))}(w)}),[]),N?(0,v.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,v.jsx)(r.A,{size:"large",className:"py-5"})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(l.A,{title:A("product.info"),bordered:!0,children:[(0,v.jsx)(l.A.Item,{label:`${A("title")} (${g})`,span:3,children:k[`title[${g}]`]}),(0,v.jsx)(l.A.Item,{label:`${A("description")} (${g})`,span:3,children:k[`description[${g}]`]}),(0,v.jsx)(l.A.Item,{label:A("shop"),span:1.5,children:null===(t=k.shop)||void 0===t?void 0:t.translation.title}),(0,v.jsx)(l.A.Item,{label:A("unit"),span:1.5,children:null===(n=k.unit)||void 0===n?void 0:n.translation.title}),(0,v.jsx)(l.A.Item,{label:A("tax"),children:k.tax}),(0,v.jsx)(l.A.Item,{label:A("min.quantity"),children:k.min_qty}),(0,v.jsx)(l.A.Item,{label:A("max.quantity"),children:k.max_qty})]}),null===(h=k.stocks)||void 0===h?void 0:h.map(((e,t)=>e?(0,v.jsxs)(l.A,{bordered:!0,className:"mt-4",children:[(0,v.jsx)(l.A.Item,{label:A("price"),span:2,children:e.price}),(0,v.jsx)(l.A.Item,{label:A("quantity"),span:2,children:e.quantity}),e.extras.map(((e,t)=>{var n,a;return(0,v.jsx)(l.A.Item,{label:null===e||void 0===e||null===(n=e.group)||void 0===n||null===(a=n.translation)||void 0===a?void 0:a.title,children:null===e||void 0===e?void 0:e.value},"extra"+t)}))]},"desc"+t):"")),(0,v.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,v.jsxs)(s.A,{children:[(0,v.jsx)(i.A,{onClick:x,children:A("prev")}),(0,v.jsx)(i.A,{type:"primary",onClick:function(){const e={...$},t="seller/addons";b(`/${t}`),f((0,c.EK)({...j,nextUrl:t})),f((0,p.fw)(e)),f((0,c.km)(j))},children:A("finish")})]})})]})}},31888:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(82371);const l={getAll:e=>a.A.get("dashboard/seller/units/paginate",{params:e}),getById:(e,t)=>a.A.get(`dashboard/seller/units/${e}`,{params:t})}},48158:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var a=n(9950),l=n(68218),s=n(86366),i=n(23263),r=n(90650),d=n(64361),o=n(28116),c=n(26107),u=n(71999),m=n(28429),p=n(67231),v=n(91854),h=n(74623),x=n(70030),A=n(65820),j=n(44414);const{Step:g}=s.A,y=()=>{var e;const{t:t}=(0,x.B)(),{uuid:n}=(0,m.g)(),y=(0,A.s)(),{activeMenu:b}=(0,v.d4)((e=>e.menu),v.bN),{languages:f}=(0,v.d4)((e=>e.formLang),v.bN),k=(0,v.wA)(),q=Number((null===(e=y.values)||void 0===e?void 0:e.step)||0),[N,I]=(0,a.useState)(b.refetch),w=()=>{const e=q+1;y.set("step",e)},$=()=>{const e=q-1;y.set("step",e)},F=e=>e?{label:e.translation?e.translation.title:e.title,value:e.id}:null;function C(e){if(null===e||void 0===e||!e.translations)return{};const{translations:t}=e,n=f.map((e=>{var n,a;return{[`title[${e.locale}]`]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.title,[`description[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...n)}(0,a.useEffect)((()=>{b.refetch&&function(e){I(!0),p.A.getById(e).then((e=>{const t={...e.data,...C(e.data),shop:F(e.data.shop),category:F(e.data.category),brand:F(e.data.brand),unit:F(e.data.unit),images:(n=e.data.galleries,n.map((e=>({uid:e.id,name:e.path,url:e.path})))),properties:e.data.properties.map(((e,t)=>({id:t,[`key[${e.locale}]`]:e.key,[`value[${e.locale}]`]:e.value}))),translation:void 0,translations:void 0};var n;k((0,h.Ok)({activeMenu:b,data:t}))})).finally((()=>{I(!1),k((0,h.km)(b))}))}(n)}),[b.refetch]);return(0,j.jsxs)(i.A,{title:t("clone.addon"),extra:(0,j.jsx)(u.A,{}),children:[(0,j.jsx)(s.A,{current:q,onChange:e=>{k((0,h.Ok)({activeMenu:b,data:{...b.data,step:e}})),y.set("step",e)},children:l.C.map((e=>(0,j.jsx)(g,{title:t(e.title)},e.title)))}),N?(0,j.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,j.jsx)(r.A,{size:"large",className:"py-5"})}):(0,j.jsxs)("div",{className:"steps-content",children:["First-content"===l.C[q].content&&(0,j.jsx)(c.A,{next:w}),"Third-content"===l.C[q].content&&(0,j.jsx)(d.A,{next:w,prev:$,current:q}),"Finish-content"===l.C[q].content&&(0,j.jsx)(o.A,{prev:$})]})]})}},64361:(e,t,n)=>{n.d(t,{A:()=>A});var a=n(9950),l=n(59233),s=n(87094),i=n(41988),r=n(40577),d=n(55902),o=n(80737),c=n(48538),u=n(91854),m=n(67231),p=n(70030),v=n(28429),h=n(74623),x=n(44414);const A=e=>{let{prev:t,next:n,current:A}=e;const{t:j}=(0,p.B)(),[g]=l.A.useForm(),{uuid:y}=(0,v.g)(),{activeMenu:b}=(0,u.d4)((e=>e.menu),u.bN),[f,k]=(0,a.useState)(null),q=(0,u.wA)();return(0,a.useEffect)((()=>{var e,t,n,a,l,s;q((0,h.Ms)(b)),g.setFieldsValue({price:null!==(e=b.data)&&void 0!==e&&null!==(t=e.stocks)&&void 0!==t&&t.length?b.data.stocks[0].price:null,quantity:null!==(n=b.data)&&void 0!==n&&null!==(a=n.stocks)&&void 0!==a&&a.length?b.data.stocks[0].quantity:null,sku:null!==(l=b.data)&&void 0!==l&&null!==(s=l.stocks)&&void 0!==s&&s.length?b.data.stocks[0].sku:null})}),[]),(0,x.jsxs)(l.A,{layout:"vertical",form:g,onFinish:e=>{let t;k(!0),t=[{price:e.price,quantity:e.quantity,sku:e.sku}],m.A.stocks(y,{extras:t}).then((()=>n())).finally((()=>k(!1)))},children:[(0,x.jsxs)(s.A,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},children:[(0,x.jsx)(i.A,{children:(0,x.jsx)(l.A.Item,{label:j("price"),name:"price",rules:[{required:!0,message:j("required")},{type:"number",min:1,message:j("must.be.at.least.1")}],children:(0,x.jsx)(r.A,{className:"w-100",style:{minWidth:200}})})}),(0,x.jsx)(i.A,{children:(0,x.jsx)(l.A.Item,{label:j("quantity"),name:"quantity",rules:[{required:!0,message:j("required")},{type:"number",min:1,message:j("must.be.at.least.1")}],children:(0,x.jsx)(r.A,{className:"w-100",style:{minWidth:200}})})}),(0,x.jsx)(i.A,{children:(0,x.jsx)(l.A.Item,{label:j("sku"),name:"sku",children:(0,x.jsx)(d.A,{style:{minWidth:200}})})})]}),(0,x.jsxs)(o.A,{className:"mt-4",children:[(0,x.jsx)(c.A,{onClick:t,children:j("prev")}),(0,x.jsx)(c.A,{type:"primary",htmlType:"submit",loading:!!f,children:j("next")})]})]})}},65820:(e,t,n)=>{n.d(t,{s:()=>i});var a=n(28429),l=n(21215),s=n.n(l);const i=()=>{const e=(0,a.Zp)(),t=(0,a.zy)(),n=s().parse(t.search,{ignoreQueryPrefix:!0});return{values:n,set:(t,a)=>e({search:s().stringify({...n,[t]:a})}),reset:t=>{const a={...n};a[t]&&delete a[t],e({search:s().stringify({...a})})},clear:()=>e({search:s().stringify({})}),merge:t=>e({search:s().stringify({...n,...t})})}}},68218:(e,t,n)=>{n.d(t,{C:()=>a});const a=[{title:"addons",content:"First-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]},85023:(e,t,n)=>{n.d(t,{D:()=>r});var a=n(9950),l=n(99674),s=n(90650),i=n(44414);const r=e=>{let{fetchOptions:t,refetch:n=!1,value:r,...d}=e;const[o,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)([]);"object"===typeof(null===r||void 0===r?void 0:r.label)&&null!==(null===r||void 0===r?void 0:r.label)&&(r.label=r.label.value);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.A,{labelInValue:!0,filterOption:!1,notFoundContent:o?(0,i.jsx)(s.A,{size:"small"}):"no results",value:r,...d,options:o?[]:u,onFocus:()=>{u.length&&!n||(c(!0),t().then((e=>{m(e),c(!1)})))},getPopupContainer:e=>e.parentNode})})}}}]);