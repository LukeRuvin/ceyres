"use strict";(self.webpackChunkuzmart=self.webpackChunkuzmart||[]).push([[3858],{3858:(e,l,a)=>{a.r(l),a.d(l,{default:()=>E});var t=a(9950),s=a(28429),r=a(85923),n=a(59233),i=a(23263),o=a(87094),d=a(41988),u=a(55902),c=a(99674),m=a(25933),p=a(48538),v=a(91854),g=a(74623),h=a(60926),b=a(70030),j=a(71999),x=a(48970),A=a(63620),f=a(75670),_=a(96011),y=a.n(_),w=a(31281),k=a(46492),P=a(44414);const E=()=>{var e,l,a;const{t:_}=(0,b.B)(),{activeMenu:E}=(0,v.d4)((e=>e.menu),v.bN),N=(0,v.wA)(),[$]=n.A.useForm(),F=(0,s.Zp)(),[I,q]=(0,t.useState)(!1),{languages:z,defaultLang:B}=(0,v.d4)((e=>e.formLang),v.bN),{pages:D}=(0,v.d4)((e=>e.pages),v.bN),[L,R]=(0,t.useState)(null!==(e=E.data)&&void 0!==e&&null!==(l=e.galleries)&&void 0!==l&&l[0]?[(V=null===(a=E.data.galleries)||void 0===a?void 0:a[0].path,{name:V,url:A.sE+V})]:[]);var V;(0,t.useEffect)((()=>()=>{const e=$.getFieldsValue(!0);N((0,g.Ok)({activeMenu:E,data:e}))}),[]);return(0,P.jsx)(i.A,{title:_("add.pages"),className:"h-100",extra:(0,P.jsx)(j.A,{}),children:(0,P.jsxs)(n.A,{name:"page-add",layout:"vertical",onFinish:e=>{q(!0);const l={images:L.map((e=>e.name)),active:Number(e.active),type:e.type,title:(0,w.A)(z,e,"title"),description:(0,w.A)(z,e,"description"),buttons:{google_play_button_link:null===e||void 0===e?void 0:e.google_play_button_link,app_store_button_link:null===e||void 0===e?void 0:e.app_store_button_link}};y()({method:"post",url:`${A.TT}dashboard/admin/pages`,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},data:l,params:{}}).then((()=>{const e="pages";r.oR.success(_("successfully.created")),N((0,g.EK)({...E,nextUrl:e})),F(`/${e}`),N((0,h.f)({}))})).catch((e=>{var l,a;return r.oR.error(null===(l=e.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)})).finally((()=>q(!1)))},form:$,initialValues:{active:!0,...E.data},className:"d-flex flex-column h-100",children:[(0,P.jsxs)(o.A,{gutter:12,children:[(0,P.jsx)(d.A,{span:12,children:z.map((e=>(0,P.jsx)(n.A.Item,{label:_("name"),name:`title[${e.locale}]`,rules:[{validator:(l,a)=>a||(null===e||void 0===e?void 0:e.locale)!==B?a&&""===(null===a||void 0===a?void 0:a.trim())?Promise.reject(new Error(_("no.empty.space"))):a&&(null===a||void 0===a?void 0:a.length)<2?Promise.reject(new Error(_("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(_("required")))}],hidden:e.locale!==B,children:(0,P.jsx)(u.A,{})},"title"+e.locale)))}),(0,P.jsx)(d.A,{span:12}),(0,P.jsx)(d.A,{span:24,children:(0,P.jsx)(f.A,{form:$,languages:z,lang:B})}),(0,P.jsx)(d.A,{span:12,children:(0,P.jsx)(n.A.Item,{label:_("type"),name:"type",rules:[{required:!0,message:_("required")}],children:(0,P.jsx)(c.A,{options:k.F.filter((e=>!D.some((l=>l.type===e.value)))),className:"w-100"})})}),(0,P.jsx)(d.A,{span:12,children:(0,P.jsx)(n.A.Item,{label:_("active"),name:"active",valuePropName:"checked",children:(0,P.jsx)(m.A,{})})}),(0,P.jsx)(d.A,{span:12,children:(0,P.jsx)(n.A.Item,{label:_("google_play_button_link"),name:"google_play_button_link",children:(0,P.jsx)(u.A,{className:"w-100"})})}),(0,P.jsx)(d.A,{span:12,children:(0,P.jsx)(n.A.Item,{label:_("app_store_button_link"),name:"app_store_button_link",children:(0,P.jsx)(u.A,{className:"w-100"})})}),(0,P.jsx)(d.A,{span:12,children:(0,P.jsx)(n.A.Item,{label:_("image"),name:"images",rules:[{validator:(e,l)=>0===(null===L||void 0===L?void 0:L.length)?Promise.reject(new Error(_("required"))):Promise.resolve()}],children:(0,P.jsx)(x.A,{type:"receipts",imageList:L,setImageList:R,form:$,multiple:!1})})})]}),(0,P.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,P.jsx)("div",{className:"pb-5",children:(0,P.jsx)(p.A,{type:"primary",htmlType:"submit",loading:I,children:_("submit")})})})]})})}},31281:(e,l,a)=>{function t(e,l){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const t=e.map((e=>({[e.locale]:""===l[`${a}[${e.locale}]`]?void 0:l[`${a}[${e.locale}]`]})));return Object.assign({},...t)}a.d(l,{A:()=>t})},46492:(e,l,a)=>{a.d(l,{F:()=>t});const t=[{value:"delivery",label:"Delivery"},{value:"about",label:"About"},{value:"about_second",label:"About second"},{value:"about_three",label:"About third"}]},75670:(e,l,a)=>{a.d(l,{A:()=>p});var t=a(9950),s=a(59233),r=a(70030),n=a(36455),i=a(19181),o=a.n(i),d=a(63620),u=a(64924),c=a(85923),m=a(44414);function p(e){let{form:l,lang:a,languages:i}=e;const{t:p}=(0,r.B)();function v(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((l,a)=>{const t=new FormData;e.file.then((e=>{e.size/1024/1024<2||(c.oR.error(p("min.2.mb")),a()),t.append("image",e),t.append("type","blogs"),u.A.upload(t).then((e=>{let{data:a}=e;l({default:`${d.sE+a.title}`})})).catch((e=>{a(e)}))}))}))}}(e)}return(0,m.jsx)(t.Fragment,{children:i.map((e=>(0,m.jsx)(s.A.Item,{label:p("description"),name:`description[${e.locale}]`,valuePropName:"data",getValueFromEvent:(e,l)=>l.getData(),rules:[{required:e.locale===a,message:p("required")},{validator:(e,l)=>l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(p("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<5?Promise.reject(new Error(p("must.be.at.least.5"))):l&&(null===l||void 0===l?void 0:l.trim().length)>200?Promise.reject(new Error(p("must.be.less.200"))):Promise.resolve()}],hidden:e.locale!==a,children:(0,m.jsx)(n.CKEditor,{editor:o(),config:{extraPlugins:[v]},onBlur:(a,t)=>{const s=t.getData();l.setFieldsValue({[`description[${e.value}]`]:s})}})},"desc"+e.locale)))})}}}]);